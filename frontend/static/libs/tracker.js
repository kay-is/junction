var uu=Object.create,Ra=Object.defineProperty,lu=Object.getOwnPropertyDescriptor,Ua=Object.getOwnPropertyNames,cu=Object.getPrototypeOf,hu=Object.prototype.hasOwnProperty,fi=(t,e)=>function(){return e||(0,t[Ua(t)[0]])((e={exports:{}}).exports,e),e.exports},fu=(t,e,r,a)=>{if(e&&typeof e=="object"||typeof e=="function")for(var o=Ua(e),l=0,c=o.length,u;l<c;l++)u=o[l],!hu.call(t,u)&&u!==r&&Ra(t,u,{get:(f=>e[f]).bind(null,u),enumerable:!(a=lu(e,u))||a.enumerable});return t},du=(t,e,r)=>(r=t!=null?uu(cu(t)):{},fu(e||!t||!t.__esModule?Ra(r,"default",{value:t,enumerable:!0}):r,t)),pu=fi({"node_modules/base64-js/index.js"(t){t.byteLength=f,t.toByteArray=b,t.fromByteArray=E;for(var e=[],r=[],a=typeof Uint8Array<"u"?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l=0,c=o.length;l<c;++l)e[l]=o[l],r[o.charCodeAt(l)]=l;r[45]=62,r[95]=63;function u(m){var _=m.length;if(_%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var A=m.indexOf("=");A===-1&&(A=_);var S=A===_?0:4-A%4;return[A,S]}function f(m){var _=u(m),A=_[0],S=_[1];return(A+S)*3/4-S}function p(m,_,A){return(_+A)*3/4-A}function b(m){var _,A=u(m),S=A[0],O=A[1],x=new a(p(m,S,O)),C=0,Z=O>0?S-4:S,L;for(L=0;L<Z;L+=4)_=r[m.charCodeAt(L)]<<18|r[m.charCodeAt(L+1)]<<12|r[m.charCodeAt(L+2)]<<6|r[m.charCodeAt(L+3)],x[C++]=_>>16&255,x[C++]=_>>8&255,x[C++]=_&255;return O===2&&(_=r[m.charCodeAt(L)]<<2|r[m.charCodeAt(L+1)]>>4,x[C++]=_&255),O===1&&(_=r[m.charCodeAt(L)]<<10|r[m.charCodeAt(L+1)]<<4|r[m.charCodeAt(L+2)]>>2,x[C++]=_>>8&255,x[C++]=_&255),x}function w(m){return e[m>>18&63]+e[m>>12&63]+e[m>>6&63]+e[m&63]}function v(m,_,A){for(var S,O=[],x=_;x<A;x+=3)S=(m[x]<<16&16711680)+(m[x+1]<<8&65280)+(m[x+2]&255),O.push(w(S));return O.join("")}function E(m){for(var _,A=m.length,S=A%3,O=[],x=16383,C=0,Z=A-S;C<Z;C+=x)O.push(v(m,C,C+x>Z?Z:C+x));return S===1?(_=m[A-1],O.push(e[_>>2]+e[_<<4&63]+"==")):S===2&&(_=(m[A-2]<<8)+m[A-1],O.push(e[_>>10]+e[_>>4&63]+e[_<<2&63]+"=")),O.join("")}}}),gu=fi({"node_modules/arweave/web/lib/utils.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.concatBuffers=r,t.b64UrlToString=a,t.bufferToString=o,t.stringToBuffer=l,t.stringToB64Url=c,t.b64UrlToBuffer=u,t.bufferTob64=f,t.bufferTob64Url=p,t.b64UrlEncode=b,t.b64UrlDecode=w;const e=pu();function r(v){let E=0;for(let A=0;A<v.length;A++)E+=v[A].byteLength;let m=new Uint8Array(E),_=0;m.set(new Uint8Array(v[0]),_),_+=v[0].byteLength;for(let A=1;A<v.length;A++)m.set(new Uint8Array(v[A]),_),_+=v[A].byteLength;return m}function a(v){let E=u(v);return o(E)}function o(v){return new TextDecoder("utf-8",{fatal:!0}).decode(v)}function l(v){return new TextEncoder().encode(v)}function c(v){return p(l(v))}function u(v){return new Uint8Array(e.toByteArray(w(v)))}function f(v){return e.fromByteArray(new Uint8Array(v))}function p(v){return b(f(v))}function b(v){try{return v.replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"")}catch(E){throw new Error("Failed to encode string",{cause:E})}}function w(v){try{v=v.replace(/\-/g,"+").replace(/\_/g,"/");let E;return v.length%4==0?E=0:E=4-v.length%4,v.concat("=".repeat(E))}catch(E){throw new Error("Failed to decode string",{cause:E})}}}}),yu=fi({"node_modules/arweave/web/lib/crypto/webcrypto-driver.js"(t){Object.defineProperty(t,"__esModule",{value:!0});const e=gu();var r=class{keyLength=4096;publicExponent=65537;hashAlgorithm="sha256";driver;constructor(){if(!this.detectWebCrypto())throw new Error("SubtleCrypto not available!");this.driver=crypto.subtle}async generateJWK(){let a=await this.driver.generateKey({name:"RSA-PSS",modulusLength:4096,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},!0,["sign"]),o=await this.driver.exportKey("jwk",a.privateKey);return{kty:o.kty,e:o.e,n:o.n,d:o.d,p:o.p,q:o.q,dp:o.dp,dq:o.dq,qi:o.qi}}async sign(a,o,{saltLength:l}={}){let c=await this.driver.sign({name:"RSA-PSS",saltLength:32},await this.jwkToCryptoKey(a),o);return new Uint8Array(c)}async hash(a,o="SHA-256"){let l=await this.driver.digest(o,a);return new Uint8Array(l)}async verify(a,o,l){const c={kty:"RSA",e:"AQAB",n:a},u=await this.jwkToPublicCryptoKey(c),f=await this.driver.digest("SHA-256",o),p=await this.driver.verify({name:"RSA-PSS",saltLength:0},u,l,o),b=await this.driver.verify({name:"RSA-PSS",saltLength:32},u,l,o),w=Math.ceil((u.algorithm.modulusLength-1)/8)-f.byteLength-2,v=await this.driver.verify({name:"RSA-PSS",saltLength:w},u,l,o),E=p||b||v;if(!E){const m={algorithm:u.algorithm.name,modulusLength:u.algorithm.modulusLength,keyUsages:u.usages,saltLengthsAttempted:`0, 32, ${w}`};console.warn(`Transaction Verification Failed! 
`,`Details: ${JSON.stringify(m,null,2)} 
`,"N.B. ArweaveJS is only guaranteed to verify txs created using ArweaveJS.")}return E}async jwkToCryptoKey(a){return this.driver.importKey("jwk",a,{name:"RSA-PSS",hash:{name:"SHA-256"}},!1,["sign"])}async jwkToPublicCryptoKey(a){return this.driver.importKey("jwk",a,{name:"RSA-PSS",hash:{name:"SHA-256"}},!1,["verify"])}detectWebCrypto(){if(typeof crypto>"u")return!1;const a=crypto?.subtle;return a===void 0?!1:["generateKey","importKey","exportKey","digest","sign"].every(l=>typeof a[l]=="function")}async encrypt(a,o,l){const c=await this.driver.importKey("raw",typeof o=="string"?e.stringToBuffer(o):o,{name:"PBKDF2",length:32},!1,["deriveKey"]),u=await this.driver.deriveKey({name:"PBKDF2",salt:l?e.stringToBuffer(l):e.stringToBuffer("salt"),iterations:1e5,hash:"SHA-256"},c,{name:"AES-CBC",length:256},!1,["encrypt","decrypt"]),f=new Uint8Array(16);crypto.getRandomValues(f);const p=await this.driver.encrypt({name:"AES-CBC",iv:f},u,a);return e.concatBuffers([f,p])}async decrypt(a,o,l){const c=await this.driver.importKey("raw",typeof o=="string"?e.stringToBuffer(o):o,{name:"PBKDF2",length:32},!1,["deriveKey"]),u=await this.driver.deriveKey({name:"PBKDF2",salt:l?e.stringToBuffer(l):e.stringToBuffer("salt"),iterations:1e5,hash:"SHA-256"},c,{name:"AES-CBC",length:256},!1,["encrypt","decrypt"]),f=a.slice(0,16),p=await this.driver.decrypt({name:"AES-CBC",iv:f},u,a.slice(16));return e.concatBuffers([p])}};t.default=r}}),mu=Object.create,di=Object.defineProperty,vu=Object.getOwnPropertyDescriptor,wu=Object.getOwnPropertyNames,_u=Object.getPrototypeOf,bu=Object.prototype.hasOwnProperty,qe=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),Eu=(t,e)=>{for(var r in e)di(t,r,{get:e[r],enumerable:!0})},Au=(t,e,r,a)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of wu(e))!bu.call(t,o)&&o!==r&&di(t,o,{get:()=>e[o],enumerable:!(a=vu(e,o))||a.enumerable});return t},Bt=(t,e,r)=>(r=t!=null?mu(_u(t)):{},Au(e||!t||!t.__esModule?di(r,"default",{value:t,enumerable:!0}):r,t)),Tu=qe(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});function e(r){var a=4,o=r.length,l=o%a;if(!l)return r;var c=o,u=a-l,f=o+u,p=Buffer.alloc(f);for(p.write(r);u--;)p.write("=",c++);return p.toString()}t.default=e}),Su=qe(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var e=Tu();function r(f,p){return p===void 0&&(p="utf8"),Buffer.isBuffer(f)?l(f.toString("base64")):l(Buffer.from(f,p).toString("base64"))}function a(f,p){return p===void 0&&(p="utf8"),Buffer.from(o(f),"base64").toString(p)}function o(f){return f=f.toString(),e.default(f).replace(/\-/g,"+").replace(/_/g,"/")}function l(f){return f.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function c(f){return Buffer.from(o(f),"base64")}var u=r;u.encode=r,u.decode=a,u.toBase64=o,u.fromBase64=l,u.toBuffer=c,t.default=u}),pi=qe((t,e)=>{e.exports=Su().default,e.exports.default=e.exports}),La=qe(t=>{"use strict";t.byteLength=f,t.toByteArray=b,t.fromByteArray=E;var e=[],r=[],a=typeof Uint8Array<"u"?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(l=0,c=o.length;l<c;++l)e[l]=o[l],r[o.charCodeAt(l)]=l;var l,c;r[45]=62,r[95]=63;function u(m){var _=m.length;if(_%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var A=m.indexOf("=");A===-1&&(A=_);var S=A===_?0:4-A%4;return[A,S]}function f(m){var _=u(m),A=_[0],S=_[1];return(A+S)*3/4-S}function p(m,_,A){return(_+A)*3/4-A}function b(m){var _,A=u(m),S=A[0],O=A[1],x=new a(p(m,S,O)),C=0,Z=O>0?S-4:S,L;for(L=0;L<Z;L+=4)_=r[m.charCodeAt(L)]<<18|r[m.charCodeAt(L+1)]<<12|r[m.charCodeAt(L+2)]<<6|r[m.charCodeAt(L+3)],x[C++]=_>>16&255,x[C++]=_>>8&255,x[C++]=_&255;return O===2&&(_=r[m.charCodeAt(L)]<<2|r[m.charCodeAt(L+1)]>>4,x[C++]=_&255),O===1&&(_=r[m.charCodeAt(L)]<<10|r[m.charCodeAt(L+1)]<<4|r[m.charCodeAt(L+2)]>>2,x[C++]=_>>8&255,x[C++]=_&255),x}function w(m){return e[m>>18&63]+e[m>>12&63]+e[m>>6&63]+e[m&63]}function v(m,_,A){for(var S,O=[],x=_;x<A;x+=3)S=(m[x]<<16&16711680)+(m[x+1]<<8&65280)+(m[x+2]&255),O.push(w(S));return O.join("")}function E(m){for(var _,A=m.length,S=A%3,O=[],x=16383,C=0,Z=A-S;C<Z;C+=x)O.push(v(m,C,C+x>Z?Z:C+x));return S===1?(_=m[A-1],O.push(e[_>>2]+e[_<<4&63]+"==")):S===2&&(_=(m[A-2]<<8)+m[A-1],O.push(e[_>>10]+e[_>>4&63]+e[_<<2&63]+"=")),O.join("")}}),$a=qe(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.b64UrlDecode=t.b64UrlEncode=t.bufferTob64Url=t.bufferTob64=t.b64UrlToBuffer=t.stringToB64Url=t.stringToBuffer=t.bufferToString=t.b64UrlToString=t.concatBuffers=void 0;var e=La();function r(v){let E=0;for(let A=0;A<v.length;A++)E+=v[A].byteLength;let m=new Uint8Array(E),_=0;m.set(new Uint8Array(v[0]),_),_+=v[0].byteLength;for(let A=1;A<v.length;A++)m.set(new Uint8Array(v[A]),_),_+=v[A].byteLength;return m}t.concatBuffers=r;function a(v){let E=u(v);return o(E)}t.b64UrlToString=a;function o(v){return new TextDecoder("utf-8",{fatal:!0}).decode(v)}t.bufferToString=o;function l(v){return new TextEncoder().encode(v)}t.stringToBuffer=l;function c(v){return p(l(v))}t.stringToB64Url=c;function u(v){return new Uint8Array(e.toByteArray(w(v)))}t.b64UrlToBuffer=u;function f(v){return e.fromByteArray(new Uint8Array(v))}t.bufferTob64=f;function p(v){return b(f(v))}t.bufferTob64Url=p;function b(v){return v.replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"")}t.b64UrlEncode=b;function w(v){v=v.replace(/\-/g,"+").replace(/\_/g,"/");let E;return v.length%4==0?E=0:E=4-v.length%4,v.concat("=".repeat(E))}t.b64UrlDecode=w}),xu=qe(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var e=$a(),r=class{keyLength=4096;publicExponent=65537;hashAlgorithm="sha256";driver;constructor(){if(!this.detectWebCrypto())throw new Error("SubtleCrypto not available!");this.driver=crypto.subtle}async generateJWK(){let a=await this.driver.generateKey({name:"RSA-PSS",modulusLength:4096,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},!0,["sign"]),o=await this.driver.exportKey("jwk",a.privateKey);return{kty:o.kty,e:o.e,n:o.n,d:o.d,p:o.p,q:o.q,dp:o.dp,dq:o.dq,qi:o.qi}}async sign(a,o,{saltLength:l}={}){let c=await this.driver.sign({name:"RSA-PSS",saltLength:32},await this.jwkToCryptoKey(a),o);return new Uint8Array(c)}async hash(a,o="SHA-256"){let l=await this.driver.digest(o,a);return new Uint8Array(l)}async verify(a,o,l){let c={kty:"RSA",e:"AQAB",n:a},u=await this.jwkToPublicCryptoKey(c),f=await this.driver.digest("SHA-256",o),p=await this.driver.verify({name:"RSA-PSS",saltLength:0},u,l,o),b=await this.driver.verify({name:"RSA-PSS",saltLength:32},u,l,o),w=await this.driver.verify({name:"RSA-PSS",saltLength:Math.ceil((u.algorithm.modulusLength-1)/8)-f.byteLength-2},u,l,o);return p||b||w}async jwkToCryptoKey(a){return this.driver.importKey("jwk",a,{name:"RSA-PSS",hash:{name:"SHA-256"}},!1,["sign"])}async jwkToPublicCryptoKey(a){return this.driver.importKey("jwk",a,{name:"RSA-PSS",hash:{name:"SHA-256"}},!1,["verify"])}detectWebCrypto(){if(typeof crypto>"u")return!1;let a=crypto?.subtle;return a===void 0?!1:["generateKey","importKey","exportKey","digest","sign"].every(o=>typeof a[o]=="function")}async encrypt(a,o,l){let c=await this.driver.importKey("raw",typeof o=="string"?e.stringToBuffer(o):o,{name:"PBKDF2",length:32},!1,["deriveKey"]),u=await this.driver.deriveKey({name:"PBKDF2",salt:l?e.stringToBuffer(l):e.stringToBuffer("salt"),iterations:1e5,hash:"SHA-256"},c,{name:"AES-CBC",length:256},!1,["encrypt","decrypt"]),f=new Uint8Array(16);crypto.getRandomValues(f);let p=await this.driver.encrypt({name:"AES-CBC",iv:f},u,a);return e.concatBuffers([f,p])}async decrypt(a,o,l){let c=await this.driver.importKey("raw",typeof o=="string"?e.stringToBuffer(o):o,{name:"PBKDF2",length:32},!1,["deriveKey"]),u=await this.driver.deriveKey({name:"PBKDF2",salt:l?e.stringToBuffer(l):e.stringToBuffer("salt"),iterations:1e5,hash:"SHA-256"},c,{name:"AES-CBC",length:256},!1,["encrypt","decrypt"]),f=a.slice(0,16),p=await this.driver.decrypt({name:"AES-CBC",iv:f},u,a.slice(16));return e.concatBuffers([p])}};t.default=r}),ku=qe(t=>{t.read=function(e,r,a,o,l){var c,u,f=l*8-o-1,p=(1<<f)-1,b=p>>1,w=-7,v=a?l-1:0,E=a?-1:1,m=e[r+v];for(v+=E,c=m&(1<<-w)-1,m>>=-w,w+=f;w>0;c=c*256+e[r+v],v+=E,w-=8);for(u=c&(1<<-w)-1,c>>=-w,w+=o;w>0;u=u*256+e[r+v],v+=E,w-=8);if(c===0)c=1-b;else{if(c===p)return u?NaN:(m?-1:1)*(1/0);u=u+Math.pow(2,o),c=c-b}return(m?-1:1)*u*Math.pow(2,c-o)},t.write=function(e,r,a,o,l,c){var u,f,p,b=c*8-l-1,w=(1<<b)-1,v=w>>1,E=l===23?Math.pow(2,-24)-Math.pow(2,-77):0,m=o?0:c-1,_=o?1:-1,A=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(f=isNaN(r)?1:0,u=w):(u=Math.floor(Math.log(r)/Math.LN2),r*(p=Math.pow(2,-u))<1&&(u--,p*=2),u+v>=1?r+=E/p:r+=E*Math.pow(2,1-v),r*p>=2&&(u++,p/=2),u+v>=w?(f=0,u=w):u+v>=1?(f=(r*p-1)*Math.pow(2,l),u=u+v):(f=r*Math.pow(2,v-1)*Math.pow(2,l),u=0));l>=8;e[a+m]=f&255,m+=_,f/=256,l-=8);for(u=u<<l|f,b+=l;b>0;e[a+m]=u&255,m+=_,u/=256,b-=8);e[a+m-_]|=A*128}}),gi=qe(t=>{"use strict";var e=La(),r=ku(),a=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=u,t.SlowBuffer=O,t.INSPECT_MAX_BYTES=50;var o=2147483647;t.kMaxLength=o,u.TYPED_ARRAY_SUPPORT=l(),!u.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function l(){try{let n=new Uint8Array(1),i={foo:function(){return 42}};return Object.setPrototypeOf(i,Uint8Array.prototype),Object.setPrototypeOf(n,i),n.foo()===42}catch{return!1}}Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}});function c(n){if(n>o)throw new RangeError('The value "'+n+'" is invalid for option "size"');let i=new Uint8Array(n);return Object.setPrototypeOf(i,u.prototype),i}function u(n,i,s){if(typeof n=="number"){if(typeof i=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return w(n)}return f(n,i,s)}u.poolSize=8192;function f(n,i,s){if(typeof n=="string")return v(n,i);if(ArrayBuffer.isView(n))return m(n);if(n==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof n);if(ne(n,ArrayBuffer)||n&&ne(n.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(ne(n,SharedArrayBuffer)||n&&ne(n.buffer,SharedArrayBuffer)))return _(n,i,s);if(typeof n=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let h=n.valueOf&&n.valueOf();if(h!=null&&h!==n)return u.from(h,i,s);let d=A(n);if(d)return d;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof n[Symbol.toPrimitive]=="function")return u.from(n[Symbol.toPrimitive]("string"),i,s);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof n)}u.from=function(n,i,s){return f(n,i,s)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array);function p(n){if(typeof n!="number")throw new TypeError('"size" argument must be of type number');if(n<0)throw new RangeError('The value "'+n+'" is invalid for option "size"')}function b(n,i,s){return p(n),n<=0?c(n):i!==void 0?typeof s=="string"?c(n).fill(i,s):c(n).fill(i):c(n)}u.alloc=function(n,i,s){return b(n,i,s)};function w(n){return p(n),c(n<0?0:S(n)|0)}u.allocUnsafe=function(n){return w(n)},u.allocUnsafeSlow=function(n){return w(n)};function v(n,i){if((typeof i!="string"||i==="")&&(i="utf8"),!u.isEncoding(i))throw new TypeError("Unknown encoding: "+i);let s=x(n,i)|0,h=c(s),d=h.write(n,i);return d!==s&&(h=h.slice(0,d)),h}function E(n){let i=n.length<0?0:S(n.length)|0,s=c(i);for(let h=0;h<i;h+=1)s[h]=n[h]&255;return s}function m(n){if(ne(n,Uint8Array)){let i=new Uint8Array(n);return _(i.buffer,i.byteOffset,i.byteLength)}return E(n)}function _(n,i,s){if(i<0||n.byteLength<i)throw new RangeError('"offset" is outside of buffer bounds');if(n.byteLength<i+(s||0))throw new RangeError('"length" is outside of buffer bounds');let h;return i===void 0&&s===void 0?h=new Uint8Array(n):s===void 0?h=new Uint8Array(n,i):h=new Uint8Array(n,i,s),Object.setPrototypeOf(h,u.prototype),h}function A(n){if(u.isBuffer(n)){let i=S(n.length)|0,s=c(i);return s.length===0||n.copy(s,0,0,i),s}if(n.length!==void 0)return typeof n.length!="number"||Re(n.length)?c(0):E(n);if(n.type==="Buffer"&&Array.isArray(n.data))return E(n.data)}function S(n){if(n>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return n|0}function O(n){return+n!=n&&(n=0),u.alloc(+n)}u.isBuffer=function(n){return n!=null&&n._isBuffer===!0&&n!==u.prototype},u.compare=function(n,i){if(ne(n,Uint8Array)&&(n=u.from(n,n.offset,n.byteLength)),ne(i,Uint8Array)&&(i=u.from(i,i.offset,i.byteLength)),!u.isBuffer(n)||!u.isBuffer(i))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(n===i)return 0;let s=n.length,h=i.length;for(let d=0,g=Math.min(s,h);d<g;++d)if(n[d]!==i[d]){s=n[d],h=i[d];break}return s<h?-1:h<s?1:0},u.isEncoding=function(n){switch(String(n).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(n,i){if(!Array.isArray(n))throw new TypeError('"list" argument must be an Array of Buffers');if(n.length===0)return u.alloc(0);let s;if(i===void 0)for(i=0,s=0;s<n.length;++s)i+=n[s].length;let h=u.allocUnsafe(i),d=0;for(s=0;s<n.length;++s){let g=n[s];if(ne(g,Uint8Array))d+g.length>h.length?(u.isBuffer(g)||(g=u.from(g)),g.copy(h,d)):Uint8Array.prototype.set.call(h,g,d);else if(u.isBuffer(g))g.copy(h,d);else throw new TypeError('"list" argument must be an Array of Buffers');d+=g.length}return h};function x(n,i){if(u.isBuffer(n))return n.length;if(ArrayBuffer.isView(n)||ne(n,ArrayBuffer))return n.byteLength;if(typeof n!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof n);let s=n.length,h=arguments.length>2&&arguments[2]===!0;if(!h&&s===0)return 0;let d=!1;for(;;)switch(i){case"ascii":case"latin1":case"binary":return s;case"utf8":case"utf-8":return Ce(n).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return s*2;case"hex":return s>>>1;case"base64":return dt(n).length;default:if(d)return h?-1:Ce(n).length;i=(""+i).toLowerCase(),d=!0}}u.byteLength=x;function C(n,i,s){let h=!1;if((i===void 0||i<0)&&(i=0),i>this.length||((s===void 0||s>this.length)&&(s=this.length),s<=0)||(s>>>=0,i>>>=0,s<=i))return"";for(n||(n="utf8");;)switch(n){case"hex":return fr(this,i,s);case"utf8":case"utf-8":return it(this,i,s);case"ascii":return cr(this,i,s);case"latin1":case"binary":return hr(this,i,s);case"base64":return ur(this,i,s);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return dr(this,i,s);default:if(h)throw new TypeError("Unknown encoding: "+n);n=(n+"").toLowerCase(),h=!0}}u.prototype._isBuffer=!0;function Z(n,i,s){let h=n[i];n[i]=n[s],n[s]=h}u.prototype.swap16=function(){let n=this.length;if(n%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let i=0;i<n;i+=2)Z(this,i,i+1);return this},u.prototype.swap32=function(){let n=this.length;if(n%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let i=0;i<n;i+=4)Z(this,i,i+3),Z(this,i+1,i+2);return this},u.prototype.swap64=function(){let n=this.length;if(n%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let i=0;i<n;i+=8)Z(this,i,i+7),Z(this,i+1,i+6),Z(this,i+2,i+5),Z(this,i+3,i+4);return this},u.prototype.toString=function(){let n=this.length;return n===0?"":arguments.length===0?it(this,0,n):C.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(n){if(!u.isBuffer(n))throw new TypeError("Argument must be a Buffer");return this===n?!0:u.compare(this,n)===0},u.prototype.inspect=function(){let n="",i=t.INSPECT_MAX_BYTES;return n=this.toString("hex",0,i).replace(/(.{2})/g,"$1 ").trim(),this.length>i&&(n+=" ... "),"<Buffer "+n+">"},a&&(u.prototype[a]=u.prototype.inspect),u.prototype.compare=function(n,i,s,h,d){if(ne(n,Uint8Array)&&(n=u.from(n,n.offset,n.byteLength)),!u.isBuffer(n))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof n);if(i===void 0&&(i=0),s===void 0&&(s=n?n.length:0),h===void 0&&(h=0),d===void 0&&(d=this.length),i<0||s>n.length||h<0||d>this.length)throw new RangeError("out of range index");if(h>=d&&i>=s)return 0;if(h>=d)return-1;if(i>=s)return 1;if(i>>>=0,s>>>=0,h>>>=0,d>>>=0,this===n)return 0;let g=d-h,y=s-i,B=Math.min(g,y),F=this.slice(h,d),U=n.slice(i,s);for(let R=0;R<B;++R)if(F[R]!==U[R]){g=F[R],y=U[R];break}return g<y?-1:y<g?1:0};function L(n,i,s,h,d){if(n.length===0)return-1;if(typeof s=="string"?(h=s,s=0):s>2147483647?s=2147483647:s<-2147483648&&(s=-2147483648),s=+s,Re(s)&&(s=d?0:n.length-1),s<0&&(s=n.length+s),s>=n.length){if(d)return-1;s=n.length-1}else if(s<0)if(d)s=0;else return-1;if(typeof i=="string"&&(i=u.from(i,h)),u.isBuffer(i))return i.length===0?-1:ce(n,i,s,h,d);if(typeof i=="number")return i=i&255,typeof Uint8Array.prototype.indexOf=="function"?d?Uint8Array.prototype.indexOf.call(n,i,s):Uint8Array.prototype.lastIndexOf.call(n,i,s):ce(n,[i],s,h,d);throw new TypeError("val must be string, number or Buffer")}function ce(n,i,s,h,d){let g=1,y=n.length,B=i.length;if(h!==void 0&&(h=String(h).toLowerCase(),h==="ucs2"||h==="ucs-2"||h==="utf16le"||h==="utf-16le")){if(n.length<2||i.length<2)return-1;g=2,y/=2,B/=2,s/=2}function F(R,P){return g===1?R[P]:R.readUInt16BE(P*g)}let U;if(d){let R=-1;for(U=s;U<y;U++)if(F(n,U)===F(i,R===-1?0:U-R)){if(R===-1&&(R=U),U-R+1===B)return R*g}else R!==-1&&(U-=U-R),R=-1}else for(s+B>y&&(s=y-B),U=s;U>=0;U--){let R=!0;for(let P=0;P<B;P++)if(F(n,U+P)!==F(i,P)){R=!1;break}if(R)return U}return-1}u.prototype.includes=function(n,i,s){return this.indexOf(n,i,s)!==-1},u.prototype.indexOf=function(n,i,s){return L(this,n,i,s,!0)},u.prototype.lastIndexOf=function(n,i,s){return L(this,n,i,s,!1)};function Ie(n,i,s,h){s=Number(s)||0;let d=n.length-s;h?(h=Number(h),h>d&&(h=d)):h=d;let g=i.length;h>g/2&&(h=g/2);let y;for(y=0;y<h;++y){let B=parseInt(i.substr(y*2,2),16);if(Re(B))return y;n[s+y]=B}return y}function Te(n,i,s,h){return we(Ce(i,n.length-s),n,s,h)}function xt(n,i,s,h){return we(mr(i),n,s,h)}function nt(n,i,s,h){return we(dt(i),n,s,h)}function kt(n,i,s,h){return we(vr(i,n.length-s),n,s,h)}u.prototype.write=function(n,i,s,h){if(i===void 0)h="utf8",s=this.length,i=0;else if(s===void 0&&typeof i=="string")h=i,s=this.length,i=0;else if(isFinite(i))i=i>>>0,isFinite(s)?(s=s>>>0,h===void 0&&(h="utf8")):(h=s,s=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let d=this.length-i;if((s===void 0||s>d)&&(s=d),n.length>0&&(s<0||i<0)||i>this.length)throw new RangeError("Attempt to write outside buffer bounds");h||(h="utf8");let g=!1;for(;;)switch(h){case"hex":return Ie(this,n,i,s);case"utf8":case"utf-8":return Te(this,n,i,s);case"ascii":case"latin1":case"binary":return xt(this,n,i,s);case"base64":return nt(this,n,i,s);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return kt(this,n,i,s);default:if(g)throw new TypeError("Unknown encoding: "+h);h=(""+h).toLowerCase(),g=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function ur(n,i,s){return i===0&&s===n.length?e.fromByteArray(n):e.fromByteArray(n.slice(i,s))}function it(n,i,s){s=Math.min(n.length,s);let h=[],d=i;for(;d<s;){let g=n[d],y=null,B=g>239?4:g>223?3:g>191?2:1;if(d+B<=s){let F,U,R,P;switch(B){case 1:g<128&&(y=g);break;case 2:F=n[d+1],(F&192)===128&&(P=(g&31)<<6|F&63,P>127&&(y=P));break;case 3:F=n[d+1],U=n[d+2],(F&192)===128&&(U&192)===128&&(P=(g&15)<<12|(F&63)<<6|U&63,P>2047&&(P<55296||P>57343)&&(y=P));break;case 4:F=n[d+1],U=n[d+2],R=n[d+3],(F&192)===128&&(U&192)===128&&(R&192)===128&&(P=(g&15)<<18|(F&63)<<12|(U&63)<<6|R&63,P>65535&&P<1114112&&(y=P))}}y===null?(y=65533,B=1):y>65535&&(y-=65536,h.push(y>>>10&1023|55296),y=56320|y&1023),h.push(y),d+=B}return lr(h)}var at=4096;function lr(n){let i=n.length;if(i<=at)return String.fromCharCode.apply(String,n);let s="",h=0;for(;h<i;)s+=String.fromCharCode.apply(String,n.slice(h,h+=at));return s}function cr(n,i,s){let h="";s=Math.min(n.length,s);for(let d=i;d<s;++d)h+=String.fromCharCode(n[d]&127);return h}function hr(n,i,s){let h="";s=Math.min(n.length,s);for(let d=i;d<s;++d)h+=String.fromCharCode(n[d]);return h}function fr(n,i,s){let h=n.length;(!i||i<0)&&(i=0),(!s||s<0||s>h)&&(s=h);let d="";for(let g=i;g<s;++g)d+=wr[n[g]];return d}function dr(n,i,s){let h=n.slice(i,s),d="";for(let g=0;g<h.length-1;g+=2)d+=String.fromCharCode(h[g]+h[g+1]*256);return d}u.prototype.slice=function(n,i){let s=this.length;n=~~n,i=i===void 0?s:~~i,n<0?(n+=s,n<0&&(n=0)):n>s&&(n=s),i<0?(i+=s,i<0&&(i=0)):i>s&&(i=s),i<n&&(i=n);let h=this.subarray(n,i);return Object.setPrototypeOf(h,u.prototype),h};function W(n,i,s){if(n%1!==0||n<0)throw new RangeError("offset is not uint");if(n+i>s)throw new RangeError("Trying to access beyond buffer length")}u.prototype.readUintLE=u.prototype.readUIntLE=function(n,i,s){n=n>>>0,i=i>>>0,s||W(n,i,this.length);let h=this[n],d=1,g=0;for(;++g<i&&(d*=256);)h+=this[n+g]*d;return h},u.prototype.readUintBE=u.prototype.readUIntBE=function(n,i,s){n=n>>>0,i=i>>>0,s||W(n,i,this.length);let h=this[n+--i],d=1;for(;i>0&&(d*=256);)h+=this[n+--i]*d;return h},u.prototype.readUint8=u.prototype.readUInt8=function(n,i){return n=n>>>0,i||W(n,1,this.length),this[n]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(n,i){return n=n>>>0,i||W(n,2,this.length),this[n]|this[n+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(n,i){return n=n>>>0,i||W(n,2,this.length),this[n]<<8|this[n+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(n,i){return n=n>>>0,i||W(n,4,this.length),(this[n]|this[n+1]<<8|this[n+2]<<16)+this[n+3]*16777216},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(n,i){return n=n>>>0,i||W(n,4,this.length),this[n]*16777216+(this[n+1]<<16|this[n+2]<<8|this[n+3])},u.prototype.readBigUInt64LE=se(function(n){n=n>>>0,fe(n,"offset");let i=this[n],s=this[n+7];(i===void 0||s===void 0)&&ge(n,this.length-8);let h=i+this[++n]*256+this[++n]*65536+this[++n]*16777216,d=this[++n]+this[++n]*256+this[++n]*65536+s*16777216;return BigInt(h)+(BigInt(d)<<BigInt(32))}),u.prototype.readBigUInt64BE=se(function(n){n=n>>>0,fe(n,"offset");let i=this[n],s=this[n+7];(i===void 0||s===void 0)&&ge(n,this.length-8);let h=i*16777216+this[++n]*65536+this[++n]*256+this[++n],d=this[++n]*16777216+this[++n]*65536+this[++n]*256+s;return(BigInt(h)<<BigInt(32))+BigInt(d)}),u.prototype.readIntLE=function(n,i,s){n=n>>>0,i=i>>>0,s||W(n,i,this.length);let h=this[n],d=1,g=0;for(;++g<i&&(d*=256);)h+=this[n+g]*d;return d*=128,h>=d&&(h-=Math.pow(2,8*i)),h},u.prototype.readIntBE=function(n,i,s){n=n>>>0,i=i>>>0,s||W(n,i,this.length);let h=i,d=1,g=this[n+--h];for(;h>0&&(d*=256);)g+=this[n+--h]*d;return d*=128,g>=d&&(g-=Math.pow(2,8*i)),g},u.prototype.readInt8=function(n,i){return n=n>>>0,i||W(n,1,this.length),this[n]&128?(255-this[n]+1)*-1:this[n]},u.prototype.readInt16LE=function(n,i){n=n>>>0,i||W(n,2,this.length);let s=this[n]|this[n+1]<<8;return s&32768?s|4294901760:s},u.prototype.readInt16BE=function(n,i){n=n>>>0,i||W(n,2,this.length);let s=this[n+1]|this[n]<<8;return s&32768?s|4294901760:s},u.prototype.readInt32LE=function(n,i){return n=n>>>0,i||W(n,4,this.length),this[n]|this[n+1]<<8|this[n+2]<<16|this[n+3]<<24},u.prototype.readInt32BE=function(n,i){return n=n>>>0,i||W(n,4,this.length),this[n]<<24|this[n+1]<<16|this[n+2]<<8|this[n+3]},u.prototype.readBigInt64LE=se(function(n){n=n>>>0,fe(n,"offset");let i=this[n],s=this[n+7];(i===void 0||s===void 0)&&ge(n,this.length-8);let h=this[n+4]+this[n+5]*256+this[n+6]*65536+(s<<24);return(BigInt(h)<<BigInt(32))+BigInt(i+this[++n]*256+this[++n]*65536+this[++n]*16777216)}),u.prototype.readBigInt64BE=se(function(n){n=n>>>0,fe(n,"offset");let i=this[n],s=this[n+7];(i===void 0||s===void 0)&&ge(n,this.length-8);let h=(i<<24)+this[++n]*65536+this[++n]*256+this[++n];return(BigInt(h)<<BigInt(32))+BigInt(this[++n]*16777216+this[++n]*65536+this[++n]*256+s)}),u.prototype.readFloatLE=function(n,i){return n=n>>>0,i||W(n,4,this.length),r.read(this,n,!0,23,4)},u.prototype.readFloatBE=function(n,i){return n=n>>>0,i||W(n,4,this.length),r.read(this,n,!1,23,4)},u.prototype.readDoubleLE=function(n,i){return n=n>>>0,i||W(n,8,this.length),r.read(this,n,!0,52,8)},u.prototype.readDoubleBE=function(n,i){return n=n>>>0,i||W(n,8,this.length),r.read(this,n,!1,52,8)};function H(n,i,s,h,d,g){if(!u.isBuffer(n))throw new TypeError('"buffer" argument must be a Buffer instance');if(i>d||i<g)throw new RangeError('"value" argument is out of bounds');if(s+h>n.length)throw new RangeError("Index out of range")}u.prototype.writeUintLE=u.prototype.writeUIntLE=function(n,i,s,h){if(n=+n,i=i>>>0,s=s>>>0,!h){let y=Math.pow(2,8*s)-1;H(this,n,i,s,y,0)}let d=1,g=0;for(this[i]=n&255;++g<s&&(d*=256);)this[i+g]=n/d&255;return i+s},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(n,i,s,h){if(n=+n,i=i>>>0,s=s>>>0,!h){let y=Math.pow(2,8*s)-1;H(this,n,i,s,y,0)}let d=s-1,g=1;for(this[i+d]=n&255;--d>=0&&(g*=256);)this[i+d]=n/g&255;return i+s},u.prototype.writeUint8=u.prototype.writeUInt8=function(n,i,s){return n=+n,i=i>>>0,s||H(this,n,i,1,255,0),this[i]=n&255,i+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(n,i,s){return n=+n,i=i>>>0,s||H(this,n,i,2,65535,0),this[i]=n&255,this[i+1]=n>>>8,i+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(n,i,s){return n=+n,i=i>>>0,s||H(this,n,i,2,65535,0),this[i]=n>>>8,this[i+1]=n&255,i+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(n,i,s){return n=+n,i=i>>>0,s||H(this,n,i,4,4294967295,0),this[i+3]=n>>>24,this[i+2]=n>>>16,this[i+1]=n>>>8,this[i]=n&255,i+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(n,i,s){return n=+n,i=i>>>0,s||H(this,n,i,4,4294967295,0),this[i]=n>>>24,this[i+1]=n>>>16,this[i+2]=n>>>8,this[i+3]=n&255,i+4};function st(n,i,s,h,d){ft(i,h,d,n,s,7);let g=Number(i&BigInt(4294967295));n[s++]=g,g=g>>8,n[s++]=g,g=g>>8,n[s++]=g,g=g>>8,n[s++]=g;let y=Number(i>>BigInt(32)&BigInt(4294967295));return n[s++]=y,y=y>>8,n[s++]=y,y=y>>8,n[s++]=y,y=y>>8,n[s++]=y,s}function ot(n,i,s,h,d){ft(i,h,d,n,s,7);let g=Number(i&BigInt(4294967295));n[s+7]=g,g=g>>8,n[s+6]=g,g=g>>8,n[s+5]=g,g=g>>8,n[s+4]=g;let y=Number(i>>BigInt(32)&BigInt(4294967295));return n[s+3]=y,y=y>>8,n[s+2]=y,y=y>>8,n[s+1]=y,y=y>>8,n[s]=y,s+8}u.prototype.writeBigUInt64LE=se(function(n,i=0){return st(this,n,i,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeBigUInt64BE=se(function(n,i=0){return ot(this,n,i,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeIntLE=function(n,i,s,h){if(n=+n,i=i>>>0,!h){let B=Math.pow(2,8*s-1);H(this,n,i,s,B-1,-B)}let d=0,g=1,y=0;for(this[i]=n&255;++d<s&&(g*=256);)n<0&&y===0&&this[i+d-1]!==0&&(y=1),this[i+d]=(n/g>>0)-y&255;return i+s},u.prototype.writeIntBE=function(n,i,s,h){if(n=+n,i=i>>>0,!h){let B=Math.pow(2,8*s-1);H(this,n,i,s,B-1,-B)}let d=s-1,g=1,y=0;for(this[i+d]=n&255;--d>=0&&(g*=256);)n<0&&y===0&&this[i+d+1]!==0&&(y=1),this[i+d]=(n/g>>0)-y&255;return i+s},u.prototype.writeInt8=function(n,i,s){return n=+n,i=i>>>0,s||H(this,n,i,1,127,-128),n<0&&(n=255+n+1),this[i]=n&255,i+1},u.prototype.writeInt16LE=function(n,i,s){return n=+n,i=i>>>0,s||H(this,n,i,2,32767,-32768),this[i]=n&255,this[i+1]=n>>>8,i+2},u.prototype.writeInt16BE=function(n,i,s){return n=+n,i=i>>>0,s||H(this,n,i,2,32767,-32768),this[i]=n>>>8,this[i+1]=n&255,i+2},u.prototype.writeInt32LE=function(n,i,s){return n=+n,i=i>>>0,s||H(this,n,i,4,2147483647,-2147483648),this[i]=n&255,this[i+1]=n>>>8,this[i+2]=n>>>16,this[i+3]=n>>>24,i+4},u.prototype.writeInt32BE=function(n,i,s){return n=+n,i=i>>>0,s||H(this,n,i,4,2147483647,-2147483648),n<0&&(n=4294967295+n+1),this[i]=n>>>24,this[i+1]=n>>>16,this[i+2]=n>>>8,this[i+3]=n&255,i+4},u.prototype.writeBigInt64LE=se(function(n,i=0){return st(this,n,i,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),u.prototype.writeBigInt64BE=se(function(n,i=0){return ot(this,n,i,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function ut(n,i,s,h,d,g){if(s+h>n.length)throw new RangeError("Index out of range");if(s<0)throw new RangeError("Index out of range")}function lt(n,i,s,h,d){return i=+i,s=s>>>0,d||ut(n,i,s,4,34028234663852886e22,-34028234663852886e22),r.write(n,i,s,h,23,4),s+4}u.prototype.writeFloatLE=function(n,i,s){return lt(this,n,i,!0,s)},u.prototype.writeFloatBE=function(n,i,s){return lt(this,n,i,!1,s)};function ct(n,i,s,h,d){return i=+i,s=s>>>0,d||ut(n,i,s,8,17976931348623157e292,-17976931348623157e292),r.write(n,i,s,h,52,8),s+8}u.prototype.writeDoubleLE=function(n,i,s){return ct(this,n,i,!0,s)},u.prototype.writeDoubleBE=function(n,i,s){return ct(this,n,i,!1,s)},u.prototype.copy=function(n,i,s,h){if(!u.isBuffer(n))throw new TypeError("argument should be a Buffer");if(s||(s=0),!h&&h!==0&&(h=this.length),i>=n.length&&(i=n.length),i||(i=0),h>0&&h<s&&(h=s),h===s||n.length===0||this.length===0)return 0;if(i<0)throw new RangeError("targetStart out of bounds");if(s<0||s>=this.length)throw new RangeError("Index out of range");if(h<0)throw new RangeError("sourceEnd out of bounds");h>this.length&&(h=this.length),n.length-i<h-s&&(h=n.length-i+s);let d=h-s;return this===n&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(i,s,h):Uint8Array.prototype.set.call(n,this.subarray(s,h),i),d},u.prototype.fill=function(n,i,s,h){if(typeof n=="string"){if(typeof i=="string"?(h=i,i=0,s=this.length):typeof s=="string"&&(h=s,s=this.length),h!==void 0&&typeof h!="string")throw new TypeError("encoding must be a string");if(typeof h=="string"&&!u.isEncoding(h))throw new TypeError("Unknown encoding: "+h);if(n.length===1){let g=n.charCodeAt(0);(h==="utf8"&&g<128||h==="latin1")&&(n=g)}}else typeof n=="number"?n=n&255:typeof n=="boolean"&&(n=Number(n));if(i<0||this.length<i||this.length<s)throw new RangeError("Out of range index");if(s<=i)return this;i=i>>>0,s=s===void 0?this.length:s>>>0,n||(n=0);let d;if(typeof n=="number")for(d=i;d<s;++d)this[d]=n;else{let g=u.isBuffer(n)?n:u.from(n,h),y=g.length;if(y===0)throw new TypeError('The value "'+n+'" is invalid for argument "value"');for(d=0;d<s-i;++d)this[d+i]=g[d%y]}return this};var he={};function Oe(n,i,s){he[n]=class extends s{constructor(){super(),Object.defineProperty(this,"message",{value:i.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${n}]`,this.stack,delete this.name}get code(){return n}set code(h){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:h,writable:!0})}toString(){return`${this.name} [${n}]: ${this.message}`}}}Oe("ERR_BUFFER_OUT_OF_BOUNDS",function(n){return n?`${n} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Oe("ERR_INVALID_ARG_TYPE",function(n,i){return`The "${n}" argument must be of type number. Received type ${typeof i}`},TypeError),Oe("ERR_OUT_OF_RANGE",function(n,i,s){let h=`The value of "${n}" is out of range.`,d=s;return Number.isInteger(s)&&Math.abs(s)>4294967296?d=ht(String(s)):typeof s=="bigint"&&(d=String(s),(s>BigInt(2)**BigInt(32)||s<-(BigInt(2)**BigInt(32)))&&(d=ht(d)),d+="n"),h+=` It must be ${i}. Received ${d}`,h},RangeError);function ht(n){let i="",s=n.length,h=n[0]==="-"?1:0;for(;s>=h+4;s-=3)i=`_${n.slice(s-3,s)}${i}`;return`${n.slice(0,s)}${i}`}function pr(n,i,s){fe(i,"offset"),(n[i]===void 0||n[i+s]===void 0)&&ge(i,n.length-(s+1))}function ft(n,i,s,h,d,g){if(n>s||n<i){let y=typeof i=="bigint"?"n":"",B;throw g>3?i===0||i===BigInt(0)?B=`>= 0${y} and < 2${y} ** ${(g+1)*8}${y}`:B=`>= -(2${y} ** ${(g+1)*8-1}${y}) and < 2 ** ${(g+1)*8-1}${y}`:B=`>= ${i}${y} and <= ${s}${y}`,new he.ERR_OUT_OF_RANGE("value",B,n)}pr(h,d,g)}function fe(n,i){if(typeof n!="number")throw new he.ERR_INVALID_ARG_TYPE(i,"number",n)}function ge(n,i,s){throw Math.floor(n)!==n?(fe(n,s),new he.ERR_OUT_OF_RANGE(s||"offset","an integer",n)):i<0?new he.ERR_BUFFER_OUT_OF_BOUNDS:new he.ERR_OUT_OF_RANGE(s||"offset",`>= ${s?1:0} and <= ${i}`,n)}var gr=/[^+/0-9A-Za-z-_]/g;function yr(n){if(n=n.split("=")[0],n=n.trim().replace(gr,""),n.length<2)return"";for(;n.length%4!==0;)n=n+"=";return n}function Ce(n,i){i=i||1/0;let s,h=n.length,d=null,g=[];for(let y=0;y<h;++y){if(s=n.charCodeAt(y),s>55295&&s<57344){if(!d){if(s>56319){(i-=3)>-1&&g.push(239,191,189);continue}else if(y+1===h){(i-=3)>-1&&g.push(239,191,189);continue}d=s;continue}if(s<56320){(i-=3)>-1&&g.push(239,191,189),d=s;continue}s=(d-55296<<10|s-56320)+65536}else d&&(i-=3)>-1&&g.push(239,191,189);if(d=null,s<128){if((i-=1)<0)break;g.push(s)}else if(s<2048){if((i-=2)<0)break;g.push(s>>6|192,s&63|128)}else if(s<65536){if((i-=3)<0)break;g.push(s>>12|224,s>>6&63|128,s&63|128)}else if(s<1114112){if((i-=4)<0)break;g.push(s>>18|240,s>>12&63|128,s>>6&63|128,s&63|128)}else throw new Error("Invalid code point")}return g}function mr(n){let i=[];for(let s=0;s<n.length;++s)i.push(n.charCodeAt(s)&255);return i}function vr(n,i){let s,h,d,g=[];for(let y=0;y<n.length&&!((i-=2)<0);++y)s=n.charCodeAt(y),h=s>>8,d=s%256,g.push(d),g.push(h);return g}function dt(n){return e.toByteArray(yr(n))}function we(n,i,s,h){let d;for(d=0;d<h&&!(d+s>=i.length||d>=n.length);++d)i[d+s]=n[d];return d}function ne(n,i){return n instanceof i||n!=null&&n.constructor!=null&&n.constructor.name!=null&&n.constructor.name===i.name}function Re(n){return n!==n}var wr=function(){let n="0123456789abcdef",i=new Array(256);for(let s=0;s<16;++s){let h=s*16;for(let d=0;d<16;++d)i[h+d]=n[s]+n[d]}return i}();function se(n){return typeof BigInt>"u"?_r:n}function _r(){throw new Error("BigInt not supported")}}),Bu=qe((t,e)=>{typeof window<"u"?(window.global=window,global.fetch=window.fetch,e.exports={Buffer:gi().Buffer,Crypto:window.crypto}):e.exports={Buffer:gi().Buffer,Crypto:crypto}}),ja={};Eu(ja,{AVSCTap:()=>En,ArweaveSigner:()=>mi,DataItem:()=>An,MAX_TAG_BYTES:()=>_i,MIN_BINARY_SIZE:()=>Da,SIG_CONFIG:()=>br,SignatureConfig:()=>Le,Signer:()=>Iu,createData:()=>za,deserializeTags:()=>wi,indexToType:()=>Ma,serializeTags:()=>Za,tagsExceedLimit:()=>ju});var Iu=class{signer;publicKey;signatureType;signatureLength;ownerLength;pem;static verify(t,e,r,a){throw new Error("You must implement verify method on child")}},Ou=Bt(pi(),1),Ue=Bt($a(),1);async function Pa(t){if(Array.isArray(t)){let o=(0,Ue.concatBuffers)([(0,Ue.stringToBuffer)("list"),(0,Ue.stringToBuffer)(t.length.toString())]);return await Na(t,await He().hash(o,"SHA-384"))}let e=t,r=(0,Ue.concatBuffers)([(0,Ue.stringToBuffer)("blob"),(0,Ue.stringToBuffer)(e.byteLength.toString())]),a=(0,Ue.concatBuffers)([await He().hash(r,"SHA-384"),await He().hash(e,"SHA-384")]);return await He().hash(a,"SHA-384")}async function Na(t,e){if(t.length<1)return e;let r=(0,Ue.concatBuffers)([e,await Pa(t[0])]),a=await He().hash(r,"SHA-384");return await Na(t.slice(1),a)}var yi=Bt(xu(),1),Cu=yi.default.default?yi.default.default:yi.default,Ru=class extends Cu{getPublicKey(t){throw new Error("Unimplemented")}},Uu;function He(){return Uu??=new Ru}var Le;(function(t){t[t.ARWEAVE=1]="ARWEAVE",t[t.ED25519=2]="ED25519",t[t.ETHEREUM=3]="ETHEREUM",t[t.SOLANA=4]="SOLANA",t[t.INJECTEDAPTOS=5]="INJECTEDAPTOS",t[t.MULTIAPTOS=6]="MULTIAPTOS",t[t.TYPEDETHEREUM=7]="TYPEDETHEREUM"})(Le||(Le={}));var br={[Le.ARWEAVE]:{sigLength:512,pubLength:512,sigName:"arweave"},[Le.ED25519]:{sigLength:64,pubLength:32,sigName:"ed25519"},[Le.ETHEREUM]:{sigLength:65,pubLength:65,sigName:"ethereum"},[Le.SOLANA]:{sigLength:64,pubLength:32,sigName:"solana"},[Le.INJECTEDAPTOS]:{sigLength:64,pubLength:32,sigName:"injectedAptos"},[Le.MULTIAPTOS]:{sigLength:2052,pubLength:1025,sigName:"multiAptos"},[Le.TYPEDETHEREUM]:{sigLength:65,pubLength:42,sigName:"typedEthereum"}},mi=class{signatureType=1;ownerLength=br[1].pubLength;signatureLength=br[1].sigLength;jwk;pk;constructor(t){this.pk=t.n,this.jwk=t}get publicKey(){return Ou.default.toBuffer(this.pk)}sign(t){return He().sign(this.jwk,t)}static async verify(t,e,r){return await He().verify(t,e,r)}},Ma={1:mi},Fe=Bt(pi(),1);async function vi(t){return Pa([(0,Ue.stringToBuffer)("dataitem"),(0,Ue.stringToBuffer)("1"),(0,Ue.stringToBuffer)(t.signatureType.toString()),t.rawOwner,t.rawTarget,t.rawAnchor,t.rawTags,t.rawData])}async function Lu(t,e){let r=await vi(t),a=await e.sign(r),o=await He().hash(a);return{signature:Buffer.from(a),id:Buffer.from(o)}}async function $u(t,e){let{signature:r,id:a}=await Lu(t,e);return t.getRaw().set(r,2),a}var En=class{buf;pos;constructor(t=Buffer.alloc(_i),e=0){this.buf=t,this.pos=e}writeTags(t){if(!Array.isArray(t))throw new Error("input must be array");let e=t.length,r;if(e)for(this.writeLong(e),r=0;r<e;r++){let a=t[r];if(a?.name===void 0||a?.value===void 0)throw new Error(`Invalid tag format for ${a}, expected {name:string, value: string}`);this.writeString(a.name),this.writeString(a.value)}this.writeLong(0)}toBuffer(){let t=Buffer.alloc(this.pos);if(this.pos>this.buf.length)throw new Error(`Too many tag bytes (${this.pos} > ${this.buf.length})`);return this.buf.copy(t,0,0,this.pos),t}tagsExceedLimit(){return this.pos>this.buf.length}writeLong(t){let e=this.buf,r,a;if(t>=-1073741824&&t<1073741824){a=t>=0?t<<1:~t<<1|1;do e[this.pos]=a&127,a>>=7;while(a&&(e[this.pos++]|=128))}else{r=t>=0?t*2:-t*2-1;do e[this.pos]=r&127,r/=128;while(r>=1&&(e[this.pos++]|=128))}this.pos++,this.buf=e}writeString(t){let e=Buffer.byteLength(t),r=this.buf;this.writeLong(e);let a=this.pos;if(this.pos+=e,!(this.pos>r.length)){if(e>64)this.buf.write(t,this.pos-e,e,"utf8");else{let o,l,c,u;for(o=0,l=e;o<l;o++)c=t.charCodeAt(o),c<128?r[a++]=c:c<2048?(r[a++]=c>>6|192,r[a++]=c&63|128):(c&64512)===55296&&((u=t.charCodeAt(o+1))&64512)===56320?(c=65536+((c&1023)<<10)+(u&1023),o++,r[a++]=c>>18|240,r[a++]=c>>12&63|128,r[a++]=c>>6&63|128,r[a++]=c&63|128):(r[a++]=c>>12|224,r[a++]=c>>6&63|128,r[a++]=c&63|128)}this.buf=r}}readLong(){let t=0,e=0,r=this.buf,a,o,l,c;do a=r[this.pos++],o=a&128,t|=(a&127)<<e,e+=7;while(o&&e<28);if(o){l=t,c=268435456;do a=r[this.pos++],l+=(a&127)*c,c*=128;while(a&128);return(l%2?-(l+1):l)/2}return t>>1^-(t&1)}skipLong(){let t=this.buf;for(;t[this.pos++]&128;);}readTags(){let t=[],e;for(;e=this.readLong();)for(e<0&&(e=-e,this.skipLong());e--;){let r=this.readString(),a=this.readString();t.push({name:r,value:a})}return t}readString(){let t=this.readLong(),e=this.pos,r=this.buf;if(this.pos+=t,!(this.pos>r.length))return this.buf.slice(e,e+t).toString()}};function Za(t){let e=new En;return e.writeTags(t),e.toBuffer()}function ju(t){let e=new En;return e.writeTags(t),e.tagsExceedLimit()}function wi(t){return new En(t).readTags()}function pt(t){let e=0;for(let r=t.length-1;r>=0;r--)e=e*256+t[r];return e}function Pu(t){if(t>29)throw new Error("Short too long");let e=[0,0];for(let r=0;r<e.length;r++){let a=t&255;e[r]=a,t=(t-a)/256}return Uint8Array.from(e)}function Fa(t){let e=[0,0,0,0,0,0,0,0];for(let r=0;r<e.length;r++){let a=t&255;e[r]=a,t=(t-a)/256}return Uint8Array.from(e)}var Nu=Bt(Bu(),1),Zt=Bt(gi(),1),_i=4096,Da=80,An=class{binary;_id;constructor(t){this.binary=t}static isDataItem(t){return t.binary!==void 0}get signatureType(){let t=pt(this.binary.subarray(0,2));if(Le?.[t]!==void 0)return t;throw new Error("Unknown signature type: "+t)}async isValid(){return An.verify(this.binary)}get id(){return(async()=>Fe.default.encode(await this.rawId))()}set id(t){this._id=Fe.default.toBuffer(t)}get rawId(){return(async()=>Zt.Buffer.from(await Nu.Crypto.subtle.digest("SHA-256",this.rawSignature)))()}set rawId(t){this._id=t}get rawSignature(){return this.binary.subarray(2,2+this.signatureLength)}get signature(){return Fe.default.encode(this.rawSignature)}set rawOwner(t){if(t.byteLength!=this.ownerLength)throw new Error(`Expected raw owner (pubkey) to be ${this.ownerLength} bytes, got ${t.byteLength} bytes.`);this.binary.set(t,2+this.signatureLength)}get rawOwner(){return this.binary.subarray(2+this.signatureLength,2+this.signatureLength+this.ownerLength)}get signatureLength(){return br[this.signatureType].sigLength}get owner(){return Fe.default.encode(this.rawOwner)}get ownerLength(){return br[this.signatureType].pubLength}get rawTarget(){let t=this.getTargetStart();return this.binary[t]==1?this.binary.subarray(t+1,t+33):Zt.Buffer.alloc(0)}get target(){return Fe.default.encode(this.rawTarget)}get rawAnchor(){let t=this.getAnchorStart();return this.binary[t]==1?this.binary.subarray(t+1,t+33):Zt.Buffer.alloc(0)}get anchor(){return this.rawAnchor.toString()}get rawTags(){let t=this.getTagsStart(),e=pt(this.binary.subarray(t+8,t+16));return this.binary.subarray(t+16,t+16+e)}get tags(){let t=this.getTagsStart();if(pt(this.binary.subarray(t,t+8))==0)return[];let e=pt(this.binary.subarray(t+8,t+16));return wi(Zt.Buffer.from(this.binary.subarray(t+16,t+16+e)))}get tagsB64Url(){return this.tags.map(t=>({name:Fe.default.encode(t.name),value:Fe.default.encode(t.value)}))}getStartOfData(){let t=this.getTagsStart(),e=this.binary.subarray(t+8,t+16),r=pt(e);return t+16+r}get rawData(){let t=this.getTagsStart(),e=this.binary.subarray(t+8,t+16),r=pt(e),a=t+16+r;return this.binary.subarray(a,this.binary.length)}get data(){return Fe.default.encode(this.rawData)}getRaw(){return this.binary}async sign(t){return this._id=await $u(this,t),this.rawId}async setSignature(t){this.binary.set(t,2),this._id=Zt.Buffer.from(await He().hash(t))}isSigned(){return(this._id?.length??0)>0}toJSON(){return{signature:this.signature,owner:this.owner,target:this.target,tags:this.tags.map(t=>({name:Fe.default.encode(t.name),value:Fe.default.encode(t.value)})),data:this.data}}static async verify(t){if(t.byteLength<Da)return!1;let e=new An(t),r=e.signatureType,a=e.getTagsStart(),o=pt(t.subarray(a,a+8)),l=t.subarray(a+8,a+16),c=pt(l);if(c>_i)return!1;if(o>0)try{if(wi(Zt.Buffer.from(t.subarray(a+16,a+16+c))).length!==o)return!1}catch{return!1}let u=Ma[r],f=await vi(e);return await u.verify(e.rawOwner,f,e.rawSignature)}async getSignatureData(){return vi(this)}getTagsStart(){let t=this.getTargetStart(),e=this.binary[t]==1,r=t+(e?33:1),a=this.binary[r]==1;return r+=a?33:1,r}getTargetStart(){return 2+this.signatureLength+this.ownerLength}getAnchorStart(){let t=this.getTargetStart()+1,e=this.binary[this.getTargetStart()]==1;return t+=e?32:0,t}},Mu=Bt(pi(),1);function za(t,e,r){let a=e.publicKey,o=r?.target?Mu.default.toBuffer(r.target):null,l=1+(o?.byteLength??0),c=r?.anchor?Buffer.from(r.anchor):null,u=1+(c?.byteLength??0),f=(r?.tags?.length??0)>0?Za(r.tags):null,p=16+(f?f.byteLength:0),b=Buffer.from(t),w=b.byteLength,v=2+e.signatureLength+e.ownerLength+l+u+p+w,E=Buffer.alloc(v);if(E.set(Pu(e.signatureType),0),E.set(new Uint8Array(e.signatureLength).fill(0),2),a.byteLength!==e.ownerLength)throw new Error(`Owner must be ${e.ownerLength} bytes, but was incorrectly ${a.byteLength}`);E.set(a,2+e.signatureLength);let m=2+e.signatureLength+e.ownerLength;if(E[m]=o?1:0,o){if(o.byteLength!==32)throw new Error(`Target must be 32 bytes but was incorrectly ${o.byteLength}`);E.set(o,m+1)}let _=m+l,A=_+1;if(E[_]=c?1:0,c){if(A+=c.byteLength,c.byteLength!==32)throw new Error("Anchor must be 32 bytes");E.set(c,_+1)}E.set(Fa(r?.tags?.length??0),A);let S=Fa(f?.byteLength??0);E.set(S,A+8),f&&E.set(f,A+16);let O=A+p;return E.set(b,O),new An(E)}var Zu={...ja};globalThis.arbundles??=Zu;/*! Bundled license information:

ieee754/index.js:
(*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)

buffer/index.js:
(*!
* The buffer module from node.js, for the browser.
*
* @author   Feross Aboukhadijeh <https://feross.org>
* @license  MIT
*)
*/var Fu=Object.create,bi=Object.defineProperty,Du=Object.getOwnPropertyDescriptor,Wa=Object.getOwnPropertyNames,zu=Object.getPrototypeOf,Wu=Object.prototype.hasOwnProperty,Ae=(t,e)=>function(){return e||(0,t[Wa(t)[0]])((e={exports:{}}).exports,e),e.exports},Va=(t,e)=>{for(var r in e)bi(t,r,{get:e[r],enumerable:!0})},Vu=(t,e,r,a)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of Wa(e))!Wu.call(t,o)&&o!==r&&bi(t,o,{get:()=>e[o],enumerable:!(a=Du(e,o))||a.enumerable});return t},Ei=(t,e,r)=>(r=t!=null?Fu(zu(t)):{},Vu(e||!t||!t.__esModule?bi(r,"default",{value:t,enumerable:!0}):r,t)),Gu=Ae({"node_modules/obliterator/iterator.js"(t,e){function r(a){if(typeof a!="function")throw new Error("obliterator/iterator: expecting a function!");this.next=a}typeof Symbol<"u"&&(r.prototype[Symbol.iterator]=function(){return this}),r.of=function(){var a=arguments,o=a.length,l=0;return new r(function(){return l>=o?{done:!0}:{done:!1,value:a[l++]}})},r.empty=function(){var a=new r(function(){return{done:!0}});return a},r.fromSequence=function(a){var o=0,l=a.length;return new r(function(){return o>=l?{done:!0}:{done:!1,value:a[o++]}})},r.is=function(a){return a instanceof r?!0:typeof a=="object"&&a!==null&&typeof a.next=="function"},e.exports=r}}),Ku=Ae({"node_modules/obliterator/support.js"(t){t.ARRAY_BUFFER_SUPPORT=typeof ArrayBuffer<"u",t.SYMBOL_SUPPORT=typeof Symbol<"u"}}),Ai=Ae({"node_modules/obliterator/foreach.js"(t,e){var r=Ku(),a=r.ARRAY_BUFFER_SUPPORT,o=r.SYMBOL_SUPPORT;e.exports=function(c,u){var f,p,b,w,v;if(!c)throw new Error("obliterator/forEach: invalid iterable.");if(typeof u!="function")throw new Error("obliterator/forEach: expecting a callback.");if(Array.isArray(c)||a&&ArrayBuffer.isView(c)||typeof c=="string"||c.toString()==="[object Arguments]"){for(b=0,w=c.length;b<w;b++)u(c[b],b);return}if(typeof c.forEach=="function"){c.forEach(u);return}if(o&&Symbol.iterator in c&&typeof c.next!="function"&&(c=c[Symbol.iterator]()),typeof c.next=="function"){for(f=c,b=0;v=f.next(),v.done!==!0;)u(v.value,b),b++;return}for(p in c)c.hasOwnProperty(p)&&u(c[p],p)}}}),Ti=Ae({"node_modules/mnemonist/utils/typed-arrays.js"(t){var e=Math.pow(2,8)-1,r=Math.pow(2,16)-1,a=Math.pow(2,32)-1,o=Math.pow(2,7)-1,l=Math.pow(2,15)-1,c=Math.pow(2,31)-1;t.getPointerArray=function(f){var p=f-1;if(p<=e)return Uint8Array;if(p<=r)return Uint16Array;if(p<=a)return Uint32Array;throw new Error("mnemonist: Pointer Array of size > 4294967295 is not supported.")},t.getSignedPointerArray=function(f){var p=f-1;return p<=o?Int8Array:p<=l?Int16Array:p<=c?Int32Array:Float64Array},t.getNumberType=function(f){return f===(f|0)?Math.sign(f)===-1?f<=127&&f>=-128?Int8Array:f<=32767&&f>=-32768?Int16Array:Int32Array:f<=255?Uint8Array:f<=65535?Uint16Array:Uint32Array:Float64Array};var u={Uint8Array:1,Int8Array:2,Uint16Array:3,Int16Array:4,Uint32Array:5,Int32Array:6,Float32Array:7,Float64Array:8};t.getMinimalRepresentation=function(f,p){var b=null,w=0,v,E,m,_,A;for(_=0,A=f.length;_<A;_++)m=p?p(f[_]):f[_],E=t.getNumberType(m),v=u[E.name],v>w&&(w=v,b=E);return b},t.isTypedArray=function(f){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView(f)},t.concat=function(){var f=0,p,b,w;for(p=0,w=arguments.length;p<w;p++)f+=arguments[p].length;var v=new arguments[0].constructor(f);for(p=0,b=0;p<w;p++)v.set(arguments[p],b),b+=arguments[p].length;return v},t.indices=function(f){for(var p=t.getPointerArray(f),b=new p(f),w=0;w<f;w++)b[w]=w;return b}}}),Ga=Ae({"node_modules/mnemonist/utils/iterables.js"(t){var e=Ai(),r=Ti();function a(u){return Array.isArray(u)||r.isTypedArray(u)}function o(u){if(typeof u.length=="number")return u.length;if(typeof u.size=="number")return u.size}function l(u){var f=o(u),p=typeof f=="number"?new Array(f):[],b=0;return e(u,function(w){p[b++]=w}),p}function c(u){var f=o(u),p=typeof f=="number"?r.getPointerArray(f):Array,b=typeof f=="number"?new Array(f):[],w=typeof f=="number"?new p(f):[],v=0;return e(u,function(E){b[v]=E,w[v]=v++}),[b,w]}t.isArrayLike=a,t.guessLength=o,t.toArray=l,t.toArrayWithIndices=c}}),qu=Ae({"node_modules/mnemonist/lru-cache.js"(t,e){var r=Gu(),a=Ai(),o=Ti(),l=Ga();function c(u,f,p){if(arguments.length<2&&(p=u,u=null,f=null),this.capacity=p,typeof this.capacity!="number"||this.capacity<=0)throw new Error("mnemonist/lru-cache: capacity should be positive number.");if(!isFinite(this.capacity)||Math.floor(this.capacity)!==this.capacity)throw new Error("mnemonist/lru-cache: capacity should be a finite positive integer.");var b=o.getPointerArray(p);this.forward=new b(p),this.backward=new b(p),this.K=typeof u=="function"?new u(p):new Array(p),this.V=typeof f=="function"?new f(p):new Array(p),this.size=0,this.head=0,this.tail=0,this.items={}}c.prototype.clear=function(){this.size=0,this.head=0,this.tail=0,this.items={}},c.prototype.splayOnTop=function(u){var f=this.head;if(this.head===u)return this;var p=this.backward[u],b=this.forward[u];return this.tail===u?this.tail=p:this.backward[b]=p,this.forward[p]=b,this.backward[f]=u,this.head=u,this.forward[u]=f,this},c.prototype.set=function(u,f){var p=this.items[u];if(typeof p<"u"){this.splayOnTop(p),this.V[p]=f;return}this.size<this.capacity?p=this.size++:(p=this.tail,this.tail=this.backward[p],delete this.items[this.K[p]]),this.items[u]=p,this.K[p]=u,this.V[p]=f,this.forward[p]=this.head,this.backward[this.head]=p,this.head=p},c.prototype.setpop=function(u,f){var p=null,b=null,w=this.items[u];return typeof w<"u"?(this.splayOnTop(w),p=this.V[w],this.V[w]=f,{evicted:!1,key:u,value:p}):(this.size<this.capacity?w=this.size++:(w=this.tail,this.tail=this.backward[w],p=this.V[w],b=this.K[w],delete this.items[b]),this.items[u]=w,this.K[w]=u,this.V[w]=f,this.forward[w]=this.head,this.backward[this.head]=w,this.head=w,b?{evicted:!0,key:b,value:p}:null)},c.prototype.has=function(u){return u in this.items},c.prototype.get=function(u){var f=this.items[u];if(!(typeof f>"u"))return this.splayOnTop(f),this.V[f]},c.prototype.peek=function(u){var f=this.items[u];if(!(typeof f>"u"))return this.V[f]},c.prototype.forEach=function(u,f){f=arguments.length>1?f:this;for(var p=0,b=this.size,w=this.head,v=this.K,E=this.V,m=this.forward;p<b;)u.call(f,E[w],v[w],this),w=m[w],p++},c.prototype.keys=function(){var u=0,f=this.size,p=this.head,b=this.K,w=this.forward;return new r(function(){if(u>=f)return{done:!0};var v=b[p];return u++,u<f&&(p=w[p]),{done:!1,value:v}})},c.prototype.values=function(){var u=0,f=this.size,p=this.head,b=this.V,w=this.forward;return new r(function(){if(u>=f)return{done:!0};var v=b[p];return u++,u<f&&(p=w[p]),{done:!1,value:v}})},c.prototype.entries=function(){var u=0,f=this.size,p=this.head,b=this.K,w=this.V,v=this.forward;return new r(function(){if(u>=f)return{done:!0};var E=b[p],m=w[p];return u++,u<f&&(p=v[p]),{done:!1,value:[E,m]}})},typeof Symbol<"u"&&(c.prototype[Symbol.iterator]=c.prototype.entries),c.prototype.inspect=function(){for(var u=new Map,f=this.entries(),p;p=f.next(),!p.done;)u.set(p.value[0],p.value[1]);return Object.defineProperty(u,"constructor",{value:c,enumerable:!1}),u},typeof Symbol<"u"&&(c.prototype[Symbol.for("nodejs.util.inspect.custom")]=c.prototype.inspect),c.from=function(u,f,p,b){if(arguments.length<2){if(b=l.guessLength(u),typeof b!="number")throw new Error("mnemonist/lru-cache.from: could not guess iterable length. Please provide desired capacity as last argument.")}else arguments.length===2&&(b=f,f=null,p=null);var w=new c(f,p,b);return a(u,function(v,E){w.set(E,v)}),w},e.exports=c}}),Hu=Ae({"node_modules/mnemonist/lru-map.js"(t,e){var r=qu(),a=Ai(),o=Ti(),l=Ga();function c(u,f,p){if(arguments.length<2&&(p=u,u=null,f=null),this.capacity=p,typeof this.capacity!="number"||this.capacity<=0)throw new Error("mnemonist/lru-map: capacity should be positive number.");if(!isFinite(this.capacity)||Math.floor(this.capacity)!==this.capacity)throw new Error("mnemonist/lru-map: capacity should be a finite positive integer.");var b=o.getPointerArray(p);this.forward=new b(p),this.backward=new b(p),this.K=typeof u=="function"?new u(p):new Array(p),this.V=typeof f=="function"?new f(p):new Array(p),this.size=0,this.head=0,this.tail=0,this.items=new Map}c.prototype.clear=function(){this.size=0,this.head=0,this.tail=0,this.items.clear()},c.prototype.set=function(u,f){var p=this.items.get(u);if(typeof p<"u"){this.splayOnTop(p),this.V[p]=f;return}this.size<this.capacity?p=this.size++:(p=this.tail,this.tail=this.backward[p],this.items.delete(this.K[p])),this.items.set(u,p),this.K[p]=u,this.V[p]=f,this.forward[p]=this.head,this.backward[this.head]=p,this.head=p},c.prototype.setpop=function(u,f){var p=null,b=null,w=this.items.get(u);return typeof w<"u"?(this.splayOnTop(w),p=this.V[w],this.V[w]=f,{evicted:!1,key:u,value:p}):(this.size<this.capacity?w=this.size++:(w=this.tail,this.tail=this.backward[w],p=this.V[w],b=this.K[w],this.items.delete(b)),this.items.set(u,w),this.K[w]=u,this.V[w]=f,this.forward[w]=this.head,this.backward[this.head]=w,this.head=w,b?{evicted:!0,key:b,value:p}:null)},c.prototype.has=function(u){return this.items.has(u)},c.prototype.get=function(u){var f=this.items.get(u);if(!(typeof f>"u"))return this.splayOnTop(f),this.V[f]},c.prototype.peek=function(u){var f=this.items.get(u);if(!(typeof f>"u"))return this.V[f]},c.prototype.splayOnTop=r.prototype.splayOnTop,c.prototype.forEach=r.prototype.forEach,c.prototype.keys=r.prototype.keys,c.prototype.values=r.prototype.values,c.prototype.entries=r.prototype.entries,typeof Symbol<"u"&&(c.prototype[Symbol.iterator]=c.prototype.entries),c.prototype.inspect=r.prototype.inspect,c.from=function(u,f,p,b){if(arguments.length<2){if(b=l.guessLength(u),typeof b!="number")throw new Error("mnemonist/lru-cache.from: could not guess iterable length. Please provide desired capacity as last argument.")}else arguments.length===2&&(b=f,f=null,p=null);var w=new c(f,p,b);return a(u,function(v,E){w.set(E,v)}),w},e.exports=c}}),Yu=Ae({"node_modules/ms/index.js"(t,e){var r=1e3,a=r*60,o=a*60,l=o*24,c=l*7,u=l*365.25;e.exports=function(v,E){E=E||{};var m=typeof v;if(m==="string"&&v.length>0)return f(v);if(m==="number"&&isFinite(v))return E.long?b(v):p(v);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(v))};function f(v){if(v=String(v),!(v.length>100)){var E=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(v);if(E){var m=parseFloat(E[1]),_=(E[2]||"ms").toLowerCase();switch(_){case"years":case"year":case"yrs":case"yr":case"y":return m*u;case"weeks":case"week":case"w":return m*c;case"days":case"day":case"d":return m*l;case"hours":case"hour":case"hrs":case"hr":case"h":return m*o;case"minutes":case"minute":case"mins":case"min":case"m":return m*a;case"seconds":case"second":case"secs":case"sec":case"s":return m*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return m;default:return}}}}function p(v){var E=Math.abs(v);return E>=l?Math.round(v/l)+"d":E>=o?Math.round(v/o)+"h":E>=a?Math.round(v/a)+"m":E>=r?Math.round(v/r)+"s":v+"ms"}function b(v){var E=Math.abs(v);return E>=l?w(v,E,l,"day"):E>=o?w(v,E,o,"hour"):E>=a?w(v,E,a,"minute"):E>=r?w(v,E,r,"second"):v+" ms"}function w(v,E,m,_){var A=E>=m*1.5;return Math.round(v/m)+" "+_+(A?"s":"")}}}),Xu=Ae({"node_modules/debug/src/common.js"(t,e){function r(a){l.debug=l,l.default=l,l.coerce=w,l.disable=f,l.enable=u,l.enabled=p,l.humanize=Yu(),l.destroy=v,Object.keys(a).forEach(E=>{l[E]=a[E]}),l.names=[],l.skips=[],l.formatters={};function o(E){let m=0;for(let _=0;_<E.length;_++)m=(m<<5)-m+E.charCodeAt(_),m|=0;return l.colors[Math.abs(m)%l.colors.length]}l.selectColor=o;function l(E){let m,_=null,A,S;function O(...x){if(!O.enabled)return;const C=O,Z=Number(new Date),L=Z-(m||Z);C.diff=L,C.prev=m,C.curr=Z,m=Z,x[0]=l.coerce(x[0]),typeof x[0]!="string"&&x.unshift("%O");let ce=0;x[0]=x[0].replace(/%([a-zA-Z%])/g,(Te,xt)=>{if(Te==="%%")return"%";ce++;const nt=l.formatters[xt];if(typeof nt=="function"){const kt=x[ce];Te=nt.call(C,kt),x.splice(ce,1),ce--}return Te}),l.formatArgs.call(C,x),(C.log||l.log).apply(C,x)}return O.namespace=E,O.useColors=l.useColors(),O.color=l.selectColor(E),O.extend=c,O.destroy=l.destroy,Object.defineProperty(O,"enabled",{enumerable:!0,configurable:!1,get:()=>_!==null?_:(A!==l.namespaces&&(A=l.namespaces,S=l.enabled(E)),S),set:x=>{_=x}}),typeof l.init=="function"&&l.init(O),O}function c(E,m){const _=l(this.namespace+(typeof m>"u"?":":m)+E);return _.log=this.log,_}function u(E){l.save(E),l.namespaces=E,l.names=[],l.skips=[];let m;const _=(typeof E=="string"?E:"").split(/[\s,]+/),A=_.length;for(m=0;m<A;m++)_[m]&&(E=_[m].replace(/\*/g,".*?"),E[0]==="-"?l.skips.push(new RegExp("^"+E.slice(1)+"$")):l.names.push(new RegExp("^"+E+"$")))}function f(){const E=[...l.names.map(b),...l.skips.map(b).map(m=>"-"+m)].join(",");return l.enable(""),E}function p(E){if(E[E.length-1]==="*")return!0;let m,_;for(m=0,_=l.skips.length;m<_;m++)if(l.skips[m].test(E))return!1;for(m=0,_=l.names.length;m<_;m++)if(l.names[m].test(E))return!0;return!1}function b(E){return E.toString().substring(2,E.toString().length-2).replace(/\.\*\?$/,"*")}function w(E){return E instanceof Error?E.stack||E.message:E}function v(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return l.enable(l.load()),l}e.exports=r}}),Qu=Ae({"node_modules/debug/src/browser.js"(t,e){t.formatArgs=a,t.save=o,t.load=l,t.useColors=r,t.storage=c(),t.destroy=(()=>{let f=!1;return()=>{f||(f=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function r(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let f;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(f=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(f[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function a(f){if(f[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+f[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const p="color: "+this.color;f.splice(1,0,p,"color: inherit");let b=0,w=0;f[0].replace(/%[a-zA-Z%]/g,v=>{v!=="%%"&&(b++,v==="%c"&&(w=b))}),f.splice(w,0,p)}t.log=console.debug||console.log||(()=>{});function o(f){try{f?t.storage.setItem("debug",f):t.storage.removeItem("debug")}catch{}}function l(){let f;try{f=t.storage.getItem("debug")}catch{}return!f&&typeof process<"u"&&"env"in process&&(f=process.env.DEBUG),f}function c(){try{return localStorage}catch{}}e.exports=Xu()(t);var{formatters:u}=e.exports;u.j=function(f){try{return JSON.stringify(f)}catch(p){return"[UnexpectedJSONParseError]: "+p.message}}}}),Ju=Ae({"node_modules/base64-js/index.js"(t){"use strict";t.byteLength=f,t.toByteArray=b,t.fromByteArray=E;var e=[],r=[],a=typeof Uint8Array<"u"?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(l=0,c=o.length;l<c;++l)e[l]=o[l],r[o.charCodeAt(l)]=l;var l,c;r[45]=62,r[95]=63;function u(m){var _=m.length;if(_%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var A=m.indexOf("=");A===-1&&(A=_);var S=A===_?0:4-A%4;return[A,S]}function f(m){var _=u(m),A=_[0],S=_[1];return(A+S)*3/4-S}function p(m,_,A){return(_+A)*3/4-A}function b(m){var _,A=u(m),S=A[0],O=A[1],x=new a(p(m,S,O)),C=0,Z=O>0?S-4:S,L;for(L=0;L<Z;L+=4)_=r[m.charCodeAt(L)]<<18|r[m.charCodeAt(L+1)]<<12|r[m.charCodeAt(L+2)]<<6|r[m.charCodeAt(L+3)],x[C++]=_>>16&255,x[C++]=_>>8&255,x[C++]=_&255;return O===2&&(_=r[m.charCodeAt(L)]<<2|r[m.charCodeAt(L+1)]>>4,x[C++]=_&255),O===1&&(_=r[m.charCodeAt(L)]<<10|r[m.charCodeAt(L+1)]<<4|r[m.charCodeAt(L+2)]>>2,x[C++]=_>>8&255,x[C++]=_&255),x}function w(m){return e[m>>18&63]+e[m>>12&63]+e[m>>6&63]+e[m&63]}function v(m,_,A){for(var S,O=[],x=_;x<A;x+=3)S=(m[x]<<16&16711680)+(m[x+1]<<8&65280)+(m[x+2]&255),O.push(w(S));return O.join("")}function E(m){for(var _,A=m.length,S=A%3,O=[],x=16383,C=0,Z=A-S;C<Z;C+=x)O.push(v(m,C,C+x>Z?Z:C+x));return S===1?(_=m[A-1],O.push(e[_>>2]+e[_<<4&63]+"==")):S===2&&(_=(m[A-2]<<8)+m[A-1],O.push(e[_>>10]+e[_>>4&63]+e[_<<2&63]+"=")),O.join("")}}}),el=Ae({"node_modules/ieee754/index.js"(t){t.read=function(e,r,a,o,l){var c,u,f=l*8-o-1,p=(1<<f)-1,b=p>>1,w=-7,v=a?l-1:0,E=a?-1:1,m=e[r+v];for(v+=E,c=m&(1<<-w)-1,m>>=-w,w+=f;w>0;c=c*256+e[r+v],v+=E,w-=8);for(u=c&(1<<-w)-1,c>>=-w,w+=o;w>0;u=u*256+e[r+v],v+=E,w-=8);if(c===0)c=1-b;else{if(c===p)return u?NaN:(m?-1:1)*(1/0);u=u+Math.pow(2,o),c=c-b}return(m?-1:1)*u*Math.pow(2,c-o)},t.write=function(e,r,a,o,l,c){var u,f,p,b=c*8-l-1,w=(1<<b)-1,v=w>>1,E=l===23?Math.pow(2,-24)-Math.pow(2,-77):0,m=o?0:c-1,_=o?1:-1,A=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(f=isNaN(r)?1:0,u=w):(u=Math.floor(Math.log(r)/Math.LN2),r*(p=Math.pow(2,-u))<1&&(u--,p*=2),u+v>=1?r+=E/p:r+=E*Math.pow(2,1-v),r*p>=2&&(u++,p/=2),u+v>=w?(f=0,u=w):u+v>=1?(f=(r*p-1)*Math.pow(2,l),u=u+v):(f=r*Math.pow(2,v-1)*Math.pow(2,l),u=0));l>=8;e[a+m]=f&255,m+=_,f/=256,l-=8);for(u=u<<l|f,b+=l;b>0;e[a+m]=u&255,m+=_,u/=256,b-=8);e[a+m-_]|=A*128}}}),tl=Ae({"node_modules/buffer/index.js"(t){"use strict";var e=Ju(),r=el(),a=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=u,t.SlowBuffer=O,t.INSPECT_MAX_BYTES=50;var o=2147483647;t.kMaxLength=o,u.TYPED_ARRAY_SUPPORT=l(),!u.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function l(){try{const n=new Uint8Array(1),i={foo:function(){return 42}};return Object.setPrototypeOf(i,Uint8Array.prototype),Object.setPrototypeOf(n,i),n.foo()===42}catch{return!1}}Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}});function c(n){if(n>o)throw new RangeError('The value "'+n+'" is invalid for option "size"');const i=new Uint8Array(n);return Object.setPrototypeOf(i,u.prototype),i}function u(n,i,s){if(typeof n=="number"){if(typeof i=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return w(n)}return f(n,i,s)}u.poolSize=8192;function f(n,i,s){if(typeof n=="string")return v(n,i);if(ArrayBuffer.isView(n))return m(n);if(n==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof n);if(ne(n,ArrayBuffer)||n&&ne(n.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(ne(n,SharedArrayBuffer)||n&&ne(n.buffer,SharedArrayBuffer)))return _(n,i,s);if(typeof n=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const h=n.valueOf&&n.valueOf();if(h!=null&&h!==n)return u.from(h,i,s);const d=A(n);if(d)return d;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof n[Symbol.toPrimitive]=="function")return u.from(n[Symbol.toPrimitive]("string"),i,s);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof n)}u.from=function(n,i,s){return f(n,i,s)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array);function p(n){if(typeof n!="number")throw new TypeError('"size" argument must be of type number');if(n<0)throw new RangeError('The value "'+n+'" is invalid for option "size"')}function b(n,i,s){return p(n),n<=0?c(n):i!==void 0?typeof s=="string"?c(n).fill(i,s):c(n).fill(i):c(n)}u.alloc=function(n,i,s){return b(n,i,s)};function w(n){return p(n),c(n<0?0:S(n)|0)}u.allocUnsafe=function(n){return w(n)},u.allocUnsafeSlow=function(n){return w(n)};function v(n,i){if((typeof i!="string"||i==="")&&(i="utf8"),!u.isEncoding(i))throw new TypeError("Unknown encoding: "+i);const s=x(n,i)|0;let h=c(s);const d=h.write(n,i);return d!==s&&(h=h.slice(0,d)),h}function E(n){const i=n.length<0?0:S(n.length)|0,s=c(i);for(let h=0;h<i;h+=1)s[h]=n[h]&255;return s}function m(n){if(ne(n,Uint8Array)){const i=new Uint8Array(n);return _(i.buffer,i.byteOffset,i.byteLength)}return E(n)}function _(n,i,s){if(i<0||n.byteLength<i)throw new RangeError('"offset" is outside of buffer bounds');if(n.byteLength<i+(s||0))throw new RangeError('"length" is outside of buffer bounds');let h;return i===void 0&&s===void 0?h=new Uint8Array(n):s===void 0?h=new Uint8Array(n,i):h=new Uint8Array(n,i,s),Object.setPrototypeOf(h,u.prototype),h}function A(n){if(u.isBuffer(n)){const i=S(n.length)|0,s=c(i);return s.length===0||n.copy(s,0,0,i),s}if(n.length!==void 0)return typeof n.length!="number"||Re(n.length)?c(0):E(n);if(n.type==="Buffer"&&Array.isArray(n.data))return E(n.data)}function S(n){if(n>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return n|0}function O(n){return+n!=n&&(n=0),u.alloc(+n)}u.isBuffer=function(i){return i!=null&&i._isBuffer===!0&&i!==u.prototype},u.compare=function(i,s){if(ne(i,Uint8Array)&&(i=u.from(i,i.offset,i.byteLength)),ne(s,Uint8Array)&&(s=u.from(s,s.offset,s.byteLength)),!u.isBuffer(i)||!u.isBuffer(s))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(i===s)return 0;let h=i.length,d=s.length;for(let g=0,y=Math.min(h,d);g<y;++g)if(i[g]!==s[g]){h=i[g],d=s[g];break}return h<d?-1:d<h?1:0},u.isEncoding=function(i){switch(String(i).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(i,s){if(!Array.isArray(i))throw new TypeError('"list" argument must be an Array of Buffers');if(i.length===0)return u.alloc(0);let h;if(s===void 0)for(s=0,h=0;h<i.length;++h)s+=i[h].length;const d=u.allocUnsafe(s);let g=0;for(h=0;h<i.length;++h){let y=i[h];if(ne(y,Uint8Array))g+y.length>d.length?(u.isBuffer(y)||(y=u.from(y)),y.copy(d,g)):Uint8Array.prototype.set.call(d,y,g);else if(u.isBuffer(y))y.copy(d,g);else throw new TypeError('"list" argument must be an Array of Buffers');g+=y.length}return d};function x(n,i){if(u.isBuffer(n))return n.length;if(ArrayBuffer.isView(n)||ne(n,ArrayBuffer))return n.byteLength;if(typeof n!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof n);const s=n.length,h=arguments.length>2&&arguments[2]===!0;if(!h&&s===0)return 0;let d=!1;for(;;)switch(i){case"ascii":case"latin1":case"binary":return s;case"utf8":case"utf-8":return Ce(n).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return s*2;case"hex":return s>>>1;case"base64":return dt(n).length;default:if(d)return h?-1:Ce(n).length;i=(""+i).toLowerCase(),d=!0}}u.byteLength=x;function C(n,i,s){let h=!1;if((i===void 0||i<0)&&(i=0),i>this.length||((s===void 0||s>this.length)&&(s=this.length),s<=0)||(s>>>=0,i>>>=0,s<=i))return"";for(n||(n="utf8");;)switch(n){case"hex":return fr(this,i,s);case"utf8":case"utf-8":return it(this,i,s);case"ascii":return cr(this,i,s);case"latin1":case"binary":return hr(this,i,s);case"base64":return ur(this,i,s);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return dr(this,i,s);default:if(h)throw new TypeError("Unknown encoding: "+n);n=(n+"").toLowerCase(),h=!0}}u.prototype._isBuffer=!0;function Z(n,i,s){const h=n[i];n[i]=n[s],n[s]=h}u.prototype.swap16=function(){const i=this.length;if(i%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let s=0;s<i;s+=2)Z(this,s,s+1);return this},u.prototype.swap32=function(){const i=this.length;if(i%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let s=0;s<i;s+=4)Z(this,s,s+3),Z(this,s+1,s+2);return this},u.prototype.swap64=function(){const i=this.length;if(i%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let s=0;s<i;s+=8)Z(this,s,s+7),Z(this,s+1,s+6),Z(this,s+2,s+5),Z(this,s+3,s+4);return this},u.prototype.toString=function(){const i=this.length;return i===0?"":arguments.length===0?it(this,0,i):C.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(i){if(!u.isBuffer(i))throw new TypeError("Argument must be a Buffer");return this===i?!0:u.compare(this,i)===0},u.prototype.inspect=function(){let i="";const s=t.INSPECT_MAX_BYTES;return i=this.toString("hex",0,s).replace(/(.{2})/g,"$1 ").trim(),this.length>s&&(i+=" ... "),"<Buffer "+i+">"},a&&(u.prototype[a]=u.prototype.inspect),u.prototype.compare=function(i,s,h,d,g){if(ne(i,Uint8Array)&&(i=u.from(i,i.offset,i.byteLength)),!u.isBuffer(i))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof i);if(s===void 0&&(s=0),h===void 0&&(h=i?i.length:0),d===void 0&&(d=0),g===void 0&&(g=this.length),s<0||h>i.length||d<0||g>this.length)throw new RangeError("out of range index");if(d>=g&&s>=h)return 0;if(d>=g)return-1;if(s>=h)return 1;if(s>>>=0,h>>>=0,d>>>=0,g>>>=0,this===i)return 0;let y=g-d,B=h-s;const F=Math.min(y,B),U=this.slice(d,g),R=i.slice(s,h);for(let P=0;P<F;++P)if(U[P]!==R[P]){y=U[P],B=R[P];break}return y<B?-1:B<y?1:0};function L(n,i,s,h,d){if(n.length===0)return-1;if(typeof s=="string"?(h=s,s=0):s>2147483647?s=2147483647:s<-2147483648&&(s=-2147483648),s=+s,Re(s)&&(s=d?0:n.length-1),s<0&&(s=n.length+s),s>=n.length){if(d)return-1;s=n.length-1}else if(s<0)if(d)s=0;else return-1;if(typeof i=="string"&&(i=u.from(i,h)),u.isBuffer(i))return i.length===0?-1:ce(n,i,s,h,d);if(typeof i=="number")return i=i&255,typeof Uint8Array.prototype.indexOf=="function"?d?Uint8Array.prototype.indexOf.call(n,i,s):Uint8Array.prototype.lastIndexOf.call(n,i,s):ce(n,[i],s,h,d);throw new TypeError("val must be string, number or Buffer")}function ce(n,i,s,h,d){let g=1,y=n.length,B=i.length;if(h!==void 0&&(h=String(h).toLowerCase(),h==="ucs2"||h==="ucs-2"||h==="utf16le"||h==="utf-16le")){if(n.length<2||i.length<2)return-1;g=2,y/=2,B/=2,s/=2}function F(R,P){return g===1?R[P]:R.readUInt16BE(P*g)}let U;if(d){let R=-1;for(U=s;U<y;U++)if(F(n,U)===F(i,R===-1?0:U-R)){if(R===-1&&(R=U),U-R+1===B)return R*g}else R!==-1&&(U-=U-R),R=-1}else for(s+B>y&&(s=y-B),U=s;U>=0;U--){let R=!0;for(let P=0;P<B;P++)if(F(n,U+P)!==F(i,P)){R=!1;break}if(R)return U}return-1}u.prototype.includes=function(i,s,h){return this.indexOf(i,s,h)!==-1},u.prototype.indexOf=function(i,s,h){return L(this,i,s,h,!0)},u.prototype.lastIndexOf=function(i,s,h){return L(this,i,s,h,!1)};function Ie(n,i,s,h){s=Number(s)||0;const d=n.length-s;h?(h=Number(h),h>d&&(h=d)):h=d;const g=i.length;h>g/2&&(h=g/2);let y;for(y=0;y<h;++y){const B=parseInt(i.substr(y*2,2),16);if(Re(B))return y;n[s+y]=B}return y}function Te(n,i,s,h){return we(Ce(i,n.length-s),n,s,h)}function xt(n,i,s,h){return we(mr(i),n,s,h)}function nt(n,i,s,h){return we(dt(i),n,s,h)}function kt(n,i,s,h){return we(vr(i,n.length-s),n,s,h)}u.prototype.write=function(i,s,h,d){if(s===void 0)d="utf8",h=this.length,s=0;else if(h===void 0&&typeof s=="string")d=s,h=this.length,s=0;else if(isFinite(s))s=s>>>0,isFinite(h)?(h=h>>>0,d===void 0&&(d="utf8")):(d=h,h=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const g=this.length-s;if((h===void 0||h>g)&&(h=g),i.length>0&&(h<0||s<0)||s>this.length)throw new RangeError("Attempt to write outside buffer bounds");d||(d="utf8");let y=!1;for(;;)switch(d){case"hex":return Ie(this,i,s,h);case"utf8":case"utf-8":return Te(this,i,s,h);case"ascii":case"latin1":case"binary":return xt(this,i,s,h);case"base64":return nt(this,i,s,h);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return kt(this,i,s,h);default:if(y)throw new TypeError("Unknown encoding: "+d);d=(""+d).toLowerCase(),y=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function ur(n,i,s){return i===0&&s===n.length?e.fromByteArray(n):e.fromByteArray(n.slice(i,s))}function it(n,i,s){s=Math.min(n.length,s);const h=[];let d=i;for(;d<s;){const g=n[d];let y=null,B=g>239?4:g>223?3:g>191?2:1;if(d+B<=s){let F,U,R,P;switch(B){case 1:g<128&&(y=g);break;case 2:F=n[d+1],(F&192)===128&&(P=(g&31)<<6|F&63,P>127&&(y=P));break;case 3:F=n[d+1],U=n[d+2],(F&192)===128&&(U&192)===128&&(P=(g&15)<<12|(F&63)<<6|U&63,P>2047&&(P<55296||P>57343)&&(y=P));break;case 4:F=n[d+1],U=n[d+2],R=n[d+3],(F&192)===128&&(U&192)===128&&(R&192)===128&&(P=(g&15)<<18|(F&63)<<12|(U&63)<<6|R&63,P>65535&&P<1114112&&(y=P))}}y===null?(y=65533,B=1):y>65535&&(y-=65536,h.push(y>>>10&1023|55296),y=56320|y&1023),h.push(y),d+=B}return lr(h)}var at=4096;function lr(n){const i=n.length;if(i<=at)return String.fromCharCode.apply(String,n);let s="",h=0;for(;h<i;)s+=String.fromCharCode.apply(String,n.slice(h,h+=at));return s}function cr(n,i,s){let h="";s=Math.min(n.length,s);for(let d=i;d<s;++d)h+=String.fromCharCode(n[d]&127);return h}function hr(n,i,s){let h="";s=Math.min(n.length,s);for(let d=i;d<s;++d)h+=String.fromCharCode(n[d]);return h}function fr(n,i,s){const h=n.length;(!i||i<0)&&(i=0),(!s||s<0||s>h)&&(s=h);let d="";for(let g=i;g<s;++g)d+=wr[n[g]];return d}function dr(n,i,s){const h=n.slice(i,s);let d="";for(let g=0;g<h.length-1;g+=2)d+=String.fromCharCode(h[g]+h[g+1]*256);return d}u.prototype.slice=function(i,s){const h=this.length;i=~~i,s=s===void 0?h:~~s,i<0?(i+=h,i<0&&(i=0)):i>h&&(i=h),s<0?(s+=h,s<0&&(s=0)):s>h&&(s=h),s<i&&(s=i);const d=this.subarray(i,s);return Object.setPrototypeOf(d,u.prototype),d};function W(n,i,s){if(n%1!==0||n<0)throw new RangeError("offset is not uint");if(n+i>s)throw new RangeError("Trying to access beyond buffer length")}u.prototype.readUintLE=u.prototype.readUIntLE=function(i,s,h){i=i>>>0,s=s>>>0,h||W(i,s,this.length);let d=this[i],g=1,y=0;for(;++y<s&&(g*=256);)d+=this[i+y]*g;return d},u.prototype.readUintBE=u.prototype.readUIntBE=function(i,s,h){i=i>>>0,s=s>>>0,h||W(i,s,this.length);let d=this[i+--s],g=1;for(;s>0&&(g*=256);)d+=this[i+--s]*g;return d},u.prototype.readUint8=u.prototype.readUInt8=function(i,s){return i=i>>>0,s||W(i,1,this.length),this[i]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(i,s){return i=i>>>0,s||W(i,2,this.length),this[i]|this[i+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(i,s){return i=i>>>0,s||W(i,2,this.length),this[i]<<8|this[i+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(i,s){return i=i>>>0,s||W(i,4,this.length),(this[i]|this[i+1]<<8|this[i+2]<<16)+this[i+3]*16777216},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(i,s){return i=i>>>0,s||W(i,4,this.length),this[i]*16777216+(this[i+1]<<16|this[i+2]<<8|this[i+3])},u.prototype.readBigUInt64LE=se(function(i){i=i>>>0,fe(i,"offset");const s=this[i],h=this[i+7];(s===void 0||h===void 0)&&ge(i,this.length-8);const d=s+this[++i]*256+this[++i]*65536+this[++i]*16777216,g=this[++i]+this[++i]*256+this[++i]*65536+h*16777216;return BigInt(d)+(BigInt(g)<<BigInt(32))}),u.prototype.readBigUInt64BE=se(function(i){i=i>>>0,fe(i,"offset");const s=this[i],h=this[i+7];(s===void 0||h===void 0)&&ge(i,this.length-8);const d=s*16777216+this[++i]*65536+this[++i]*256+this[++i],g=this[++i]*16777216+this[++i]*65536+this[++i]*256+h;return(BigInt(d)<<BigInt(32))+BigInt(g)}),u.prototype.readIntLE=function(i,s,h){i=i>>>0,s=s>>>0,h||W(i,s,this.length);let d=this[i],g=1,y=0;for(;++y<s&&(g*=256);)d+=this[i+y]*g;return g*=128,d>=g&&(d-=Math.pow(2,8*s)),d},u.prototype.readIntBE=function(i,s,h){i=i>>>0,s=s>>>0,h||W(i,s,this.length);let d=s,g=1,y=this[i+--d];for(;d>0&&(g*=256);)y+=this[i+--d]*g;return g*=128,y>=g&&(y-=Math.pow(2,8*s)),y},u.prototype.readInt8=function(i,s){return i=i>>>0,s||W(i,1,this.length),this[i]&128?(255-this[i]+1)*-1:this[i]},u.prototype.readInt16LE=function(i,s){i=i>>>0,s||W(i,2,this.length);const h=this[i]|this[i+1]<<8;return h&32768?h|4294901760:h},u.prototype.readInt16BE=function(i,s){i=i>>>0,s||W(i,2,this.length);const h=this[i+1]|this[i]<<8;return h&32768?h|4294901760:h},u.prototype.readInt32LE=function(i,s){return i=i>>>0,s||W(i,4,this.length),this[i]|this[i+1]<<8|this[i+2]<<16|this[i+3]<<24},u.prototype.readInt32BE=function(i,s){return i=i>>>0,s||W(i,4,this.length),this[i]<<24|this[i+1]<<16|this[i+2]<<8|this[i+3]},u.prototype.readBigInt64LE=se(function(i){i=i>>>0,fe(i,"offset");const s=this[i],h=this[i+7];(s===void 0||h===void 0)&&ge(i,this.length-8);const d=this[i+4]+this[i+5]*256+this[i+6]*65536+(h<<24);return(BigInt(d)<<BigInt(32))+BigInt(s+this[++i]*256+this[++i]*65536+this[++i]*16777216)}),u.prototype.readBigInt64BE=se(function(i){i=i>>>0,fe(i,"offset");const s=this[i],h=this[i+7];(s===void 0||h===void 0)&&ge(i,this.length-8);const d=(s<<24)+this[++i]*65536+this[++i]*256+this[++i];return(BigInt(d)<<BigInt(32))+BigInt(this[++i]*16777216+this[++i]*65536+this[++i]*256+h)}),u.prototype.readFloatLE=function(i,s){return i=i>>>0,s||W(i,4,this.length),r.read(this,i,!0,23,4)},u.prototype.readFloatBE=function(i,s){return i=i>>>0,s||W(i,4,this.length),r.read(this,i,!1,23,4)},u.prototype.readDoubleLE=function(i,s){return i=i>>>0,s||W(i,8,this.length),r.read(this,i,!0,52,8)},u.prototype.readDoubleBE=function(i,s){return i=i>>>0,s||W(i,8,this.length),r.read(this,i,!1,52,8)};function H(n,i,s,h,d,g){if(!u.isBuffer(n))throw new TypeError('"buffer" argument must be a Buffer instance');if(i>d||i<g)throw new RangeError('"value" argument is out of bounds');if(s+h>n.length)throw new RangeError("Index out of range")}u.prototype.writeUintLE=u.prototype.writeUIntLE=function(i,s,h,d){if(i=+i,s=s>>>0,h=h>>>0,!d){const B=Math.pow(2,8*h)-1;H(this,i,s,h,B,0)}let g=1,y=0;for(this[s]=i&255;++y<h&&(g*=256);)this[s+y]=i/g&255;return s+h},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(i,s,h,d){if(i=+i,s=s>>>0,h=h>>>0,!d){const B=Math.pow(2,8*h)-1;H(this,i,s,h,B,0)}let g=h-1,y=1;for(this[s+g]=i&255;--g>=0&&(y*=256);)this[s+g]=i/y&255;return s+h},u.prototype.writeUint8=u.prototype.writeUInt8=function(i,s,h){return i=+i,s=s>>>0,h||H(this,i,s,1,255,0),this[s]=i&255,s+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(i,s,h){return i=+i,s=s>>>0,h||H(this,i,s,2,65535,0),this[s]=i&255,this[s+1]=i>>>8,s+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(i,s,h){return i=+i,s=s>>>0,h||H(this,i,s,2,65535,0),this[s]=i>>>8,this[s+1]=i&255,s+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(i,s,h){return i=+i,s=s>>>0,h||H(this,i,s,4,4294967295,0),this[s+3]=i>>>24,this[s+2]=i>>>16,this[s+1]=i>>>8,this[s]=i&255,s+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(i,s,h){return i=+i,s=s>>>0,h||H(this,i,s,4,4294967295,0),this[s]=i>>>24,this[s+1]=i>>>16,this[s+2]=i>>>8,this[s+3]=i&255,s+4};function st(n,i,s,h,d){ft(i,h,d,n,s,7);let g=Number(i&BigInt(4294967295));n[s++]=g,g=g>>8,n[s++]=g,g=g>>8,n[s++]=g,g=g>>8,n[s++]=g;let y=Number(i>>BigInt(32)&BigInt(4294967295));return n[s++]=y,y=y>>8,n[s++]=y,y=y>>8,n[s++]=y,y=y>>8,n[s++]=y,s}function ot(n,i,s,h,d){ft(i,h,d,n,s,7);let g=Number(i&BigInt(4294967295));n[s+7]=g,g=g>>8,n[s+6]=g,g=g>>8,n[s+5]=g,g=g>>8,n[s+4]=g;let y=Number(i>>BigInt(32)&BigInt(4294967295));return n[s+3]=y,y=y>>8,n[s+2]=y,y=y>>8,n[s+1]=y,y=y>>8,n[s]=y,s+8}u.prototype.writeBigUInt64LE=se(function(i,s=0){return st(this,i,s,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeBigUInt64BE=se(function(i,s=0){return ot(this,i,s,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeIntLE=function(i,s,h,d){if(i=+i,s=s>>>0,!d){const F=Math.pow(2,8*h-1);H(this,i,s,h,F-1,-F)}let g=0,y=1,B=0;for(this[s]=i&255;++g<h&&(y*=256);)i<0&&B===0&&this[s+g-1]!==0&&(B=1),this[s+g]=(i/y>>0)-B&255;return s+h},u.prototype.writeIntBE=function(i,s,h,d){if(i=+i,s=s>>>0,!d){const F=Math.pow(2,8*h-1);H(this,i,s,h,F-1,-F)}let g=h-1,y=1,B=0;for(this[s+g]=i&255;--g>=0&&(y*=256);)i<0&&B===0&&this[s+g+1]!==0&&(B=1),this[s+g]=(i/y>>0)-B&255;return s+h},u.prototype.writeInt8=function(i,s,h){return i=+i,s=s>>>0,h||H(this,i,s,1,127,-128),i<0&&(i=255+i+1),this[s]=i&255,s+1},u.prototype.writeInt16LE=function(i,s,h){return i=+i,s=s>>>0,h||H(this,i,s,2,32767,-32768),this[s]=i&255,this[s+1]=i>>>8,s+2},u.prototype.writeInt16BE=function(i,s,h){return i=+i,s=s>>>0,h||H(this,i,s,2,32767,-32768),this[s]=i>>>8,this[s+1]=i&255,s+2},u.prototype.writeInt32LE=function(i,s,h){return i=+i,s=s>>>0,h||H(this,i,s,4,2147483647,-2147483648),this[s]=i&255,this[s+1]=i>>>8,this[s+2]=i>>>16,this[s+3]=i>>>24,s+4},u.prototype.writeInt32BE=function(i,s,h){return i=+i,s=s>>>0,h||H(this,i,s,4,2147483647,-2147483648),i<0&&(i=4294967295+i+1),this[s]=i>>>24,this[s+1]=i>>>16,this[s+2]=i>>>8,this[s+3]=i&255,s+4},u.prototype.writeBigInt64LE=se(function(i,s=0){return st(this,i,s,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),u.prototype.writeBigInt64BE=se(function(i,s=0){return ot(this,i,s,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function ut(n,i,s,h,d,g){if(s+h>n.length)throw new RangeError("Index out of range");if(s<0)throw new RangeError("Index out of range")}function lt(n,i,s,h,d){return i=+i,s=s>>>0,d||ut(n,i,s,4,34028234663852886e22,-34028234663852886e22),r.write(n,i,s,h,23,4),s+4}u.prototype.writeFloatLE=function(i,s,h){return lt(this,i,s,!0,h)},u.prototype.writeFloatBE=function(i,s,h){return lt(this,i,s,!1,h)};function ct(n,i,s,h,d){return i=+i,s=s>>>0,d||ut(n,i,s,8,17976931348623157e292,-17976931348623157e292),r.write(n,i,s,h,52,8),s+8}u.prototype.writeDoubleLE=function(i,s,h){return ct(this,i,s,!0,h)},u.prototype.writeDoubleBE=function(i,s,h){return ct(this,i,s,!1,h)},u.prototype.copy=function(i,s,h,d){if(!u.isBuffer(i))throw new TypeError("argument should be a Buffer");if(h||(h=0),!d&&d!==0&&(d=this.length),s>=i.length&&(s=i.length),s||(s=0),d>0&&d<h&&(d=h),d===h||i.length===0||this.length===0)return 0;if(s<0)throw new RangeError("targetStart out of bounds");if(h<0||h>=this.length)throw new RangeError("Index out of range");if(d<0)throw new RangeError("sourceEnd out of bounds");d>this.length&&(d=this.length),i.length-s<d-h&&(d=i.length-s+h);const g=d-h;return this===i&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(s,h,d):Uint8Array.prototype.set.call(i,this.subarray(h,d),s),g},u.prototype.fill=function(i,s,h,d){if(typeof i=="string"){if(typeof s=="string"?(d=s,s=0,h=this.length):typeof h=="string"&&(d=h,h=this.length),d!==void 0&&typeof d!="string")throw new TypeError("encoding must be a string");if(typeof d=="string"&&!u.isEncoding(d))throw new TypeError("Unknown encoding: "+d);if(i.length===1){const y=i.charCodeAt(0);(d==="utf8"&&y<128||d==="latin1")&&(i=y)}}else typeof i=="number"?i=i&255:typeof i=="boolean"&&(i=Number(i));if(s<0||this.length<s||this.length<h)throw new RangeError("Out of range index");if(h<=s)return this;s=s>>>0,h=h===void 0?this.length:h>>>0,i||(i=0);let g;if(typeof i=="number")for(g=s;g<h;++g)this[g]=i;else{const y=u.isBuffer(i)?i:u.from(i,d),B=y.length;if(B===0)throw new TypeError('The value "'+i+'" is invalid for argument "value"');for(g=0;g<h-s;++g)this[g+s]=y[g%B]}return this};var he={};function Oe(n,i,s){he[n]=class extends s{constructor(){super(),Object.defineProperty(this,"message",{value:i.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${n}]`,this.stack,delete this.name}get code(){return n}set code(d){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:d,writable:!0})}toString(){return`${this.name} [${n}]: ${this.message}`}}}Oe("ERR_BUFFER_OUT_OF_BOUNDS",function(n){return n?`${n} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Oe("ERR_INVALID_ARG_TYPE",function(n,i){return`The "${n}" argument must be of type number. Received type ${typeof i}`},TypeError),Oe("ERR_OUT_OF_RANGE",function(n,i,s){let h=`The value of "${n}" is out of range.`,d=s;return Number.isInteger(s)&&Math.abs(s)>4294967296?d=ht(String(s)):typeof s=="bigint"&&(d=String(s),(s>BigInt(2)**BigInt(32)||s<-(BigInt(2)**BigInt(32)))&&(d=ht(d)),d+="n"),h+=` It must be ${i}. Received ${d}`,h},RangeError);function ht(n){let i="",s=n.length;const h=n[0]==="-"?1:0;for(;s>=h+4;s-=3)i=`_${n.slice(s-3,s)}${i}`;return`${n.slice(0,s)}${i}`}function pr(n,i,s){fe(i,"offset"),(n[i]===void 0||n[i+s]===void 0)&&ge(i,n.length-(s+1))}function ft(n,i,s,h,d,g){if(n>s||n<i){const y=typeof i=="bigint"?"n":"";let B;throw g>3?i===0||i===BigInt(0)?B=`>= 0${y} and < 2${y} ** ${(g+1)*8}${y}`:B=`>= -(2${y} ** ${(g+1)*8-1}${y}) and < 2 ** ${(g+1)*8-1}${y}`:B=`>= ${i}${y} and <= ${s}${y}`,new he.ERR_OUT_OF_RANGE("value",B,n)}pr(h,d,g)}function fe(n,i){if(typeof n!="number")throw new he.ERR_INVALID_ARG_TYPE(i,"number",n)}function ge(n,i,s){throw Math.floor(n)!==n?(fe(n,s),new he.ERR_OUT_OF_RANGE(s||"offset","an integer",n)):i<0?new he.ERR_BUFFER_OUT_OF_BOUNDS:new he.ERR_OUT_OF_RANGE(s||"offset",`>= ${s?1:0} and <= ${i}`,n)}var gr=/[^+/0-9A-Za-z-_]/g;function yr(n){if(n=n.split("=")[0],n=n.trim().replace(gr,""),n.length<2)return"";for(;n.length%4!==0;)n=n+"=";return n}function Ce(n,i){i=i||1/0;let s;const h=n.length;let d=null;const g=[];for(let y=0;y<h;++y){if(s=n.charCodeAt(y),s>55295&&s<57344){if(!d){if(s>56319){(i-=3)>-1&&g.push(239,191,189);continue}else if(y+1===h){(i-=3)>-1&&g.push(239,191,189);continue}d=s;continue}if(s<56320){(i-=3)>-1&&g.push(239,191,189),d=s;continue}s=(d-55296<<10|s-56320)+65536}else d&&(i-=3)>-1&&g.push(239,191,189);if(d=null,s<128){if((i-=1)<0)break;g.push(s)}else if(s<2048){if((i-=2)<0)break;g.push(s>>6|192,s&63|128)}else if(s<65536){if((i-=3)<0)break;g.push(s>>12|224,s>>6&63|128,s&63|128)}else if(s<1114112){if((i-=4)<0)break;g.push(s>>18|240,s>>12&63|128,s>>6&63|128,s&63|128)}else throw new Error("Invalid code point")}return g}function mr(n){const i=[];for(let s=0;s<n.length;++s)i.push(n.charCodeAt(s)&255);return i}function vr(n,i){let s,h,d;const g=[];for(let y=0;y<n.length&&!((i-=2)<0);++y)s=n.charCodeAt(y),h=s>>8,d=s%256,g.push(d),g.push(h);return g}function dt(n){return e.toByteArray(yr(n))}function we(n,i,s,h){let d;for(d=0;d<h&&!(d+s>=i.length||d>=n.length);++d)i[d+s]=n[d];return d}function ne(n,i){return n instanceof i||n!=null&&n.constructor!=null&&n.constructor.name!=null&&n.constructor.name===i.name}function Re(n){return n!==n}var wr=function(){const n="0123456789abcdef",i=new Array(256);for(let s=0;s<16;++s){const h=s*16;for(let d=0;d<16;++d)i[h+d]=n[s]+n[d]}return i}();function se(n){return typeof BigInt>"u"?_r:n}function _r(){throw new Error("BigInt not supported")}}}),rl={"@@functional/placeholder":!0};function oe(t){return t===rl}function ye(t){return function e(r){return arguments.length===0||oe(r)?e:t.apply(this,arguments)}}function pe(t){return function e(r,a){switch(arguments.length){case 0:return e;case 1:return oe(r)?e:ye(function(o){return t(r,o)});default:return oe(r)&&oe(a)?e:oe(r)?ye(function(o){return t(o,a)}):oe(a)?ye(function(o){return t(r,o)}):t(r,a)}}}function Tn(t,e){switch(t){case 0:return function(){return e.apply(this,arguments)};case 1:return function(r){return e.apply(this,arguments)};case 2:return function(r,a){return e.apply(this,arguments)};case 3:return function(r,a,o){return e.apply(this,arguments)};case 4:return function(r,a,o,l){return e.apply(this,arguments)};case 5:return function(r,a,o,l,c){return e.apply(this,arguments)};case 6:return function(r,a,o,l,c,u){return e.apply(this,arguments)};case 7:return function(r,a,o,l,c,u,f){return e.apply(this,arguments)};case 8:return function(r,a,o,l,c,u,f,p){return e.apply(this,arguments)};case 9:return function(r,a,o,l,c,u,f,p,b){return e.apply(this,arguments)};case 10:return function(r,a,o,l,c,u,f,p,b,w){return e.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten")}}function Ka(t,e,r){return function(){for(var a=[],o=0,l=t,c=0,u=!1;c<e.length||o<arguments.length;){var f;c<e.length&&(!oe(e[c])||o>=arguments.length)?f=e[c]:(f=arguments[o],o+=1),a[c]=f,oe(f)?u=!0:l-=1,c+=1}return!u&&l<=0?r.apply(this,a):Tn(Math.max(0,l),Ka(t,a,r))}}var nl=pe(function(t,e){return t===1?ye(e):Tn(t,Ka(t,[],e))}),qa=nl;function Si(t){return function e(r,a,o){switch(arguments.length){case 0:return e;case 1:return oe(r)?e:pe(function(l,c){return t(r,l,c)});case 2:return oe(r)&&oe(a)?e:oe(r)?pe(function(l,c){return t(l,a,c)}):oe(a)?pe(function(l,c){return t(r,l,c)}):ye(function(l){return t(r,a,l)});default:return oe(r)&&oe(a)&&oe(o)?e:oe(r)&&oe(a)?pe(function(l,c){return t(l,c,o)}):oe(r)&&oe(o)?pe(function(l,c){return t(l,a,c)}):oe(a)&&oe(o)?pe(function(l,c){return t(r,l,c)}):oe(r)?ye(function(l){return t(l,a,o)}):oe(a)?ye(function(l){return t(r,l,o)}):oe(o)?ye(function(l){return t(r,a,l)}):t(r,a,o)}}}var xi=Array.isArray||function(t){return t!=null&&t.length>=0&&Object.prototype.toString.call(t)==="[object Array]"};function il(t){return t!=null&&typeof t["@@transducer/step"]=="function"}function ki(t,e,r){return function(){if(arguments.length===0)return r();var a=arguments[arguments.length-1];if(!xi(a)){for(var o=0;o<t.length;){if(typeof a[t[o]]=="function")return a[t[o]].apply(a,Array.prototype.slice.call(arguments,0,-1));o+=1}if(il(a)){var l=e.apply(null,Array.prototype.slice.call(arguments,0,-1));return l(a)}}return r.apply(this,arguments)}}function al(t){return t&&t["@@transducer/reduced"]?t:{"@@transducer/value":t,"@@transducer/reduced":!0}}var Er={init:function(){return this.xf["@@transducer/init"]()},result:function(t){return this.xf["@@transducer/result"](t)}};function Ha(t){for(var e=[],r;!(r=t.next()).done;)e.push(r.value);return e}function Ya(t,e,r){for(var a=0,o=r.length;a<o;){if(t(e,r[a]))return!0;a+=1}return!1}function sl(t){var e=String(t).match(/^function (\w*)/);return e==null?"":e[1]}function Sn(t,e){return Object.prototype.hasOwnProperty.call(e,t)}function ol(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}var Bi=typeof Object.is=="function"?Object.is:ol,Xa=Object.prototype.toString,ul=function(){return Xa.call(arguments)==="[object Arguments]"?function(t){return Xa.call(t)==="[object Arguments]"}:function(t){return Sn("callee",t)}}(),ll=ul,cl=!{toString:null}.propertyIsEnumerable("toString"),Qa=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],Ja=function(){"use strict";return arguments.propertyIsEnumerable("length")}(),hl=function(t,e){for(var r=0;r<t.length;){if(t[r]===e)return!0;r+=1}return!1},fl=ye(typeof Object.keys=="function"&&!Ja?function(t){return Object(t)!==t?[]:Object.keys(t)}:function(t){if(Object(t)!==t)return[];var e,r,a=[],o=Ja&&ll(t);for(e in t)Sn(e,t)&&(!o||e!=="length")&&(a[a.length]=e);if(cl)for(r=Qa.length-1;r>=0;)e=Qa[r],Sn(e,t)&&!hl(a,e)&&(a[a.length]=e),r-=1;return a}),Ft=fl,dl=ye(function(t){return t===null?"Null":t===void 0?"Undefined":Object.prototype.toString.call(t).slice(8,-1)}),es=dl;function ts(t,e,r,a){var o=Ha(t),l=Ha(e);function c(u,f){return Ii(u,f,r.slice(),a.slice())}return!Ya(function(u,f){return!Ya(c,f,u)},l,o)}function Ii(t,e,r,a){if(Bi(t,e))return!0;var o=es(t);if(o!==es(e))return!1;if(typeof t["fantasy-land/equals"]=="function"||typeof e["fantasy-land/equals"]=="function")return typeof t["fantasy-land/equals"]=="function"&&t["fantasy-land/equals"](e)&&typeof e["fantasy-land/equals"]=="function"&&e["fantasy-land/equals"](t);if(typeof t.equals=="function"||typeof e.equals=="function")return typeof t.equals=="function"&&t.equals(e)&&typeof e.equals=="function"&&e.equals(t);switch(o){case"Arguments":case"Array":case"Object":if(typeof t.constructor=="function"&&sl(t.constructor)==="Promise")return t===e;break;case"Boolean":case"Number":case"String":if(!(typeof t==typeof e&&Bi(t.valueOf(),e.valueOf())))return!1;break;case"Date":if(!Bi(t.valueOf(),e.valueOf()))return!1;break;case"Error":return t.name===e.name&&t.message===e.message;case"RegExp":if(!(t.source===e.source&&t.global===e.global&&t.ignoreCase===e.ignoreCase&&t.multiline===e.multiline&&t.sticky===e.sticky&&t.unicode===e.unicode))return!1;break}for(var l=r.length-1;l>=0;){if(r[l]===t)return a[l]===e;l-=1}switch(o){case"Map":return t.size!==e.size?!1:ts(t.entries(),e.entries(),r.concat([t]),a.concat([e]));case"Set":return t.size!==e.size?!1:ts(t.values(),e.values(),r.concat([t]),a.concat([e]));case"Arguments":case"Array":case"Object":case"Boolean":case"Number":case"String":case"Date":case"Error":case"RegExp":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"ArrayBuffer":break;default:return!1}var c=Ft(t);if(c.length!==Ft(e).length)return!1;var u=r.concat([t]),f=a.concat([e]);for(l=c.length-1;l>=0;){var p=c[l];if(!(Sn(p,e)&&Ii(e[p],t[p],u,f)))return!1;l-=1}return!0}var pl=pe(function(t,e){return Ii(t,e,[],[])}),rs=pl;function gl(t,e,r){var a,o;if(typeof t.indexOf=="function")switch(typeof e){case"number":if(e===0){for(a=1/e;r<t.length;){if(o=t[r],o===0&&1/o===a)return r;r+=1}return-1}else if(e!==e){for(;r<t.length;){if(o=t[r],typeof o=="number"&&o!==o)return r;r+=1}return-1}return t.indexOf(e,r);case"string":case"boolean":case"function":case"undefined":return t.indexOf(e,r);case"object":if(e===null)return t.indexOf(e,r)}for(;r<t.length;){if(rs(t[r],e))return r;r+=1}return-1}function yl(t,e){return gl(e,t,0)>=0}function Ar(t,e){for(var r=0,a=e.length,o=Array(a);r<a;)o[r]=t(e[r]),r+=1;return o}function Oi(t){var e=t.replace(/\\/g,"\\\\").replace(/[\b]/g,"\\b").replace(/\f/g,"\\f").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t").replace(/\v/g,"\\v").replace(/\0/g,"\\0");return'"'+e.replace(/"/g,'\\"')+'"'}var Tr=function(t){return(t<10?"0":"")+t},ml=typeof Date.prototype.toISOString=="function"?function(t){return t.toISOString()}:function(t){return t.getUTCFullYear()+"-"+Tr(t.getUTCMonth()+1)+"-"+Tr(t.getUTCDate())+"T"+Tr(t.getUTCHours())+":"+Tr(t.getUTCMinutes())+":"+Tr(t.getUTCSeconds())+"."+(t.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"},vl=ml;function wl(t){return function(){return!t.apply(this,arguments)}}function ns(t,e,r){for(var a=0,o=r.length;a<o;)e=t(e,r[a]),a+=1;return e}function _l(t,e){for(var r=0,a=e.length,o=[];r<a;)t(e[r])&&(o[o.length]=e[r]),r+=1;return o}function bl(t){return Object.prototype.toString.call(t)==="[object Object]"}var El=function(){function t(e,r){this.xf=r,this.f=e}return t.prototype["@@transducer/init"]=Er.init,t.prototype["@@transducer/result"]=Er.result,t.prototype["@@transducer/step"]=function(e,r){return this.f(r)?this.xf["@@transducer/step"](e,r):e},t}();function Al(t){return function(e){return new El(t,e)}}var Tl=pe(ki(["fantasy-land/filter","filter"],Al,function(t,e){return bl(e)?ns(function(r,a){return t(e[a])&&(r[a]=e[a]),r},{},Ft(e)):_l(t,e)})),Sl=Tl,xl=pe(function(t,e){return Sl(wl(t),e)}),kl=xl;function is(t,e){var r=function(l){var c=e.concat([t]);return yl(l,c)?"<Circular>":is(l,c)},a=function(l,c){return Ar(function(u){return Oi(u)+": "+r(l[u])},c.slice().sort())};switch(Object.prototype.toString.call(t)){case"[object Arguments]":return"(function() { return arguments; }("+Ar(r,t).join(", ")+"))";case"[object Array]":return"["+Ar(r,t).concat(a(t,kl(function(l){return/^\d+$/.test(l)},Ft(t)))).join(", ")+"]";case"[object Boolean]":return typeof t=="object"?"new Boolean("+r(t.valueOf())+")":t.toString();case"[object Date]":return"new Date("+(isNaN(t.valueOf())?r(NaN):Oi(vl(t)))+")";case"[object Map]":return"new Map("+r(Array.from(t))+")";case"[object Null]":return"null";case"[object Number]":return typeof t=="object"?"new Number("+r(t.valueOf())+")":1/t===-1/0?"-0":t.toString(10);case"[object Set]":return"new Set("+r(Array.from(t).sort())+")";case"[object String]":return typeof t=="object"?"new String("+r(t.valueOf())+")":Oi(t);case"[object Undefined]":return"undefined";default:if(typeof t.toString=="function"){var o=t.toString();if(o!=="[object Object]")return o}return"{"+a(t,Ft(t)).join(", ")+"}"}}var Bl=ye(function(t){return is(t,[])}),as=Bl,Il=pe(function(t,e){if(t===e)return e;function r(u,f){if(u>f!=f>u)return f>u?f:u}var a=r(t,e);if(a!==void 0)return a;var o=r(typeof t,typeof e);if(o!==void 0)return o===typeof t?t:e;var l=as(t),c=r(l,as(e));return c!==void 0&&c===l?t:e}),Ol=Il,Cl=function(){function t(e,r){this.xf=r,this.f=e}return t.prototype["@@transducer/init"]=Er.init,t.prototype["@@transducer/result"]=Er.result,t.prototype["@@transducer/step"]=function(e,r){return this.xf["@@transducer/step"](e,this.f(r))},t}(),Rl=function(t){return function(e){return new Cl(t,e)}},Ul=Rl,Ll=pe(ki(["fantasy-land/map","map"],Ul,function(t,e){switch(Object.prototype.toString.call(e)){case"[object Function]":return qa(e.length,function(){return t.call(this,e.apply(this,arguments))});case"[object Object]":return ns(function(r,a){return r[a]=t(e[a]),r},{},Ft(e));default:return Ar(t,e)}})),$l=Ll,ss=Number.isInteger||function(t){return t<<0===t};function os(t){return Object.prototype.toString.call(t)==="[object String]"}function us(t,e){var r=t<0?e.length+t:t;return os(e)?e.charAt(r):e[r]}var jl=pe(function(t,e){if(e!=null)return ss(t)?us(t,e):e[t]}),xn=jl,Pl=pe(function(t,e){return $l(xn(t),e)}),Nl=Pl,Ml=ye(function(t){return xi(t)?!0:!t||typeof t!="object"||os(t)?!1:t.length===0?!0:t.length>0?t.hasOwnProperty(0)&&t.hasOwnProperty(t.length-1):!1}),Zl=Ml,ls=typeof Symbol<"u"?Symbol.iterator:"@@iterator";function Fl(t,e,r){return function(a,o,l){if(Zl(l))return t(a,o,l);if(l==null)return o;if(typeof l["fantasy-land/reduce"]=="function")return e(a,o,l,"fantasy-land/reduce");if(l[ls]!=null)return r(a,o,l[ls]());if(typeof l.next=="function")return r(a,o,l);if(typeof l.reduce=="function")return e(a,o,l,"reduce");throw new TypeError("reduce: list must be array or iterable")}}function Dl(t,e,r){for(var a=0,o=r.length;a<o;){if(e=t["@@transducer/step"](e,r[a]),e&&e["@@transducer/reduced"]){e=e["@@transducer/value"];break}a+=1}return t["@@transducer/result"](e)}var zl=pe(function(t,e){return Tn(t.length,function(){return t.apply(e,arguments)})}),Wl=zl;function Vl(t,e,r){for(var a=r.next();!a.done;){if(e=t["@@transducer/step"](e,a.value),e&&e["@@transducer/reduced"]){e=e["@@transducer/value"];break}a=r.next()}return t["@@transducer/result"](e)}function Gl(t,e,r,a){return t["@@transducer/result"](r[a](Wl(t["@@transducer/step"],t),e))}var Kl=Fl(Dl,Gl,Vl),ql=Kl,Hl=function(){function t(e){this.f=e}return t.prototype["@@transducer/init"]=function(){throw new Error("init not implemented on XWrap")},t.prototype["@@transducer/result"]=function(e){return e},t.prototype["@@transducer/step"]=function(e,r){return this.f(e,r)},t}();function Yl(t){return new Hl(t)}var Xl=Si(function(t,e,r){return ql(typeof t=="function"?Yl(t):t,e,r)}),cs=Xl;function Ql(t,e){return function(){return e.call(this,t.apply(this,arguments))}}function hs(t,e){return function(){var r=arguments.length;if(r===0)return e();var a=arguments[r-1];return xi(a)||typeof a[t]!="function"?e.apply(this,arguments):a[t].apply(a,Array.prototype.slice.call(arguments,0,r-1))}}var Jl=Si(hs("slice",function(t,e,r){return Array.prototype.slice.call(r,t,e)})),ec=Jl,tc=ye(hs("tail",ec(1,1/0))),rc=tc;function fs(){if(arguments.length===0)throw new Error("pipe requires at least one argument");return Tn(arguments[0].length,cs(Ql,arguments[0],rc(arguments)))}var nc=pe(function(t,e){return qa(cs(Ol,0,Nl("length",e)),function(){var r=arguments,a=this;return t.apply(a,Ar(function(o){return o.apply(a,r)},e))})}),ic=nc,ac=pe(function(t,e){return e==null||e!==e?t:e}),Ci=ac,sc=function(){function t(e,r){this.xf=r,this.f=e,this.found=!1}return t.prototype["@@transducer/init"]=Er.init,t.prototype["@@transducer/result"]=function(e){return this.found||(e=this.xf["@@transducer/step"](e,void 0)),this.xf["@@transducer/result"](e)},t.prototype["@@transducer/step"]=function(e,r){return this.f(r)&&(this.found=!0,e=al(this.xf["@@transducer/step"](e,r))),e},t}();function oc(t){return function(e){return new sc(t,e)}}var uc=pe(ki(["find"],oc,function(t,e){for(var r=0,a=e.length;r<a;){if(t(e[r]))return e[r];r+=1}})),lc=uc,cc=ye(function(t){return ic(function(){return Array.prototype.slice.call(arguments,0)},t)}),hc=cc;function fc(t,e){for(var r=e,a=0;a<t.length;a+=1){if(r==null)return;var o=t[a];ss(o)?r=us(o,r):r=r[o]}return r}var dc=pe(fc),ds=dc,pc=Si(function(t,e,r){return rs(t,xn(e,r))}),gc=pc,kn=class extends Error{name="InvalidSchedulerLocation"},yc=class extends Error{name="SchedulerTagNotFound"},mc=class extends Error{name="TransactionNotFound"};function Ri(t=""){return t=t.trim(),t.endsWith("/")?Ri(t.slice(0,-1)):t}var vc=(t,{maxRetries:e=0,delay:r=300})=>{let a=(o,l)=>Promise.resolve().then(t).catch(c=>{if(o>=e)return Promise.reject(c);let u=o+1,f=l+l;return new Promise(p=>setTimeout(p,l)).then(()=>a(u,f))});return a(0,r)},wc=t=>{if(t.ok)return t;throw t},_c="Url",bc="Time-To-Live",Ec="Scheduler",Ui=t=>fs(Ci([]),lc(gc(t,"name")),Ci({}),xn("value")),ps=t=>fs(e=>{if(!e)throw new mc(t);return e},xn("tags"),Ci([]));function gs({fetch:t,GRAPHQL_URL:e,GRAPHQL_MAX_RETRIES:r=0,GRAPHQL_RETRY_BACKOFF:a=300}){return async({query:o,variables:l})=>vc(()=>t(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:o,variables:l})}).then(wc).then(c=>c.json()),{maxRetries:r,delay:a})}function Ac({fetch:t,GRAPHQL_URL:e,GRAPHQL_MAX_RETRIES:r,GRAPHQL_RETRY_BACKOFF:a}){let o=gs({fetch:t,GRAPHQL_URL:e,GRAPHQL_MAX_RETRIES:r,GRAPHQL_RETRY_BACKOFF:a}),l=ys({fetch:t,GRAPHQL_URL:e,GRAPHQL_MAX_RETRIES:r,GRAPHQL_RETRY_BACKOFF:a}),c=`
    query GetTransactions ($transactionIds: [ID!]!) {
      transactions(ids: $transactionIds) {
        edges {
          node {
            tags {
              name
              value
            }
          }
        }
      }
    }
  `,u="https://su-router.ao-testnet.xyz";return async f=>await t(`https://su-router.ao-testnet.xyz?process-id=${f}`).then(b=>b.ok?b.json().then(({address:w})=>({url:u,ttl:1728e5,address:w})):void 0)||o({query:c,variables:{transactionIds:[f]}}).then(ds(["data","transactions","edges","0","node"])).then(ps(`Process ${f} was not found on gateway`)).then(Ui(Ec)).then(b=>{if(!b)throw new yc('No "Scheduler" tag found on process');return l(b)})}function ys({fetch:t,GRAPHQL_URL:e,GRAPHQL_MAX_RETRIES:r,GRAPHQL_RETRY_BACKOFF:a}){let o=gs({fetch:t,GRAPHQL_URL:e,GRAPHQL_MAX_RETRIES:r,GRAPHQL_RETRY_BACKOFF:a}),l=`
    query GetSchedulerLocation ($owner: String!) {
      transactions (
        owners: [$owner]
        tags: [
          { name: "Data-Protocol", values: ["ao"] },
          { name: "Type", values: ["Scheduler-Location"] }
        ]
        # Only need the most recent Scheduler-Location
        sort: HEIGHT_DESC
        first: 1
      ) {
        edges {
          node {
            tags {
              name
              value
            }
          }
        }
      }
    }
  `;return async c=>o({query:l,variables:{owner:c}}).then(ds(["data","transactions","edges","0","node"])).then(ps(`Could not find 'Scheduler-Location' owner by wallet ${c}`)).then(hc([Ui(_c),Ui(bc)])).then(([u,f])=>{if(!u)throw new kn('No "Url" tag found on Scheduler-Location');if(!f)throw new kn('No "Time-To-Live" tag found on Scheduler-Location');return{url:u,ttl:f,address:c}})}var Dt=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,ms=new Set,Li=typeof process=="object"&&process?process:{},vs=(t,e,r,a)=>{typeof Li.emitWarning=="function"?Li.emitWarning(t,e,r,a):console.error(`[${r}] ${e}: ${t}`)},Bn=globalThis.AbortController,ws=globalThis.AbortSignal;if(typeof Bn>"u"){ws=class{onabort;_onabort=[];reason;aborted=!1;addEventListener(r,a){this._onabort.push(a)}},Bn=class{constructor(){e()}signal=new ws;abort(r){if(!this.signal.aborted){this.signal.reason=r,this.signal.aborted=!0;for(let a of this.signal._onabort)a(r);this.signal.onabort?.(r)}}};let t=Li.env?.LRU_CACHE_IGNORE_AC_WARNING!=="1",e=()=>{t&&(t=!1,vs("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",e))}}var Tc=t=>!ms.has(t),Dy=Symbol("type"),gt=t=>t&&t===Math.floor(t)&&t>0&&isFinite(t),_s=t=>gt(t)?t<=Math.pow(2,8)?Uint8Array:t<=Math.pow(2,16)?Uint16Array:t<=Math.pow(2,32)?Uint32Array:t<=Number.MAX_SAFE_INTEGER?In:null:null,In=class extends Array{constructor(t){super(t),this.fill(0)}},Sc=class wn{heap;length;static#a=!1;static create(e){let r=_s(e);if(!r)return[];wn.#a=!0;let a=new wn(e,r);return wn.#a=!1,a}constructor(e,r){if(!wn.#a)throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new r(e),this.length=0}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}},xc=class Ho{#a;#u;#f;#d;#I;ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#i;#m;#n;#r;#e;#c;#p;#l;#s;#v;#o;#w;#_;#g;#b;#S;#h;static unsafeExposeInternals(e){return{starts:e.#_,ttls:e.#g,sizes:e.#w,keyMap:e.#n,keyList:e.#r,valList:e.#e,next:e.#c,prev:e.#p,get head(){return e.#l},get tail(){return e.#s},free:e.#v,isBackgroundFetch:r=>e.#t(r),backgroundFetch:(r,a,o,l)=>e.#R(r,a,o,l),moveToTail:r=>e.#B(r),indexes:r=>e.#E(r),rindexes:r=>e.#A(r),isStale:r=>e.#y(r)}}get max(){return this.#a}get maxSize(){return this.#u}get calculatedSize(){return this.#m}get size(){return this.#i}get fetchMethod(){return this.#I}get dispose(){return this.#f}get disposeAfter(){return this.#d}constructor(e){let{max:r=0,ttl:a,ttlResolution:o=1,ttlAutopurge:l,updateAgeOnGet:c,updateAgeOnHas:u,allowStale:f,dispose:p,disposeAfter:b,noDisposeOnSet:w,noUpdateTTL:v,maxSize:E=0,maxEntrySize:m=0,sizeCalculation:_,fetchMethod:A,noDeleteOnFetchRejection:S,noDeleteOnStaleGet:O,allowStaleOnFetchRejection:x,allowStaleOnFetchAbort:C,ignoreFetchAbort:Z}=e;if(r!==0&&!gt(r))throw new TypeError("max option must be a nonnegative integer");let L=r?_s(r):Array;if(!L)throw new Error("invalid max value: "+r);if(this.#a=r,this.#u=E,this.maxEntrySize=m||this.#u,this.sizeCalculation=_,this.sizeCalculation){if(!this.#u&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(A!==void 0&&typeof A!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.#I=A,this.#S=!!A,this.#n=new Map,this.#r=new Array(r).fill(void 0),this.#e=new Array(r).fill(void 0),this.#c=new L(r),this.#p=new L(r),this.#l=0,this.#s=0,this.#v=Sc.create(r),this.#i=0,this.#m=0,typeof p=="function"&&(this.#f=p),typeof b=="function"?(this.#d=b,this.#o=[]):(this.#d=void 0,this.#o=void 0),this.#b=!!this.#f,this.#h=!!this.#d,this.noDisposeOnSet=!!w,this.noUpdateTTL=!!v,this.noDeleteOnFetchRejection=!!S,this.allowStaleOnFetchRejection=!!x,this.allowStaleOnFetchAbort=!!C,this.ignoreFetchAbort=!!Z,this.maxEntrySize!==0){if(this.#u!==0&&!gt(this.#u))throw new TypeError("maxSize must be a positive integer if specified");if(!gt(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.#N()}if(this.allowStale=!!f,this.noDeleteOnStaleGet=!!O,this.updateAgeOnGet=!!c,this.updateAgeOnHas=!!u,this.ttlResolution=gt(o)||o===0?o:1,this.ttlAutopurge=!!l,this.ttl=a||0,this.ttl){if(!gt(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.#U()}if(this.#a===0&&this.ttl===0&&this.#u===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#a&&!this.#u){let ce="LRU_CACHE_UNBOUNDED";Tc(ce)&&(ms.add(ce),vs("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",ce,Ho))}}getRemainingTTL(e){return this.#n.has(e)?1/0:0}#U(){let e=new In(this.#a),r=new In(this.#a);this.#g=e,this.#_=r,this.#L=(l,c,u=Dt.now())=>{if(r[l]=c!==0?u:0,e[l]=c,c!==0&&this.ttlAutopurge){let f=setTimeout(()=>{this.#y(l)&&this.delete(this.#r[l])},c+1);f.unref&&f.unref()}},this.#x=l=>{r[l]=e[l]!==0?Dt.now():0},this.#T=(l,c)=>{if(e[c]){let u=e[c],f=r[c];if(!u||!f)return;l.ttl=u,l.start=f,l.now=a||o();let p=l.now-f;l.remainingTTL=u-p}};let a=0,o=()=>{let l=Dt.now();if(this.ttlResolution>0){a=l;let c=setTimeout(()=>a=0,this.ttlResolution);c.unref&&c.unref()}return l};this.getRemainingTTL=l=>{let c=this.#n.get(l);if(c===void 0)return 0;let u=e[c],f=r[c];if(!u||!f)return 1/0;let p=(a||o())-f;return u-p},this.#y=l=>{let c=r[l],u=e[l];return!!u&&!!c&&(a||o())-c>u}}#x=()=>{};#T=()=>{};#L=()=>{};#y=()=>!1;#N(){let e=new In(this.#a);this.#m=0,this.#w=e,this.#k=r=>{this.#m-=e[r],e[r]=0},this.#$=(r,a,o,l)=>{if(this.#t(a))return 0;if(!gt(o))if(l){if(typeof l!="function")throw new TypeError("sizeCalculation must be a function");if(o=l(a,r),!gt(o))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return o},this.#O=(r,a,o)=>{if(e[r]=a,this.#u){let l=this.#u-e[r];for(;this.#m>l;)this.#C(!0)}this.#m+=e[r],o&&(o.entrySize=a,o.totalCalculatedSize=this.#m)}}#k=e=>{};#O=(e,r,a)=>{};#$=(e,r,a,o)=>{if(a||o)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#E({allowStale:e=this.allowStale}={}){if(this.#i)for(let r=this.#s;!(!this.#j(r)||((e||!this.#y(r))&&(yield r),r===this.#l));)r=this.#p[r]}*#A({allowStale:e=this.allowStale}={}){if(this.#i)for(let r=this.#l;!(!this.#j(r)||((e||!this.#y(r))&&(yield r),r===this.#s));)r=this.#c[r]}#j(e){return e!==void 0&&this.#n.get(this.#r[e])===e}*entries(){for(let e of this.#E())this.#e[e]!==void 0&&this.#r[e]!==void 0&&!this.#t(this.#e[e])&&(yield[this.#r[e],this.#e[e]])}*rentries(){for(let e of this.#A())this.#e[e]!==void 0&&this.#r[e]!==void 0&&!this.#t(this.#e[e])&&(yield[this.#r[e],this.#e[e]])}*keys(){for(let e of this.#E()){let r=this.#r[e];r!==void 0&&!this.#t(this.#e[e])&&(yield r)}}*rkeys(){for(let e of this.#A()){let r=this.#r[e];r!==void 0&&!this.#t(this.#e[e])&&(yield r)}}*values(){for(let e of this.#E())this.#e[e]!==void 0&&!this.#t(this.#e[e])&&(yield this.#e[e])}*rvalues(){for(let e of this.#A())this.#e[e]!==void 0&&!this.#t(this.#e[e])&&(yield this.#e[e])}[Symbol.iterator](){return this.entries()}[Symbol.toStringTag]="LRUCache";find(e,r={}){for(let a of this.#E()){let o=this.#e[a],l=this.#t(o)?o.__staleWhileFetching:o;if(l!==void 0&&e(l,this.#r[a],this))return this.get(this.#r[a],r)}}forEach(e,r=this){for(let a of this.#E()){let o=this.#e[a],l=this.#t(o)?o.__staleWhileFetching:o;l!==void 0&&e.call(r,l,this.#r[a],this)}}rforEach(e,r=this){for(let a of this.#A()){let o=this.#e[a],l=this.#t(o)?o.__staleWhileFetching:o;l!==void 0&&e.call(r,l,this.#r[a],this)}}purgeStale(){let e=!1;for(let r of this.#A({allowStale:!0}))this.#y(r)&&(this.delete(this.#r[r]),e=!0);return e}info(e){let r=this.#n.get(e);if(r===void 0)return;let a=this.#e[r],o=this.#t(a)?a.__staleWhileFetching:a;if(o===void 0)return;let l={value:o};if(this.#g&&this.#_){let c=this.#g[r],u=this.#_[r];if(c&&u){let f=c-(Dt.now()-u);l.ttl=f,l.start=Date.now()}}return this.#w&&(l.size=this.#w[r]),l}dump(){let e=[];for(let r of this.#E({allowStale:!0})){let a=this.#r[r],o=this.#e[r],l=this.#t(o)?o.__staleWhileFetching:o;if(l===void 0||a===void 0)continue;let c={value:l};if(this.#g&&this.#_){c.ttl=this.#g[r];let u=Dt.now()-this.#_[r];c.start=Math.floor(Date.now()-u)}this.#w&&(c.size=this.#w[r]),e.unshift([a,c])}return e}load(e){this.clear();for(let[r,a]of e){if(a.start){let o=Date.now()-a.start;a.start=Dt.now()-o}this.set(r,a.value,a)}}set(e,r,a={}){if(r===void 0)return this.delete(e),this;let{ttl:o=this.ttl,start:l,noDisposeOnSet:c=this.noDisposeOnSet,sizeCalculation:u=this.sizeCalculation,status:f}=a,{noUpdateTTL:p=this.noUpdateTTL}=a,b=this.#$(e,r,a.size||0,u);if(this.maxEntrySize&&b>this.maxEntrySize)return f&&(f.set="miss",f.maxEntrySizeExceeded=!0),this.delete(e),this;let w=this.#i===0?void 0:this.#n.get(e);if(w===void 0)w=this.#i===0?this.#s:this.#v.length!==0?this.#v.pop():this.#i===this.#a?this.#C(!1):this.#i,this.#r[w]=e,this.#e[w]=r,this.#n.set(e,w),this.#c[this.#s]=w,this.#p[w]=this.#s,this.#s=w,this.#i++,this.#O(w,b,f),f&&(f.set="add"),p=!1;else{this.#B(w);let v=this.#e[w];if(r!==v){if(this.#S&&this.#t(v)){v.__abortController.abort(new Error("replaced"));let{__staleWhileFetching:E}=v;E!==void 0&&!c&&(this.#b&&this.#f?.(E,e,"set"),this.#h&&this.#o?.push([E,e,"set"]))}else c||(this.#b&&this.#f?.(v,e,"set"),this.#h&&this.#o?.push([v,e,"set"]));if(this.#k(w),this.#O(w,b,f),this.#e[w]=r,f){f.set="replace";let E=v&&this.#t(v)?v.__staleWhileFetching:v;E!==void 0&&(f.oldValue=E)}}else f&&(f.set="update")}if(o!==0&&!this.#g&&this.#U(),this.#g&&(p||this.#L(w,o,l),f&&this.#T(f,w)),!c&&this.#h&&this.#o){let v=this.#o,E;for(;E=v?.shift();)this.#d?.(...E)}return this}pop(){try{for(;this.#i;){let e=this.#e[this.#l];if(this.#C(!0),this.#t(e)){if(e.__staleWhileFetching)return e.__staleWhileFetching}else if(e!==void 0)return e}}finally{if(this.#h&&this.#o){let e=this.#o,r;for(;r=e?.shift();)this.#d?.(...r)}}}#C(e){let r=this.#l,a=this.#r[r],o=this.#e[r];return this.#S&&this.#t(o)?o.__abortController.abort(new Error("evicted")):(this.#b||this.#h)&&(this.#b&&this.#f?.(o,a,"evict"),this.#h&&this.#o?.push([o,a,"evict"])),this.#k(r),e&&(this.#r[r]=void 0,this.#e[r]=void 0,this.#v.push(r)),this.#i===1?(this.#l=this.#s=0,this.#v.length=0):this.#l=this.#c[r],this.#n.delete(a),this.#i--,r}has(e,r={}){let{updateAgeOnHas:a=this.updateAgeOnHas,status:o}=r,l=this.#n.get(e);if(l!==void 0){let c=this.#e[l];if(this.#t(c)&&c.__staleWhileFetching===void 0)return!1;if(this.#y(l))o&&(o.has="stale",this.#T(o,l));else return a&&this.#x(l),o&&(o.has="hit",this.#T(o,l)),!0}else o&&(o.has="miss");return!1}peek(e,r={}){let{allowStale:a=this.allowStale}=r,o=this.#n.get(e);if(o===void 0||!a&&this.#y(o))return;let l=this.#e[o];return this.#t(l)?l.__staleWhileFetching:l}#R(e,r,a,o){let l=r===void 0?void 0:this.#e[r];if(this.#t(l))return l;let c=new Bn,{signal:u}=a;u?.addEventListener("abort",()=>c.abort(u.reason),{signal:c.signal});let f={signal:c.signal,options:a,context:o},p=(_,A=!1)=>{let{aborted:S}=c.signal,O=a.ignoreFetchAbort&&_!==void 0;if(a.status&&(S&&!A?(a.status.fetchAborted=!0,a.status.fetchError=c.signal.reason,O&&(a.status.fetchAbortIgnored=!0)):a.status.fetchResolved=!0),S&&!O&&!A)return w(c.signal.reason);let x=E;return this.#e[r]===E&&(_===void 0?x.__staleWhileFetching?this.#e[r]=x.__staleWhileFetching:this.delete(e):(a.status&&(a.status.fetchUpdated=!0),this.set(e,_,f.options))),_},b=_=>(a.status&&(a.status.fetchRejected=!0,a.status.fetchError=_),w(_)),w=_=>{let{aborted:A}=c.signal,S=A&&a.allowStaleOnFetchAbort,O=S||a.allowStaleOnFetchRejection,x=O||a.noDeleteOnFetchRejection,C=E;if(this.#e[r]===E&&(!x||C.__staleWhileFetching===void 0?this.delete(e):S||(this.#e[r]=C.__staleWhileFetching)),O)return a.status&&C.__staleWhileFetching!==void 0&&(a.status.returnedStale=!0),C.__staleWhileFetching;if(C.__returned===C)throw _},v=(_,A)=>{let S=this.#I?.(e,l,f);S&&S instanceof Promise&&S.then(O=>_(O===void 0?void 0:O),A),c.signal.addEventListener("abort",()=>{(!a.ignoreFetchAbort||a.allowStaleOnFetchAbort)&&(_(void 0),a.allowStaleOnFetchAbort&&(_=O=>p(O,!0)))})};a.status&&(a.status.fetchDispatched=!0);let E=new Promise(v).then(p,b),m=Object.assign(E,{__abortController:c,__staleWhileFetching:l,__returned:void 0});return r===void 0?(this.set(e,m,{...f.options,status:void 0}),r=this.#n.get(e)):this.#e[r]=m,m}#t(e){if(!this.#S)return!1;let r=e;return!!r&&r instanceof Promise&&r.hasOwnProperty("__staleWhileFetching")&&r.__abortController instanceof Bn}async fetch(e,r={}){let{allowStale:a=this.allowStale,updateAgeOnGet:o=this.updateAgeOnGet,noDeleteOnStaleGet:l=this.noDeleteOnStaleGet,ttl:c=this.ttl,noDisposeOnSet:u=this.noDisposeOnSet,size:f=0,sizeCalculation:p=this.sizeCalculation,noUpdateTTL:b=this.noUpdateTTL,noDeleteOnFetchRejection:w=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:v=this.allowStaleOnFetchRejection,ignoreFetchAbort:E=this.ignoreFetchAbort,allowStaleOnFetchAbort:m=this.allowStaleOnFetchAbort,context:_,forceRefresh:A=!1,status:S,signal:O}=r;if(!this.#S)return S&&(S.fetch="get"),this.get(e,{allowStale:a,updateAgeOnGet:o,noDeleteOnStaleGet:l,status:S});let x={allowStale:a,updateAgeOnGet:o,noDeleteOnStaleGet:l,ttl:c,noDisposeOnSet:u,size:f,sizeCalculation:p,noUpdateTTL:b,noDeleteOnFetchRejection:w,allowStaleOnFetchRejection:v,allowStaleOnFetchAbort:m,ignoreFetchAbort:E,status:S,signal:O},C=this.#n.get(e);if(C===void 0){S&&(S.fetch="miss");let Z=this.#R(e,C,x,_);return Z.__returned=Z}else{let Z=this.#e[C];if(this.#t(Z)){let Te=a&&Z.__staleWhileFetching!==void 0;return S&&(S.fetch="inflight",Te&&(S.returnedStale=!0)),Te?Z.__staleWhileFetching:Z.__returned=Z}let L=this.#y(C);if(!A&&!L)return S&&(S.fetch="hit"),this.#B(C),o&&this.#x(C),S&&this.#T(S,C),Z;let ce=this.#R(e,C,x,_),Ie=ce.__staleWhileFetching!==void 0&&a;return S&&(S.fetch=L?"stale":"refresh",Ie&&L&&(S.returnedStale=!0)),Ie?ce.__staleWhileFetching:ce.__returned=ce}}get(e,r={}){let{allowStale:a=this.allowStale,updateAgeOnGet:o=this.updateAgeOnGet,noDeleteOnStaleGet:l=this.noDeleteOnStaleGet,status:c}=r,u=this.#n.get(e);if(u!==void 0){let f=this.#e[u],p=this.#t(f);return c&&this.#T(c,u),this.#y(u)?(c&&(c.get="stale"),p?(c&&a&&f.__staleWhileFetching!==void 0&&(c.returnedStale=!0),a?f.__staleWhileFetching:void 0):(l||this.delete(e),c&&a&&(c.returnedStale=!0),a?f:void 0)):(c&&(c.get="hit"),p?f.__staleWhileFetching:(this.#B(u),o&&this.#x(u),f))}else c&&(c.get="miss")}#P(e,r){this.#p[r]=e,this.#c[e]=r}#B(e){e!==this.#s&&(e===this.#l?this.#l=this.#c[e]:this.#P(this.#p[e],this.#c[e]),this.#P(this.#s,e),this.#s=e)}delete(e){let r=!1;if(this.#i!==0){let a=this.#n.get(e);if(a!==void 0)if(r=!0,this.#i===1)this.clear();else{this.#k(a);let o=this.#e[a];if(this.#t(o)?o.__abortController.abort(new Error("deleted")):(this.#b||this.#h)&&(this.#b&&this.#f?.(o,e,"delete"),this.#h&&this.#o?.push([o,e,"delete"])),this.#n.delete(e),this.#r[a]=void 0,this.#e[a]=void 0,a===this.#s)this.#s=this.#p[a];else if(a===this.#l)this.#l=this.#c[a];else{let l=this.#p[a];this.#c[l]=this.#c[a];let c=this.#c[a];this.#p[c]=this.#p[a]}this.#i--,this.#v.push(a)}}if(this.#h&&this.#o?.length){let a=this.#o,o;for(;o=a?.shift();)this.#d?.(...o)}return r}clear(){for(let e of this.#A({allowStale:!0})){let r=this.#e[e];if(this.#t(r))r.__abortController.abort(new Error("deleted"));else{let a=this.#r[e];this.#b&&this.#f?.(r,a,"delete"),this.#h&&this.#o?.push([r,a,"delete"])}}if(this.#n.clear(),this.#e.fill(void 0),this.#r.fill(void 0),this.#g&&this.#_&&(this.#g.fill(0),this.#_.fill(0)),this.#w&&this.#w.fill(0),this.#l=0,this.#s=0,this.#v.length=0,this.#m=0,this.#i=0,this.#h&&this.#o){let e=this.#o,r;for(;r=e?.shift();)this.#d?.(...r)}}};function kc({size:t}){return new xc({max:t,maxSize:5e6,sizeCalculation:e=>JSON.stringify(e).length,allowStale:!0})}function Bc({cache:t}){return async e=>{if(t.max)return t.get(e)}}function Ic({cache:t}){return async(e,{url:r,address:a},o)=>{if(t.max)return t.set(e,{url:r,address:a},{ttl:o})}}function Oc({cache:t}){return async e=>{if(t.max)return t.get(e)}}function Cc({cache:t}){return async(e,r,a)=>{if(t.max)return t.set(e,{url:r,address:e,ttl:a},{ttl:a})}}function Rc({fetch:t}){return async(e,r)=>{let a=await t(`${e}?process-id=${r}`,{method:"GET",redirect:"manual"});return[301,302,307,308].includes(a.status)?new URL(a.headers.get("Location")).origin:e}}var te;(function(t){t.assertEqual=o=>o;function e(o){}t.assertIs=e;function r(o){throw new Error}t.assertNever=r,t.arrayToEnum=o=>{let l={};for(let c of o)l[c]=c;return l},t.getValidEnumValues=o=>{let l=t.objectKeys(o).filter(u=>typeof o[o[u]]!="number"),c={};for(let u of l)c[u]=o[u];return t.objectValues(c)},t.objectValues=o=>t.objectKeys(o).map(function(l){return o[l]}),t.objectKeys=typeof Object.keys=="function"?o=>Object.keys(o):o=>{let l=[];for(let c in o)Object.prototype.hasOwnProperty.call(o,c)&&l.push(c);return l},t.find=(o,l)=>{for(let c of o)if(l(c))return c},t.isInteger=typeof Number.isInteger=="function"?o=>Number.isInteger(o):o=>typeof o=="number"&&isFinite(o)&&Math.floor(o)===o;function a(o,l=" | "){return o.map(c=>typeof c=="string"?`'${c}'`:c).join(l)}t.joinValues=a,t.jsonStringifyReplacer=(o,l)=>typeof l=="bigint"?l.toString():l})(te||(te={}));var $i;(function(t){t.mergeShapes=(e,r)=>({...e,...r})})($i||($i={}));var N=te.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),yt=t=>{switch(typeof t){case"undefined":return N.undefined;case"string":return N.string;case"number":return isNaN(t)?N.nan:N.number;case"boolean":return N.boolean;case"function":return N.function;case"bigint":return N.bigint;case"symbol":return N.symbol;case"object":return Array.isArray(t)?N.array:t===null?N.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?N.promise:typeof Map<"u"&&t instanceof Map?N.map:typeof Set<"u"&&t instanceof Set?N.set:typeof Date<"u"&&t instanceof Date?N.date:N.object;default:return N.unknown}},I=te.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),Uc=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:"),$e=class Yo extends Error{constructor(e){super(),this.issues=[],this.addIssue=a=>{this.issues=[...this.issues,a]},this.addIssues=(a=[])=>{this.issues=[...this.issues,...a]};let r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){let r=e||function(l){return l.message},a={_errors:[]},o=l=>{for(let c of l.issues)if(c.code==="invalid_union")c.unionErrors.map(o);else if(c.code==="invalid_return_type")o(c.returnTypeError);else if(c.code==="invalid_arguments")o(c.argumentsError);else if(c.path.length===0)a._errors.push(r(c));else{let u=a,f=0;for(;f<c.path.length;){let p=c.path[f];f===c.path.length-1?(u[p]=u[p]||{_errors:[]},u[p]._errors.push(r(c))):u[p]=u[p]||{_errors:[]},u=u[p],f++}}};return o(this),a}static assert(e){if(!(e instanceof Yo))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,te.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=r=>r.message){let r={},a=[];for(let o of this.issues)o.path.length>0?(r[o.path[0]]=r[o.path[0]]||[],r[o.path[0]].push(e(o))):a.push(e(o));return{formErrors:a,fieldErrors:r}}get formErrors(){return this.flatten()}};$e.create=t=>new $e(t);var zt=(t,e)=>{let r;switch(t.code){case I.invalid_type:t.received===N.undefined?r="Required":r=`Expected ${t.expected}, received ${t.received}`;break;case I.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(t.expected,te.jsonStringifyReplacer)}`;break;case I.unrecognized_keys:r=`Unrecognized key(s) in object: ${te.joinValues(t.keys,", ")}`;break;case I.invalid_union:r="Invalid input";break;case I.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${te.joinValues(t.options)}`;break;case I.invalid_enum_value:r=`Invalid enum value. Expected ${te.joinValues(t.options)}, received '${t.received}'`;break;case I.invalid_arguments:r="Invalid function arguments";break;case I.invalid_return_type:r="Invalid function return type";break;case I.invalid_date:r="Invalid date";break;case I.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(r=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?r=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?r=`Invalid input: must end with "${t.validation.endsWith}"`:te.assertNever(t.validation):t.validation!=="regex"?r=`Invalid ${t.validation}`:r="Invalid";break;case I.too_small:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:r="Invalid input";break;case I.too_big:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?r=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:r="Invalid input";break;case I.custom:r="Invalid input";break;case I.invalid_intersection_types:r="Intersection results could not be merged";break;case I.not_multiple_of:r=`Number must be a multiple of ${t.multipleOf}`;break;case I.not_finite:r="Number must be finite";break;default:r=e.defaultError,te.assertNever(t)}return{message:r}},bs=zt;function Lc(t){bs=t}function On(){return bs}var Cn=t=>{let{data:e,path:r,errorMaps:a,issueData:o}=t,l=[...r,...o.path||[]],c={...o,path:l};if(o.message!==void 0)return{...o,path:l,message:o.message};let u="",f=a.filter(p=>!!p).slice().reverse();for(let p of f)u=p(c,{data:e,defaultError:u}).message;return{...o,path:l,message:u}},$c=[];function $(t,e){let r=On(),a=Cn({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,r,r===zt?void 0:zt].filter(o=>!!o)});t.common.issues.push(a)}var _e=class Xo{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,r){let a=[];for(let o of r){if(o.status==="aborted")return q;o.status==="dirty"&&e.dirty(),a.push(o.value)}return{status:e.value,value:a}}static async mergeObjectAsync(e,r){let a=[];for(let o of r){let l=await o.key,c=await o.value;a.push({key:l,value:c})}return Xo.mergeObjectSync(e,a)}static mergeObjectSync(e,r){let a={};for(let o of r){let{key:l,value:c}=o;if(l.status==="aborted"||c.status==="aborted")return q;l.status==="dirty"&&e.dirty(),c.status==="dirty"&&e.dirty(),l.value!=="__proto__"&&(typeof c.value<"u"||o.alwaysSet)&&(a[l.value]=c.value)}return{status:e.value,value:a}}},q=Object.freeze({status:"aborted"}),Rn=t=>({status:"dirty",value:t}),me=t=>({status:"valid",value:t}),ji=t=>t.status==="aborted",Pi=t=>t.status==="dirty",Sr=t=>t.status==="valid",Un=t=>typeof Promise<"u"&&t instanceof Promise;function Ln(t,e,r,a){if(r==="a"&&!a)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!a:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?a:r==="a"?a.call(t):a?a.value:e.get(t)}function Es(t,e,r,a,o){if(a==="m")throw new TypeError("Private method is not writable");if(a==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return a==="a"?o.call(t,r):o?o.value=r:e.set(t,r),r}var D;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e?.message})(D||(D={}));var xr,kr,De=class{constructor(t,e,r,a){this._cachedPath=[],this.parent=t,this.data=e,this._path=r,this._key=a}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},As=(t,e)=>{if(Sr(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let r=new $e(t.common.issues);return this._error=r,this._error}}};function Y(t){if(!t)return{};let{errorMap:e,invalid_type_error:r,required_error:a,description:o}=t;if(e&&(r||a))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:o}:{errorMap:(l,c)=>{var u,f;let{message:p}=t;return l.code==="invalid_enum_value"?{message:p??c.defaultError}:typeof c.data>"u"?{message:(u=p??a)!==null&&u!==void 0?u:c.defaultError}:l.code!=="invalid_type"?{message:c.defaultError}:{message:(f=p??r)!==null&&f!==void 0?f:c.defaultError}},description:o}}var Q=class{constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(t){return yt(t.data)}_getOrReturnCtx(t,e){return e||{common:t.parent.common,data:t.data,parsedType:yt(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new _e,ctx:{common:t.parent.common,data:t.data,parsedType:yt(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){let e=this._parse(t);if(Un(e))throw new Error("Synchronous parse encountered promise.");return e}_parseAsync(t){let e=this._parse(t);return Promise.resolve(e)}parse(t,e){let r=this.safeParse(t,e);if(r.success)return r.data;throw r.error}safeParse(t,e){var r;let a={common:{issues:[],async:(r=e?.async)!==null&&r!==void 0?r:!1,contextualErrorMap:e?.errorMap},path:e?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:yt(t)},o=this._parseSync({data:t,path:a.path,parent:a});return As(a,o)}async parseAsync(t,e){let r=await this.safeParseAsync(t,e);if(r.success)return r.data;throw r.error}async safeParseAsync(t,e){let r={common:{issues:[],contextualErrorMap:e?.errorMap,async:!0},path:e?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:yt(t)},a=this._parse({data:t,path:r.path,parent:r}),o=await(Un(a)?a:Promise.resolve(a));return As(r,o)}refine(t,e){let r=a=>typeof e=="string"||typeof e>"u"?{message:e}:typeof e=="function"?e(a):e;return this._refinement((a,o)=>{let l=t(a),c=()=>o.addIssue({code:I.custom,...r(a)});return typeof Promise<"u"&&l instanceof Promise?l.then(u=>u?!0:(c(),!1)):l?!0:(c(),!1)})}refinement(t,e){return this._refinement((r,a)=>t(r)?!0:(a.addIssue(typeof e=="function"?e(r,a):e),!1))}_refinement(t){return new je({schema:this,typeName:V.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}optional(){return ze.create(this,this._def)}nullable(){return wt.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Ot.create(this,this._def)}promise(){return Kt.create(this,this._def)}or(t){return Lr.create([this,t],this._def)}and(t){return $r.create(this,t,this._def)}transform(t){return new je({...Y(this._def),schema:this,typeName:V.ZodEffects,effect:{type:"transform",transform:t}})}default(t){let e=typeof t=="function"?t:()=>t;return new Zr({...Y(this._def),innerType:this,defaultValue:e,typeName:V.ZodDefault})}brand(){return new Zi({typeName:V.ZodBranded,type:this,...Y(this._def)})}catch(t){let e=typeof t=="function"?t:()=>t;return new Fr({...Y(this._def),innerType:this,catchValue:e,typeName:V.ZodCatch})}describe(t){let e=this.constructor;return new e({...this._def,description:t})}pipe(t){return Fi.create(this,t)}readonly(){return Dr.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},jc=/^c[^\s-]{8,}$/i,Pc=/^[0-9a-z]+$/,Nc=/^[0-9A-HJKMNP-TV-Z]{26}$/,Mc=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Zc=/^[a-z0-9_-]{21}$/i,Fc=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Dc=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,zc="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",Ni,Wc=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Vc=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,Gc=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Ts="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Kc=new RegExp(`^${Ts}$`);function Ss(t){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`),e}function qc(t){return new RegExp(`^${Ss(t)}$`)}function xs(t){let e=`${Ts}T${Ss(t)}`,r=[];return r.push(t.local?"Z?":"Z"),t.offset&&r.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${r.join("|")})`,new RegExp(`^${e}$`)}function Hc(t,e){return!!((e==="v4"||!e)&&Wc.test(t)||(e==="v6"||!e)&&Vc.test(t))}var Wt=class _n extends Q{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==N.string){let o=this._getOrReturnCtx(e);return $(o,{code:I.invalid_type,expected:N.string,received:o.parsedType}),q}let r=new _e,a;for(let o of this._def.checks)if(o.kind==="min")e.data.length<o.value&&(a=this._getOrReturnCtx(e,a),$(a,{code:I.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),r.dirty());else if(o.kind==="max")e.data.length>o.value&&(a=this._getOrReturnCtx(e,a),$(a,{code:I.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),r.dirty());else if(o.kind==="length"){let l=e.data.length>o.value,c=e.data.length<o.value;(l||c)&&(a=this._getOrReturnCtx(e,a),l?$(a,{code:I.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}):c&&$(a,{code:I.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}),r.dirty())}else if(o.kind==="email")Dc.test(e.data)||(a=this._getOrReturnCtx(e,a),$(a,{validation:"email",code:I.invalid_string,message:o.message}),r.dirty());else if(o.kind==="emoji")Ni||(Ni=new RegExp(zc,"u")),Ni.test(e.data)||(a=this._getOrReturnCtx(e,a),$(a,{validation:"emoji",code:I.invalid_string,message:o.message}),r.dirty());else if(o.kind==="uuid")Mc.test(e.data)||(a=this._getOrReturnCtx(e,a),$(a,{validation:"uuid",code:I.invalid_string,message:o.message}),r.dirty());else if(o.kind==="nanoid")Zc.test(e.data)||(a=this._getOrReturnCtx(e,a),$(a,{validation:"nanoid",code:I.invalid_string,message:o.message}),r.dirty());else if(o.kind==="cuid")jc.test(e.data)||(a=this._getOrReturnCtx(e,a),$(a,{validation:"cuid",code:I.invalid_string,message:o.message}),r.dirty());else if(o.kind==="cuid2")Pc.test(e.data)||(a=this._getOrReturnCtx(e,a),$(a,{validation:"cuid2",code:I.invalid_string,message:o.message}),r.dirty());else if(o.kind==="ulid")Nc.test(e.data)||(a=this._getOrReturnCtx(e,a),$(a,{validation:"ulid",code:I.invalid_string,message:o.message}),r.dirty());else if(o.kind==="url")try{new URL(e.data)}catch{a=this._getOrReturnCtx(e,a),$(a,{validation:"url",code:I.invalid_string,message:o.message}),r.dirty()}else o.kind==="regex"?(o.regex.lastIndex=0,o.regex.test(e.data)||(a=this._getOrReturnCtx(e,a),$(a,{validation:"regex",code:I.invalid_string,message:o.message}),r.dirty())):o.kind==="trim"?e.data=e.data.trim():o.kind==="includes"?e.data.includes(o.value,o.position)||(a=this._getOrReturnCtx(e,a),$(a,{code:I.invalid_string,validation:{includes:o.value,position:o.position},message:o.message}),r.dirty()):o.kind==="toLowerCase"?e.data=e.data.toLowerCase():o.kind==="toUpperCase"?e.data=e.data.toUpperCase():o.kind==="startsWith"?e.data.startsWith(o.value)||(a=this._getOrReturnCtx(e,a),$(a,{code:I.invalid_string,validation:{startsWith:o.value},message:o.message}),r.dirty()):o.kind==="endsWith"?e.data.endsWith(o.value)||(a=this._getOrReturnCtx(e,a),$(a,{code:I.invalid_string,validation:{endsWith:o.value},message:o.message}),r.dirty()):o.kind==="datetime"?xs(o).test(e.data)||(a=this._getOrReturnCtx(e,a),$(a,{code:I.invalid_string,validation:"datetime",message:o.message}),r.dirty()):o.kind==="date"?Kc.test(e.data)||(a=this._getOrReturnCtx(e,a),$(a,{code:I.invalid_string,validation:"date",message:o.message}),r.dirty()):o.kind==="time"?qc(o).test(e.data)||(a=this._getOrReturnCtx(e,a),$(a,{code:I.invalid_string,validation:"time",message:o.message}),r.dirty()):o.kind==="duration"?Fc.test(e.data)||(a=this._getOrReturnCtx(e,a),$(a,{validation:"duration",code:I.invalid_string,message:o.message}),r.dirty()):o.kind==="ip"?Hc(e.data,o.version)||(a=this._getOrReturnCtx(e,a),$(a,{validation:"ip",code:I.invalid_string,message:o.message}),r.dirty()):o.kind==="base64"?Gc.test(e.data)||(a=this._getOrReturnCtx(e,a),$(a,{validation:"base64",code:I.invalid_string,message:o.message}),r.dirty()):te.assertNever(o);return{status:r.value,value:e.data}}_regex(e,r,a){return this.refinement(o=>e.test(o),{validation:r,code:I.invalid_string,...D.errToObj(a)})}_addCheck(e){return new _n({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...D.errToObj(e)})}url(e){return this._addCheck({kind:"url",...D.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...D.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...D.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...D.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...D.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...D.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...D.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...D.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...D.errToObj(e)})}datetime(e){var r,a;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:(r=e?.offset)!==null&&r!==void 0?r:!1,local:(a=e?.local)!==null&&a!==void 0?a:!1,...D.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision,...D.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...D.errToObj(e)})}regex(e,r){return this._addCheck({kind:"regex",regex:e,...D.errToObj(r)})}includes(e,r){return this._addCheck({kind:"includes",value:e,position:r?.position,...D.errToObj(r?.message)})}startsWith(e,r){return this._addCheck({kind:"startsWith",value:e,...D.errToObj(r)})}endsWith(e,r){return this._addCheck({kind:"endsWith",value:e,...D.errToObj(r)})}min(e,r){return this._addCheck({kind:"min",value:e,...D.errToObj(r)})}max(e,r){return this._addCheck({kind:"max",value:e,...D.errToObj(r)})}length(e,r){return this._addCheck({kind:"length",value:e,...D.errToObj(r)})}nonempty(e){return this.min(1,D.errToObj(e))}trim(){return new _n({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new _n({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new _n({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get minLength(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxLength(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};Wt.create=t=>{var e;return new Wt({checks:[],typeName:V.ZodString,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...Y(t)})};function Yc(t,e){let r=(t.toString().split(".")[1]||"").length,a=(e.toString().split(".")[1]||"").length,o=r>a?r:a,l=parseInt(t.toFixed(o).replace(".","")),c=parseInt(e.toFixed(o).replace(".",""));return l%c/Math.pow(10,o)}var Br=class Ea extends Q{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==N.number){let o=this._getOrReturnCtx(e);return $(o,{code:I.invalid_type,expected:N.number,received:o.parsedType}),q}let r,a=new _e;for(let o of this._def.checks)o.kind==="int"?te.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),$(r,{code:I.invalid_type,expected:"integer",received:"float",message:o.message}),a.dirty()):o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(r=this._getOrReturnCtx(e,r),$(r,{code:I.too_small,minimum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),a.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(r=this._getOrReturnCtx(e,r),$(r,{code:I.too_big,maximum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),a.dirty()):o.kind==="multipleOf"?Yc(e.data,o.value)!==0&&(r=this._getOrReturnCtx(e,r),$(r,{code:I.not_multiple_of,multipleOf:o.value,message:o.message}),a.dirty()):o.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),$(r,{code:I.not_finite,message:o.message}),a.dirty()):te.assertNever(o);return{status:a.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,D.toString(r))}gt(e,r){return this.setLimit("min",e,!1,D.toString(r))}lte(e,r){return this.setLimit("max",e,!0,D.toString(r))}lt(e,r){return this.setLimit("max",e,!1,D.toString(r))}setLimit(e,r,a,o){return new Ea({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:a,message:D.toString(o)}]})}_addCheck(e){return new Ea({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:D.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:D.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:D.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:D.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:D.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:D.toString(r)})}finite(e){return this._addCheck({kind:"finite",message:D.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:D.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:D.toString(e)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&te.isInteger(e.value))}get isFinite(){let e=null,r=null;for(let a of this._def.checks){if(a.kind==="finite"||a.kind==="int"||a.kind==="multipleOf")return!0;a.kind==="min"?(r===null||a.value>r)&&(r=a.value):a.kind==="max"&&(e===null||a.value<e)&&(e=a.value)}return Number.isFinite(r)&&Number.isFinite(e)}};Br.create=t=>new Br({checks:[],typeName:V.ZodNumber,coerce:t?.coerce||!1,...Y(t)});var Ir=class Aa extends Q{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==N.bigint){let o=this._getOrReturnCtx(e);return $(o,{code:I.invalid_type,expected:N.bigint,received:o.parsedType}),q}let r,a=new _e;for(let o of this._def.checks)o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(r=this._getOrReturnCtx(e,r),$(r,{code:I.too_small,type:"bigint",minimum:o.value,inclusive:o.inclusive,message:o.message}),a.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(r=this._getOrReturnCtx(e,r),$(r,{code:I.too_big,type:"bigint",maximum:o.value,inclusive:o.inclusive,message:o.message}),a.dirty()):o.kind==="multipleOf"?e.data%o.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),$(r,{code:I.not_multiple_of,multipleOf:o.value,message:o.message}),a.dirty()):te.assertNever(o);return{status:a.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,D.toString(r))}gt(e,r){return this.setLimit("min",e,!1,D.toString(r))}lte(e,r){return this.setLimit("max",e,!0,D.toString(r))}lt(e,r){return this.setLimit("max",e,!1,D.toString(r))}setLimit(e,r,a,o){return new Aa({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:a,message:D.toString(o)}]})}_addCheck(e){return new Aa({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:D.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:D.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:D.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:D.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:D.toString(r)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};Ir.create=t=>{var e;return new Ir({checks:[],typeName:V.ZodBigInt,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...Y(t)})};var Or=class extends Q{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==N.boolean){let e=this._getOrReturnCtx(t);return $(e,{code:I.invalid_type,expected:N.boolean,received:e.parsedType}),q}return me(t.data)}};Or.create=t=>new Or({typeName:V.ZodBoolean,coerce:t?.coerce||!1,...Y(t)});var Cr=class Qo extends Q{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==N.date){let o=this._getOrReturnCtx(e);return $(o,{code:I.invalid_type,expected:N.date,received:o.parsedType}),q}if(isNaN(e.data.getTime())){let o=this._getOrReturnCtx(e);return $(o,{code:I.invalid_date}),q}let r=new _e,a;for(let o of this._def.checks)o.kind==="min"?e.data.getTime()<o.value&&(a=this._getOrReturnCtx(e,a),$(a,{code:I.too_small,message:o.message,inclusive:!0,exact:!1,minimum:o.value,type:"date"}),r.dirty()):o.kind==="max"?e.data.getTime()>o.value&&(a=this._getOrReturnCtx(e,a),$(a,{code:I.too_big,message:o.message,inclusive:!0,exact:!1,maximum:o.value,type:"date"}),r.dirty()):te.assertNever(o);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Qo({...this._def,checks:[...this._def.checks,e]})}min(e,r){return this._addCheck({kind:"min",value:e.getTime(),message:D.toString(r)})}max(e,r){return this._addCheck({kind:"max",value:e.getTime(),message:D.toString(r)})}get minDate(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e!=null?new Date(e):null}};Cr.create=t=>new Cr({checks:[],coerce:t?.coerce||!1,typeName:V.ZodDate,...Y(t)});var $n=class extends Q{_parse(t){if(this._getType(t)!==N.symbol){let e=this._getOrReturnCtx(t);return $(e,{code:I.invalid_type,expected:N.symbol,received:e.parsedType}),q}return me(t.data)}};$n.create=t=>new $n({typeName:V.ZodSymbol,...Y(t)});var Rr=class extends Q{_parse(t){if(this._getType(t)!==N.undefined){let e=this._getOrReturnCtx(t);return $(e,{code:I.invalid_type,expected:N.undefined,received:e.parsedType}),q}return me(t.data)}};Rr.create=t=>new Rr({typeName:V.ZodUndefined,...Y(t)});var Ur=class extends Q{_parse(t){if(this._getType(t)!==N.null){let e=this._getOrReturnCtx(t);return $(e,{code:I.invalid_type,expected:N.null,received:e.parsedType}),q}return me(t.data)}};Ur.create=t=>new Ur({typeName:V.ZodNull,...Y(t)});var Vt=class extends Q{constructor(){super(...arguments),this._any=!0}_parse(t){return me(t.data)}};Vt.create=t=>new Vt({typeName:V.ZodAny,...Y(t)});var It=class extends Q{constructor(){super(...arguments),this._unknown=!0}_parse(t){return me(t.data)}};It.create=t=>new It({typeName:V.ZodUnknown,...Y(t)});var Ye=class extends Q{_parse(t){let e=this._getOrReturnCtx(t);return $(e,{code:I.invalid_type,expected:N.never,received:e.parsedType}),q}};Ye.create=t=>new Ye({typeName:V.ZodNever,...Y(t)});var jn=class extends Q{_parse(t){if(this._getType(t)!==N.undefined){let e=this._getOrReturnCtx(t);return $(e,{code:I.invalid_type,expected:N.void,received:e.parsedType}),q}return me(t.data)}};jn.create=t=>new jn({typeName:V.ZodVoid,...Y(t)});var Ot=class ui extends Q{_parse(e){let{ctx:r,status:a}=this._processInputParams(e),o=this._def;if(r.parsedType!==N.array)return $(r,{code:I.invalid_type,expected:N.array,received:r.parsedType}),q;if(o.exactLength!==null){let c=r.data.length>o.exactLength.value,u=r.data.length<o.exactLength.value;(c||u)&&($(r,{code:c?I.too_big:I.too_small,minimum:u?o.exactLength.value:void 0,maximum:c?o.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:o.exactLength.message}),a.dirty())}if(o.minLength!==null&&r.data.length<o.minLength.value&&($(r,{code:I.too_small,minimum:o.minLength.value,type:"array",inclusive:!0,exact:!1,message:o.minLength.message}),a.dirty()),o.maxLength!==null&&r.data.length>o.maxLength.value&&($(r,{code:I.too_big,maximum:o.maxLength.value,type:"array",inclusive:!0,exact:!1,message:o.maxLength.message}),a.dirty()),r.common.async)return Promise.all([...r.data].map((c,u)=>o.type._parseAsync(new De(r,c,r.path,u)))).then(c=>_e.mergeArray(a,c));let l=[...r.data].map((c,u)=>o.type._parseSync(new De(r,c,r.path,u)));return _e.mergeArray(a,l)}get element(){return this._def.type}min(e,r){return new ui({...this._def,minLength:{value:e,message:D.toString(r)}})}max(e,r){return new ui({...this._def,maxLength:{value:e,message:D.toString(r)}})}length(e,r){return new ui({...this._def,exactLength:{value:e,message:D.toString(r)}})}nonempty(e){return this.min(1,e)}};Ot.create=(t,e)=>new Ot({type:t,minLength:null,maxLength:null,exactLength:null,typeName:V.ZodArray,...Y(e)});function Gt(t){if(t instanceof Se){let e={};for(let r in t.shape){let a=t.shape[r];e[r]=ze.create(Gt(a))}return new Se({...t._def,shape:()=>e})}else return t instanceof Ot?new Ot({...t._def,type:Gt(t.element)}):t instanceof ze?ze.create(Gt(t.unwrap())):t instanceof wt?wt.create(Gt(t.unwrap())):t instanceof vt?vt.create(t.items.map(e=>Gt(e))):t}var Se=class Me extends Q{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let e=this._def.shape(),r=te.objectKeys(e);return this._cached={shape:e,keys:r}}_parse(e){if(this._getType(e)!==N.object){let f=this._getOrReturnCtx(e);return $(f,{code:I.invalid_type,expected:N.object,received:f.parsedType}),q}let{status:r,ctx:a}=this._processInputParams(e),{shape:o,keys:l}=this._getCached(),c=[];if(!(this._def.catchall instanceof Ye&&this._def.unknownKeys==="strip"))for(let f in a.data)l.includes(f)||c.push(f);let u=[];for(let f of l){let p=o[f],b=a.data[f];u.push({key:{status:"valid",value:f},value:p._parse(new De(a,b,a.path,f)),alwaysSet:f in a.data})}if(this._def.catchall instanceof Ye){let f=this._def.unknownKeys;if(f==="passthrough")for(let p of c)u.push({key:{status:"valid",value:p},value:{status:"valid",value:a.data[p]}});else if(f==="strict")c.length>0&&($(a,{code:I.unrecognized_keys,keys:c}),r.dirty());else if(f!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let f=this._def.catchall;for(let p of c){let b=a.data[p];u.push({key:{status:"valid",value:p},value:f._parse(new De(a,b,a.path,p)),alwaysSet:p in a.data})}}return a.common.async?Promise.resolve().then(async()=>{let f=[];for(let p of u){let b=await p.key,w=await p.value;f.push({key:b,value:w,alwaysSet:p.alwaysSet})}return f}).then(f=>_e.mergeObjectSync(r,f)):_e.mergeObjectSync(r,u)}get shape(){return this._def.shape()}strict(e){return D.errToObj,new Me({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(r,a)=>{var o,l,c,u;let f=(c=(l=(o=this._def).errorMap)===null||l===void 0?void 0:l.call(o,r,a).message)!==null&&c!==void 0?c:a.defaultError;return r.code==="unrecognized_keys"?{message:(u=D.errToObj(e).message)!==null&&u!==void 0?u:f}:{message:f}}}:{}})}strip(){return new Me({...this._def,unknownKeys:"strip"})}passthrough(){return new Me({...this._def,unknownKeys:"passthrough"})}extend(e){return new Me({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Me({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:V.ZodObject})}setKey(e,r){return this.augment({[e]:r})}catchall(e){return new Me({...this._def,catchall:e})}pick(e){let r={};return te.objectKeys(e).forEach(a=>{e[a]&&this.shape[a]&&(r[a]=this.shape[a])}),new Me({...this._def,shape:()=>r})}omit(e){let r={};return te.objectKeys(this.shape).forEach(a=>{e[a]||(r[a]=this.shape[a])}),new Me({...this._def,shape:()=>r})}deepPartial(){return Gt(this)}partial(e){let r={};return te.objectKeys(this.shape).forEach(a=>{let o=this.shape[a];e&&!e[a]?r[a]=o:r[a]=o.optional()}),new Me({...this._def,shape:()=>r})}required(e){let r={};return te.objectKeys(this.shape).forEach(a=>{if(e&&!e[a])r[a]=this.shape[a];else{let o=this.shape[a];for(;o instanceof ze;)o=o._def.innerType;r[a]=o}}),new Me({...this._def,shape:()=>r})}keyof(){return Os(te.objectKeys(this.shape))}};Se.create=(t,e)=>new Se({shape:()=>t,unknownKeys:"strip",catchall:Ye.create(),typeName:V.ZodObject,...Y(e)}),Se.strictCreate=(t,e)=>new Se({shape:()=>t,unknownKeys:"strict",catchall:Ye.create(),typeName:V.ZodObject,...Y(e)}),Se.lazycreate=(t,e)=>new Se({shape:t,unknownKeys:"strip",catchall:Ye.create(),typeName:V.ZodObject,...Y(e)});var Lr=class extends Q{_parse(t){let{ctx:e}=this._processInputParams(t),r=this._def.options;function a(o){for(let c of o)if(c.result.status==="valid")return c.result;for(let c of o)if(c.result.status==="dirty")return e.common.issues.push(...c.ctx.common.issues),c.result;let l=o.map(c=>new $e(c.ctx.common.issues));return $(e,{code:I.invalid_union,unionErrors:l}),q}if(e.common.async)return Promise.all(r.map(async o=>{let l={...e,common:{...e.common,issues:[]},parent:null};return{result:await o._parseAsync({data:e.data,path:e.path,parent:l}),ctx:l}})).then(a);{let o,l=[];for(let u of r){let f={...e,common:{...e.common,issues:[]},parent:null},p=u._parseSync({data:e.data,path:e.path,parent:f});if(p.status==="valid")return p;p.status==="dirty"&&!o&&(o={result:p,ctx:f}),f.common.issues.length&&l.push(f.common.issues)}if(o)return e.common.issues.push(...o.ctx.common.issues),o.result;let c=l.map(u=>new $e(u));return $(e,{code:I.invalid_union,unionErrors:c}),q}}get options(){return this._def.options}};Lr.create=(t,e)=>new Lr({options:t,typeName:V.ZodUnion,...Y(e)});var mt=t=>t instanceof jr?mt(t.schema):t instanceof je?mt(t.innerType()):t instanceof Pr?[t.value]:t instanceof Nr?t.options:t instanceof Mr?te.objectValues(t.enum):t instanceof Zr?mt(t._def.innerType):t instanceof Rr?[void 0]:t instanceof Ur?[null]:t instanceof ze?[void 0,...mt(t.unwrap())]:t instanceof wt?[null,...mt(t.unwrap())]:t instanceof Zi||t instanceof Dr?mt(t.unwrap()):t instanceof Fr?mt(t._def.innerType):[],ks=class Jo extends Q{_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==N.object)return $(r,{code:I.invalid_type,expected:N.object,received:r.parsedType}),q;let a=this.discriminator,o=r.data[a],l=this.optionsMap.get(o);return l?r.common.async?l._parseAsync({data:r.data,path:r.path,parent:r}):l._parseSync({data:r.data,path:r.path,parent:r}):($(r,{code:I.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[a]}),q)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,r,a){let o=new Map;for(let l of r){let c=mt(l.shape[e]);if(!c.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let u of c){if(o.has(u))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(u)}`);o.set(u,l)}}return new Jo({typeName:V.ZodDiscriminatedUnion,discriminator:e,options:r,optionsMap:o,...Y(a)})}};function Mi(t,e){let r=yt(t),a=yt(e);if(t===e)return{valid:!0,data:t};if(r===N.object&&a===N.object){let o=te.objectKeys(e),l=te.objectKeys(t).filter(u=>o.indexOf(u)!==-1),c={...t,...e};for(let u of l){let f=Mi(t[u],e[u]);if(!f.valid)return{valid:!1};c[u]=f.data}return{valid:!0,data:c}}else if(r===N.array&&a===N.array){if(t.length!==e.length)return{valid:!1};let o=[];for(let l=0;l<t.length;l++){let c=t[l],u=e[l],f=Mi(c,u);if(!f.valid)return{valid:!1};o.push(f.data)}return{valid:!0,data:o}}else return r===N.date&&a===N.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}var $r=class extends Q{_parse(t){let{status:e,ctx:r}=this._processInputParams(t),a=(o,l)=>{if(ji(o)||ji(l))return q;let c=Mi(o.value,l.value);return c.valid?((Pi(o)||Pi(l))&&e.dirty(),{status:e.value,value:c.data}):($(r,{code:I.invalid_intersection_types}),q)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([o,l])=>a(o,l)):a(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}};$r.create=(t,e,r)=>new $r({left:t,right:e,typeName:V.ZodIntersection,...Y(r)});var vt=class eu extends Q{_parse(e){let{status:r,ctx:a}=this._processInputParams(e);if(a.parsedType!==N.array)return $(a,{code:I.invalid_type,expected:N.array,received:a.parsedType}),q;if(a.data.length<this._def.items.length)return $(a,{code:I.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),q;!this._def.rest&&a.data.length>this._def.items.length&&($(a,{code:I.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());let o=[...a.data].map((l,c)=>{let u=this._def.items[c]||this._def.rest;return u?u._parse(new De(a,l,a.path,c)):null}).filter(l=>!!l);return a.common.async?Promise.all(o).then(l=>_e.mergeArray(r,l)):_e.mergeArray(r,o)}get items(){return this._def.items}rest(e){return new eu({...this._def,rest:e})}};vt.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new vt({items:t,typeName:V.ZodTuple,rest:null,...Y(e)})};var Bs=class Ta extends Q{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:a}=this._processInputParams(e);if(a.parsedType!==N.object)return $(a,{code:I.invalid_type,expected:N.object,received:a.parsedType}),q;let o=[],l=this._def.keyType,c=this._def.valueType;for(let u in a.data)o.push({key:l._parse(new De(a,u,a.path,u)),value:c._parse(new De(a,a.data[u],a.path,u)),alwaysSet:u in a.data});return a.common.async?_e.mergeObjectAsync(r,o):_e.mergeObjectSync(r,o)}get element(){return this._def.valueType}static create(e,r,a){return r instanceof Q?new Ta({keyType:e,valueType:r,typeName:V.ZodRecord,...Y(a)}):new Ta({keyType:Wt.create(),valueType:e,typeName:V.ZodRecord,...Y(r)})}},Pn=class extends Q{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){let{status:e,ctx:r}=this._processInputParams(t);if(r.parsedType!==N.map)return $(r,{code:I.invalid_type,expected:N.map,received:r.parsedType}),q;let a=this._def.keyType,o=this._def.valueType,l=[...r.data.entries()].map(([c,u],f)=>({key:a._parse(new De(r,c,r.path,[f,"key"])),value:o._parse(new De(r,u,r.path,[f,"value"]))}));if(r.common.async){let c=new Map;return Promise.resolve().then(async()=>{for(let u of l){let f=await u.key,p=await u.value;if(f.status==="aborted"||p.status==="aborted")return q;(f.status==="dirty"||p.status==="dirty")&&e.dirty(),c.set(f.value,p.value)}return{status:e.value,value:c}})}else{let c=new Map;for(let u of l){let f=u.key,p=u.value;if(f.status==="aborted"||p.status==="aborted")return q;(f.status==="dirty"||p.status==="dirty")&&e.dirty(),c.set(f.value,p.value)}return{status:e.value,value:c}}}};Pn.create=(t,e,r)=>new Pn({valueType:e,keyType:t,typeName:V.ZodMap,...Y(r)});var Nn=class Sa extends Q{_parse(e){let{status:r,ctx:a}=this._processInputParams(e);if(a.parsedType!==N.set)return $(a,{code:I.invalid_type,expected:N.set,received:a.parsedType}),q;let o=this._def;o.minSize!==null&&a.data.size<o.minSize.value&&($(a,{code:I.too_small,minimum:o.minSize.value,type:"set",inclusive:!0,exact:!1,message:o.minSize.message}),r.dirty()),o.maxSize!==null&&a.data.size>o.maxSize.value&&($(a,{code:I.too_big,maximum:o.maxSize.value,type:"set",inclusive:!0,exact:!1,message:o.maxSize.message}),r.dirty());let l=this._def.valueType;function c(f){let p=new Set;for(let b of f){if(b.status==="aborted")return q;b.status==="dirty"&&r.dirty(),p.add(b.value)}return{status:r.value,value:p}}let u=[...a.data.values()].map((f,p)=>l._parse(new De(a,f,a.path,p)));return a.common.async?Promise.all(u).then(f=>c(f)):c(u)}min(e,r){return new Sa({...this._def,minSize:{value:e,message:D.toString(r)}})}max(e,r){return new Sa({...this._def,maxSize:{value:e,message:D.toString(r)}})}size(e,r){return this.min(e,r).max(e,r)}nonempty(e){return this.min(1,e)}};Nn.create=(t,e)=>new Nn({valueType:t,minSize:null,maxSize:null,typeName:V.ZodSet,...Y(e)});var Is=class li extends Q{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==N.function)return $(r,{code:I.invalid_type,expected:N.function,received:r.parsedType}),q;function a(u,f){return Cn({data:u,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,On(),zt].filter(p=>!!p),issueData:{code:I.invalid_arguments,argumentsError:f}})}function o(u,f){return Cn({data:u,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,On(),zt].filter(p=>!!p),issueData:{code:I.invalid_return_type,returnTypeError:f}})}let l={errorMap:r.common.contextualErrorMap},c=r.data;if(this._def.returns instanceof Kt){let u=this;return me(async function(...f){let p=new $e([]),b=await u._def.args.parseAsync(f,l).catch(v=>{throw p.addIssue(a(f,v)),p}),w=await Reflect.apply(c,this,b);return await u._def.returns._def.type.parseAsync(w,l).catch(v=>{throw p.addIssue(o(w,v)),p})})}else{let u=this;return me(function(...f){let p=u._def.args.safeParse(f,l);if(!p.success)throw new $e([a(f,p.error)]);let b=Reflect.apply(c,this,p.data),w=u._def.returns.safeParse(b,l);if(!w.success)throw new $e([o(b,w.error)]);return w.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new li({...this._def,args:vt.create(e).rest(It.create())})}returns(e){return new li({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,r,a){return new li({args:e||vt.create([]).rest(It.create()),returns:r||It.create(),typeName:V.ZodFunction,...Y(a)})}},jr=class extends Q{get schema(){return this._def.getter()}_parse(t){let{ctx:e}=this._processInputParams(t);return this._def.getter()._parse({data:e.data,path:e.path,parent:e})}};jr.create=(t,e)=>new jr({getter:t,typeName:V.ZodLazy,...Y(e)});var Pr=class extends Q{_parse(t){if(t.data!==this._def.value){let e=this._getOrReturnCtx(t);return $(e,{received:e.data,code:I.invalid_literal,expected:this._def.value}),q}return{status:"valid",value:t.data}}get value(){return this._def.value}};Pr.create=(t,e)=>new Pr({value:t,typeName:V.ZodLiteral,...Y(e)});function Os(t,e){return new Nr({values:t,typeName:V.ZodEnum,...Y(e)})}var Nr=class xa extends Q{constructor(){super(...arguments),xr.set(this,void 0)}_parse(e){if(typeof e.data!="string"){let r=this._getOrReturnCtx(e),a=this._def.values;return $(r,{expected:te.joinValues(a),received:r.parsedType,code:I.invalid_type}),q}if(Ln(this,xr,"f")||Es(this,xr,new Set(this._def.values),"f"),!Ln(this,xr,"f").has(e.data)){let r=this._getOrReturnCtx(e),a=this._def.values;return $(r,{received:r.data,code:I.invalid_enum_value,options:a}),q}return me(e.data)}get options(){return this._def.values}get enum(){let e={};for(let r of this._def.values)e[r]=r;return e}get Values(){let e={};for(let r of this._def.values)e[r]=r;return e}get Enum(){let e={};for(let r of this._def.values)e[r]=r;return e}extract(e,r=this._def){return xa.create(e,{...this._def,...r})}exclude(e,r=this._def){return xa.create(this.options.filter(a=>!e.includes(a)),{...this._def,...r})}};xr=new WeakMap,Nr.create=Os;var Mr=class extends Q{constructor(){super(...arguments),kr.set(this,void 0)}_parse(t){let e=te.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(t);if(r.parsedType!==N.string&&r.parsedType!==N.number){let a=te.objectValues(e);return $(r,{expected:te.joinValues(a),received:r.parsedType,code:I.invalid_type}),q}if(Ln(this,kr,"f")||Es(this,kr,new Set(te.getValidEnumValues(this._def.values)),"f"),!Ln(this,kr,"f").has(t.data)){let a=te.objectValues(e);return $(r,{received:r.data,code:I.invalid_enum_value,options:a}),q}return me(t.data)}get enum(){return this._def.values}};kr=new WeakMap,Mr.create=(t,e)=>new Mr({values:t,typeName:V.ZodNativeEnum,...Y(e)});var Kt=class extends Q{unwrap(){return this._def.type}_parse(t){let{ctx:e}=this._processInputParams(t);if(e.parsedType!==N.promise&&e.common.async===!1)return $(e,{code:I.invalid_type,expected:N.promise,received:e.parsedType}),q;let r=e.parsedType===N.promise?e.data:Promise.resolve(e.data);return me(r.then(a=>this._def.type.parseAsync(a,{path:e.path,errorMap:e.common.contextualErrorMap})))}};Kt.create=(t,e)=>new Kt({type:t,typeName:V.ZodPromise,...Y(e)});var je=class extends Q{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===V.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){let{status:e,ctx:r}=this._processInputParams(t),a=this._def.effect||null,o={addIssue:l=>{$(r,l),l.fatal?e.abort():e.dirty()},get path(){return r.path}};if(o.addIssue=o.addIssue.bind(o),a.type==="preprocess"){let l=a.transform(r.data,o);if(r.common.async)return Promise.resolve(l).then(async c=>{if(e.value==="aborted")return q;let u=await this._def.schema._parseAsync({data:c,path:r.path,parent:r});return u.status==="aborted"?q:u.status==="dirty"||e.value==="dirty"?Rn(u.value):u});{if(e.value==="aborted")return q;let c=this._def.schema._parseSync({data:l,path:r.path,parent:r});return c.status==="aborted"?q:c.status==="dirty"||e.value==="dirty"?Rn(c.value):c}}if(a.type==="refinement"){let l=c=>{let u=a.refinement(c,o);if(r.common.async)return Promise.resolve(u);if(u instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return c};if(r.common.async===!1){let c=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return c.status==="aborted"?q:(c.status==="dirty"&&e.dirty(),l(c.value),{status:e.value,value:c.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(c=>c.status==="aborted"?q:(c.status==="dirty"&&e.dirty(),l(c.value).then(()=>({status:e.value,value:c.value}))))}if(a.type==="transform")if(r.common.async===!1){let l=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!Sr(l))return l;let c=a.transform(l.value,o);if(c instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:e.value,value:c}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(l=>Sr(l)?Promise.resolve(a.transform(l.value,o)).then(c=>({status:e.value,value:c})):l);te.assertNever(a)}};je.create=(t,e,r)=>new je({schema:t,typeName:V.ZodEffects,effect:e,...Y(r)}),je.createWithPreprocess=(t,e,r)=>new je({schema:e,effect:{type:"preprocess",transform:t},typeName:V.ZodEffects,...Y(r)});var ze=class extends Q{_parse(t){return this._getType(t)===N.undefined?me(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}};ze.create=(t,e)=>new ze({innerType:t,typeName:V.ZodOptional,...Y(e)});var wt=class extends Q{_parse(t){return this._getType(t)===N.null?me(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}};wt.create=(t,e)=>new wt({innerType:t,typeName:V.ZodNullable,...Y(e)});var Zr=class extends Q{_parse(t){let{ctx:e}=this._processInputParams(t),r=e.data;return e.parsedType===N.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:e.path,parent:e})}removeDefault(){return this._def.innerType}};Zr.create=(t,e)=>new Zr({innerType:t,typeName:V.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Y(e)});var Fr=class extends Q{_parse(t){let{ctx:e}=this._processInputParams(t),r={...e,common:{...e.common,issues:[]}},a=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return Un(a)?a.then(o=>({status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new $e(r.common.issues)},input:r.data})})):{status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new $e(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}};Fr.create=(t,e)=>new Fr({innerType:t,typeName:V.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Y(e)});var Mn=class extends Q{_parse(t){if(this._getType(t)!==N.nan){let e=this._getOrReturnCtx(t);return $(e,{code:I.invalid_type,expected:N.nan,received:e.parsedType}),q}return{status:"valid",value:t.data}}};Mn.create=t=>new Mn({typeName:V.ZodNaN,...Y(t)});var Xc=Symbol("zod_brand"),Zi=class extends Q{_parse(t){let{ctx:e}=this._processInputParams(t),r=e.data;return this._def.type._parse({data:r,path:e.path,parent:e})}unwrap(){return this._def.type}},Fi=class tu extends Q{_parse(e){let{status:r,ctx:a}=this._processInputParams(e);if(a.common.async)return(async()=>{let o=await this._def.in._parseAsync({data:a.data,path:a.path,parent:a});return o.status==="aborted"?q:o.status==="dirty"?(r.dirty(),Rn(o.value)):this._def.out._parseAsync({data:o.value,path:a.path,parent:a})})();{let o=this._def.in._parseSync({data:a.data,path:a.path,parent:a});return o.status==="aborted"?q:o.status==="dirty"?(r.dirty(),{status:"dirty",value:o.value}):this._def.out._parseSync({data:o.value,path:a.path,parent:a})}}static create(e,r){return new tu({in:e,out:r,typeName:V.ZodPipeline})}},Dr=class extends Q{_parse(t){let e=this._def.innerType._parse(t);return Sr(e)&&(e.value=Object.freeze(e.value)),e}unwrap(){return this._def.innerType}};Dr.create=(t,e)=>new Dr({innerType:t,typeName:V.ZodReadonly,...Y(e)});function Cs(t,e={},r){return t?Vt.create().superRefine((a,o)=>{var l,c;if(!t(a)){let u=typeof e=="function"?e(a):typeof e=="string"?{message:e}:e,f=(c=(l=u.fatal)!==null&&l!==void 0?l:r)!==null&&c!==void 0?c:!0,p=typeof u=="string"?{message:u}:u;o.addIssue({code:"custom",...p,fatal:f})}}):Vt.create()}var Qc={object:Se.lazycreate},V;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(V||(V={}));var Jc=(t,e={message:`Input not instance of ${t.name}`})=>Cs(r=>r instanceof t,e),Rs=Wt.create,Us=Br.create,eh=Mn.create,th=Ir.create,Ls=Or.create,rh=Cr.create,nh=$n.create,ih=Rr.create,ah=Ur.create,sh=Vt.create,oh=It.create,uh=Ye.create,lh=jn.create,ch=Ot.create,hh=Se.create,fh=Se.strictCreate,dh=Lr.create,ph=ks.create,gh=$r.create,yh=vt.create,mh=Bs.create,vh=Pn.create,wh=Nn.create,_h=Is.create,bh=jr.create,Eh=Pr.create,Ah=Nr.create,Th=Mr.create,Sh=Kt.create,$s=je.create,xh=ze.create,kh=wt.create,Bh=je.createWithPreprocess,Ih=Fi.create,Oh=()=>Rs().optional(),Ch=()=>Us().optional(),Rh=()=>Ls().optional(),Uh={string:t=>Wt.create({...t,coerce:!0}),number:t=>Br.create({...t,coerce:!0}),boolean:t=>Or.create({...t,coerce:!0}),bigint:t=>Ir.create({...t,coerce:!0}),date:t=>Cr.create({...t,coerce:!0})},Lh=q,ie=Object.freeze({__proto__:null,defaultErrorMap:zt,setErrorMap:Lc,getErrorMap:On,makeIssue:Cn,EMPTY_PATH:$c,addIssueToContext:$,ParseStatus:_e,INVALID:q,DIRTY:Rn,OK:me,isAborted:ji,isDirty:Pi,isValid:Sr,isAsync:Un,get util(){return te},get objectUtil(){return $i},ZodParsedType:N,getParsedType:yt,ZodType:Q,datetimeRegex:xs,ZodString:Wt,ZodNumber:Br,ZodBigInt:Ir,ZodBoolean:Or,ZodDate:Cr,ZodSymbol:$n,ZodUndefined:Rr,ZodNull:Ur,ZodAny:Vt,ZodUnknown:It,ZodNever:Ye,ZodVoid:jn,ZodArray:Ot,ZodObject:Se,ZodUnion:Lr,ZodDiscriminatedUnion:ks,ZodIntersection:$r,ZodTuple:vt,ZodRecord:Bs,ZodMap:Pn,ZodSet:Nn,ZodFunction:Is,ZodLazy:jr,ZodLiteral:Pr,ZodEnum:Nr,ZodNativeEnum:Mr,ZodPromise:Kt,ZodEffects:je,ZodTransformer:je,ZodOptional:ze,ZodNullable:wt,ZodDefault:Zr,ZodCatch:Fr,ZodNaN:Mn,BRAND:Xc,ZodBranded:Zi,ZodPipeline:Fi,ZodReadonly:Dr,custom:Cs,Schema:Q,ZodSchema:Q,late:Qc,get ZodFirstPartyTypeKind(){return V},coerce:Uh,any:sh,array:ch,bigint:th,boolean:Ls,date:rh,discriminatedUnion:ph,effect:$s,enum:Ah,function:_h,instanceof:Jc,intersection:gh,lazy:bh,literal:Eh,map:vh,nan:eh,nativeEnum:Th,never:uh,null:ah,nullable:kh,number:Us,object:hh,oboolean:Rh,onumber:Ch,optional:xh,ostring:Oh,pipeline:Ih,preprocess:Bh,promise:Sh,record:mh,set:wh,strictObject:fh,string:Rs,symbol:nh,transformer:$s,tuple:yh,undefined:ih,union:dh,unknown:oh,void:lh,NEVER:Lh,ZodIssueCode:I,quotelessJson:Uc,ZodError:$e}),js=ie.object({url:ie.string(),address:ie.string()}),Ps=ie.object({url:ie.string(),address:ie.string(),ttl:ie.coerce.number()}),$h=ie.function().args(ie.string(),ie.string()).returns(ie.promise(ie.string())),jh=ie.function().args(ie.string()).returns(ie.promise(js.nullish())),Ph=ie.function().args(ie.string(),js,ie.number()).returns(ie.promise(ie.any())),Di=ie.function().args(ie.string()).returns(ie.promise(Ps.nullish())),zi=ie.function().args(ie.string(),ie.string(),ie.number()).returns(ie.promise(ie.any())),Zn=ie.function().args(ie.string()).returns(ie.promise(Ps)),Nh=Zn;function Mh({loadProcessScheduler:t,loadScheduler:e,cache:r,followRedirects:a,checkForRedirect:o}){t=Nh.implement(t),e=Zn.implement(e),o=$h.implement(o);let l=jh.implement(r.getByProcess),c=Di.implement(r.getByOwner),u=Ph.implement(r.setByProcess),f=zi.implement(r.setByOwner);return(p,b)=>l(p).then(async w=>w||Promise.resolve().then(async()=>b?await c(b)||e(b).then(E=>(f(E.address,E.url,E.ttl),E)):t(p)).then(async v=>{let E=v.url;a&&(E=await o(v.url,p));let m={url:Ri(E),address:v.address};return await u(p,m,v.ttl),m}))}function Zh({loadScheduler:t,cache:e}){t=Zn.implement(t);let r=Di.implement(e.getByOwner),a=zi.implement(e.setByOwner);return o=>r(o).then(l=>l?{url:l.url}:t(o).then(c=>a(o,c.url,c.ttl).then(()=>({url:Ri(c.url)}))).catch(c=>{if(!(c instanceof kn))throw c}))}function Fh({loadScheduler:t,cache:e}){t=Zn.implement(t);let r=Di.implement(e.getByOwner),a=zi.implement(e.setByOwner);return o=>r(o).then(l=>l?!0:t(o).then(c=>a(o,c.url,c.ttl)).then(()=>!0).catch(c=>{if(c instanceof kn)return!1;throw c}))}var Dh=100,zh="https://arweave.net/graphql",Wh=0,Vh=300,Gh=!1;function Ns({cacheSize:t=Dh,followRedirects:e=Gh,GRAPHQL_URL:r=zh,GRAPHQL_MAX_RETRIES:a=Wh,GRAPHQL_RETRY_BACKOFF:o=Vh}={}){let l=kc({size:t}),c=ys({fetch,GRAPHQL_URL:r,GRAPHQL_MAX_RETRIES:a,GRAPHQL_RETRY_BACKOFF:o}),u={getByProcess:Bc({cache:l}),getByOwner:Oc({cache:l}),setByProcess:Ic({cache:l}),setByOwner:Cc({cache:l})},f=Mh({loadProcessScheduler:Ac({fetch,GRAPHQL_URL:r,GRAPHQL_MAX_RETRIES:a,GRAPHQL_RETRY_BACKOFF:o}),loadScheduler:c,cache:u,followRedirects:e,checkForRedirect:Rc({fetch})}),p=Fh({loadScheduler:c,cache:u}),b=Zh({loadScheduler:c,cache:u});return{locate:f,validate:p,raw:b}}var Kh=globalThis.GRAPHQL_URL||void 0,qh=globalThis.SCHEDULER_UTILS_CACHE_SIZE||void 0,Hh=globalThis.SCHEDULER_UTILS_FOLLOW_REDIRECTS==="true"||void 0,Yh=globalThis.GRAPHQL_MAX_RETRIES||void 0,Xh=globalThis.GRAPHQL_RETRY_BACKOFF||void 0,{locate:zy,validate:Wy,raw:Vy}=Ns({GRAPHQL_URL:Kh,cacheSize:qh,followRedirects:Hh,GRAPHQL_MAX_RETRIES:Yh,GRAPHQL_RETRY_BACKOFF:Xh}),Xe=t=>({fork:t,toPromise:()=>new Promise((e,r)=>t(r,e)),map:e=>Xe((r,a)=>t(r,o=>a(e(o)))),bimap:(e,r)=>Xe((a,o)=>t(l=>a(e(l)),l=>o(r(l)))),chain:e=>Xe((r,a)=>t(r,o=>e(o).fork(r,a))),bichain:(e,r)=>Xe((a,o)=>t(l=>e(l).fork(a,o),l=>r(l).fork(a,o))),fold:(e,r)=>Xe((a,o)=>t(l=>e(l).fork(a,o),l=>r(l).fork(a,o)))}),ee=t=>Xe((e,r)=>r(t)),Ct=t=>Xe((e,r)=>r(t)),_t=t=>Xe((e,r)=>e(t)),ae=t=>(...e)=>Xe((r,a)=>t(...e).then(a).catch(r));function Qh({fetch:t,MU_URL:e,logger:r}){const a=r.child("deployMessage");return o=>ee(o).chain(ae(({processId:l,data:c,tags:u,anchor:f,signer:p})=>p({data:c,tags:u,target:l,anchor:f}))).chain(l=>ee(l).chain(ae(async c=>t(e,{method:"POST",headers:{"Content-Type":"application/octet-stream",Accept:"application/json"},redirect:"follow",body:c.raw}))).bichain(c=>_t(new Error(`Error while communicating with MU: ${JSON.stringify(c)}`)),ae(async c=>{if(c.ok)return c.json();throw new Error(`${c.status}: ${await c.text()}`)})).bimap(a.tap("Error encountered when writing message via MU"),a.tap("Successfully wrote message via MU")).map(c=>({res:c,messageId:l.id}))).toPromise()}function Jh({fetch:t,MU_URL:e,logger:r}){const a=r.child("deployProcess");return o=>ee(o).chain(ae(({data:l,tags:c,signer:u})=>u({data:l,tags:c}))).chain(l=>ee(l).chain(ae(async c=>t(e,{method:"POST",headers:{"Content-Type":"application/octet-stream",Accept:"application/json"},redirect:"follow",body:c.raw}))).bichain(c=>_t(new Error(`Error while communicating with MU: ${JSON.stringify(c)}`)),ae(async c=>{if(c.ok)return c.json();throw new Error(`${c.status}: ${await c.text()}`)})).bimap(a.tap("Error encountered when deploying process via MU"),a.tap("Successfully deployed process via MU")).map(c=>({res:c,processId:l.id}))).toPromise()}function ef({fetch:t,MU_URL:e,logger:r}){const a=r.child("deployMonitor");return o=>ee(o).chain(ae(({processId:l,data:c,tags:u,anchor:f,signer:p})=>p({data:c,tags:u,target:l,anchor:f}))).chain(l=>ee(l).chain(ae(async c=>t(e+"/monitor/"+o.processId,{method:"POST",headers:{"Content-Type":"application/octet-stream",Accept:"application/json"},redirect:"follow",body:c.raw}))).bichain(c=>_t(new Error(`Error while communicating with MU: ${JSON.stringify(c)}`)),ae(async c=>{if(c.ok)return{ok:!0};throw new Error(`${c.status}: ${await c.text()}`)})).bimap(a.tap("Error encountered when subscribing to process via MU"),a.tap("Successfully subscribed to process via MU")).map(c=>({res:c,messageId:l.id}))).toPromise()}function tf({fetch:t,MU_URL:e,logger:r}){const a=r.child("deployUnmonitor");return o=>ee(o).chain(ae(({processId:l,data:c,tags:u,anchor:f,signer:p})=>p({data:c,tags:u,target:l,anchor:f}))).chain(l=>ee(l).chain(ae(async c=>t(e+"/monitor/"+o.processId,{method:"DELETE",headers:{"Content-Type":"application/octet-stream",Accept:"application/json"},redirect:"follow",body:c.raw}))).bichain(c=>_t(new Error(`Error while communicating with MU: ${JSON.stringify(c)}`)),ae(async c=>{if(c.ok)return{ok:!0};throw new Error(`${c.status}: ${await c.text()}`)})).bimap(a.tap("Error encountered when unsubscribing to process via MU"),a.tap("Successfully unsubscribed to process via MU")).map(c=>({res:c,messageId:l.id}))).toPromise()}function rf({fetch:t,MU_URL:e,logger:r}){const a=r.child("deployAssign");return o=>ee(o).chain(ae(async({process:l,message:c,baseLayer:u,exclude:f})=>t(`${e}?process-id=${l}&assign=${c}${u?"&base-layer":""}${f?"&exclude="+f.join(","):""}`,{method:"POST",headers:{"Content-Type":"application/octet-stream",Accept:"application/json"}}))).bichain(l=>_t(new Error(`Error while communicating with MU: ${JSON.stringify(l)}`)),ae(async l=>{if(l.ok)return l.json();throw new Error(`${l.status}: ${await l.text()}`)})).bimap(a.tap("Error encountered when writing assignment via MU"),a.tap("Successfully wrote assignment via MU")).map(l=>({res:l,assignmentId:l.id})).toPromise()}function nf({fetch:t,CU_URL:e,logger:r}){return a=>ee(a).map(r.tap("posting dryrun request to CU")).chain(ae(o=>t(`${e}/dry-run?process-id=${o.Target}`,{method:"POST",headers:{"Content-Type":"application/json"},redirect:"follow",body:JSON.stringify(o)}).then(l=>l.json()))).toPromise()}function af({fetch:t,CU_URL:e,logger:r}){return({id:a,processId:o})=>ee(`${e}/result/${a}?process-id=${o}`).map(r.tap("fetching message result from CU")).chain(ae(async l=>t(l,{method:"GET",headers:{Accept:"application/json"},redirect:"follow"}).then(c=>c.json()))).toPromise()}function sf({fetch:t,CU_URL:e,logger:r}){return({process:a,from:o,to:l,sort:c,limit:u})=>{const f=new URL(`${e}/results/${a}`),p=new URLSearchParams(f.search);return o&&p.append("from",o),l&&p.append("to",l),c&&p.append("sort",c),u&&p.append("limit",u),f.search=p,ee(f.toString()).map(r.tap("fetching message result from CU")).chain(ae(async b=>t(b,{method:"GET",headers:{Accept:"application/json"},redirect:"follow"}).then(w=>w.json()))).toPromise()}}var of=Ei(Hu(),1),zr,uf=({MAX_SIZE:t})=>zr||(zr=new of.default(t),zr),Wi=({logger:t,fetch:e,cache:r=zr})=>async({suUrl:a,processId:o})=>r.has(o)?r.get(o):e(`${a}/processes/${o}`,{method:"GET",redirect:"follow"}).then(async l=>{if(l.ok)return l.json();throw t("Error Encountered when fetching process meta from SU '%s' for process '%s'",a,o),new Error(`Encountered Error fetching scheduled messages from Scheduler Unit: ${l.status}: ${await l.text()}`)}).then(l=>(t("Caching process meta for process '%s'",o),r.set(o,{tags:l.tags}),l)),lf=function(){return!1},cf=lf,hf=function(){return!0},Ms=hf,Qe={"@@functional/placeholder":!0};function ue(t){return t!=null&&typeof t=="object"&&t["@@functional/placeholder"]===!0}function de(t){return function e(r){return arguments.length===0||ue(r)?e:t.apply(this,arguments)}}function le(t){return function e(r,a){switch(arguments.length){case 0:return e;case 1:return ue(r)?e:de(function(o){return t(r,o)});default:return ue(r)&&ue(a)?e:ue(r)?de(function(o){return t(o,a)}):ue(a)?de(function(o){return t(r,o)}):t(r,a)}}}function ff(t,e){t=t||[],e=e||[];var r,a=t.length,o=e.length,l=[];for(r=0;r<a;)l[l.length]=t[r],r+=1;for(r=0;r<o;)l[l.length]=e[r],r+=1;return l}function Wr(t,e){switch(t){case 0:return function(){return e.apply(this,arguments)};case 1:return function(r){return e.apply(this,arguments)};case 2:return function(r,a){return e.apply(this,arguments)};case 3:return function(r,a,o){return e.apply(this,arguments)};case 4:return function(r,a,o,l){return e.apply(this,arguments)};case 5:return function(r,a,o,l,c){return e.apply(this,arguments)};case 6:return function(r,a,o,l,c,u){return e.apply(this,arguments)};case 7:return function(r,a,o,l,c,u,f){return e.apply(this,arguments)};case 8:return function(r,a,o,l,c,u,f,p){return e.apply(this,arguments)};case 9:return function(r,a,o,l,c,u,f,p,b){return e.apply(this,arguments)};case 10:return function(r,a,o,l,c,u,f,p,b,w){return e.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten")}}function Zs(t,e,r){return function(){for(var a=[],o=0,l=t,c=0,u=!1;c<e.length||o<arguments.length;){var f;c<e.length&&(!ue(e[c])||o>=arguments.length)?f=e[c]:(f=arguments[o],o+=1),a[c]=f,ue(f)?u=!0:l-=1,c+=1}return!u&&l<=0?r.apply(this,a):Wr(Math.max(0,l),Zs(t,a,r))}}var df=le(function(e,r){return e===1?de(r):Wr(e,Zs(e,[],r))}),Fn=df;function qt(t){return function e(r,a,o){switch(arguments.length){case 0:return e;case 1:return ue(r)?e:le(function(l,c){return t(r,l,c)});case 2:return ue(r)&&ue(a)?e:ue(r)?le(function(l,c){return t(l,a,c)}):ue(a)?le(function(l,c){return t(r,l,c)}):de(function(l){return t(r,a,l)});default:return ue(r)&&ue(a)&&ue(o)?e:ue(r)&&ue(a)?le(function(l,c){return t(l,c,o)}):ue(r)&&ue(o)?le(function(l,c){return t(l,a,c)}):ue(a)&&ue(o)?le(function(l,c){return t(r,l,c)}):ue(r)?de(function(l){return t(l,a,o)}):ue(a)?de(function(l){return t(r,l,o)}):ue(o)?de(function(l){return t(r,a,l)}):t(r,a,o)}}}var Ht=Array.isArray||function(e){return e!=null&&e.length>=0&&Object.prototype.toString.call(e)==="[object Array]"};function pf(t){return t!=null&&typeof t["@@transducer/step"]=="function"}function Dn(t,e,r){return function(){if(arguments.length===0)return r();var a=arguments[arguments.length-1];if(!Ht(a)){for(var o=0;o<t.length;){if(typeof a[t[o]]=="function")return a[t[o]].apply(a,Array.prototype.slice.call(arguments,0,-1));o+=1}if(pf(a)){var l=e.apply(null,Array.prototype.slice.call(arguments,0,-1));return l(a)}}return r.apply(this,arguments)}}var We={init:function(){return this.xf["@@transducer/init"]()},result:function(t){return this.xf["@@transducer/result"](t)}};function Fs(t){for(var e=[],r;!(r=t.next()).done;)e.push(r.value);return e}function Ds(t,e,r){for(var a=0,o=r.length;a<o;){if(t(e,r[a]))return!0;a+=1}return!1}function gf(t){var e=String(t).match(/^function (\w*)/);return e==null?"":e[1]}function Yt(t,e){return Object.prototype.hasOwnProperty.call(e,t)}function yf(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}var Vi=typeof Object.is=="function"?Object.is:yf,zs=Object.prototype.toString,mf=function(){return zs.call(arguments)==="[object Arguments]"?function(e){return zs.call(e)==="[object Arguments]"}:function(e){return Yt("callee",e)}}(),vf=mf,wf=!{toString:null}.propertyIsEnumerable("toString"),Ws=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],Vs=function(){"use strict";return arguments.propertyIsEnumerable("length")}(),_f=function(e,r){for(var a=0;a<e.length;){if(e[a]===r)return!0;a+=1}return!1},bf=de(typeof Object.keys=="function"&&!Vs?function(e){return Object(e)!==e?[]:Object.keys(e)}:function(e){if(Object(e)!==e)return[];var r,a,o=[],l=Vs&&vf(e);for(r in e)Yt(r,e)&&(!l||r!=="length")&&(o[o.length]=r);if(wf)for(a=Ws.length-1;a>=0;)r=Ws[a],Yt(r,e)&&!_f(o,r)&&(o[o.length]=r),a-=1;return o}),Xt=bf,Ef=de(function(e){return e===null?"Null":e===void 0?"Undefined":Object.prototype.toString.call(e).slice(8,-1)}),Gs=Ef;function Ks(t,e,r,a){var o=Fs(t),l=Fs(e);function c(u,f){return Gi(u,f,r.slice(),a.slice())}return!Ds(function(u,f){return!Ds(c,f,u)},l,o)}function Gi(t,e,r,a){if(Vi(t,e))return!0;var o=Gs(t);if(o!==Gs(e))return!1;if(typeof t["fantasy-land/equals"]=="function"||typeof e["fantasy-land/equals"]=="function")return typeof t["fantasy-land/equals"]=="function"&&t["fantasy-land/equals"](e)&&typeof e["fantasy-land/equals"]=="function"&&e["fantasy-land/equals"](t);if(typeof t.equals=="function"||typeof e.equals=="function")return typeof t.equals=="function"&&t.equals(e)&&typeof e.equals=="function"&&e.equals(t);switch(o){case"Arguments":case"Array":case"Object":if(typeof t.constructor=="function"&&gf(t.constructor)==="Promise")return t===e;break;case"Boolean":case"Number":case"String":if(!(typeof t==typeof e&&Vi(t.valueOf(),e.valueOf())))return!1;break;case"Date":if(!Vi(t.valueOf(),e.valueOf()))return!1;break;case"Error":return t.name===e.name&&t.message===e.message;case"RegExp":if(!(t.source===e.source&&t.global===e.global&&t.ignoreCase===e.ignoreCase&&t.multiline===e.multiline&&t.sticky===e.sticky&&t.unicode===e.unicode))return!1;break}for(var l=r.length-1;l>=0;){if(r[l]===t)return a[l]===e;l-=1}switch(o){case"Map":return t.size!==e.size?!1:Ks(t.entries(),e.entries(),r.concat([t]),a.concat([e]));case"Set":return t.size!==e.size?!1:Ks(t.values(),e.values(),r.concat([t]),a.concat([e]));case"Arguments":case"Array":case"Object":case"Boolean":case"Number":case"String":case"Date":case"Error":case"RegExp":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"ArrayBuffer":break;default:return!1}var c=Xt(t);if(c.length!==Xt(e).length)return!1;var u=r.concat([t]),f=a.concat([e]);for(l=c.length-1;l>=0;){var p=c[l];if(!(Yt(p,e)&&Gi(e[p],t[p],u,f)))return!1;l-=1}return!0}var Af=le(function(e,r){return Gi(e,r,[],[])}),Vr=Af;function Tf(t,e,r){var a,o;if(typeof t.indexOf=="function")switch(typeof e){case"number":if(e===0){for(a=1/e;r<t.length;){if(o=t[r],o===0&&1/o===a)return r;r+=1}return-1}else if(e!==e){for(;r<t.length;){if(o=t[r],typeof o=="number"&&o!==o)return r;r+=1}return-1}return t.indexOf(e,r);case"string":case"boolean":case"function":case"undefined":return t.indexOf(e,r);case"object":if(e===null)return t.indexOf(e,r)}for(;r<t.length;){if(Vr(t[r],e))return r;r+=1}return-1}function qs(t,e){return Tf(e,t,0)>=0}function zn(t,e){for(var r=0,a=e.length,o=Array(a);r<a;)o[r]=t(e[r]),r+=1;return o}function Ki(t){var e=t.replace(/\\/g,"\\\\").replace(/[\b]/g,"\\b").replace(/\f/g,"\\f").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t").replace(/\v/g,"\\v").replace(/\0/g,"\\0");return'"'+e.replace(/"/g,'\\"')+'"'}var Gr=function(e){return(e<10?"0":"")+e},Sf=typeof Date.prototype.toISOString=="function"?function(e){return e.toISOString()}:function(e){return e.getUTCFullYear()+"-"+Gr(e.getUTCMonth()+1)+"-"+Gr(e.getUTCDate())+"T"+Gr(e.getUTCHours())+":"+Gr(e.getUTCMinutes())+":"+Gr(e.getUTCSeconds())+"."+(e.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"},xf=Sf;function kf(t){return function(){return!t.apply(this,arguments)}}function Hs(t,e,r){for(var a=0,o=r.length;a<o;)e=t(e,r[a]),a+=1;return e}function Bf(t,e){for(var r=0,a=e.length,o=[];r<a;)t(e[r])&&(o[o.length]=e[r]),r+=1;return o}function If(t){return Object.prototype.toString.call(t)==="[object Object]"}var Of=function(){function t(e,r){this.xf=r,this.f=e}return t.prototype["@@transducer/init"]=We.init,t.prototype["@@transducer/result"]=We.result,t.prototype["@@transducer/step"]=function(e,r){return this.f(r)?this.xf["@@transducer/step"](e,r):e},t}();function Cf(t){return function(e){return new Of(t,e)}}var Rf=le(Dn(["fantasy-land/filter","filter"],Cf,function(t,e){return If(e)?Hs(function(r,a){return t(e[a])&&(r[a]=e[a]),r},{},Xt(e)):Bf(t,e)})),Uf=Rf,Lf=le(function(e,r){return Uf(kf(e),r)}),$f=Lf;function Ys(t,e){var r=function(c){var u=e.concat([t]);return qs(c,u)?"<Circular>":Ys(c,u)},a=function(l,c){return zn(function(u){return Ki(u)+": "+r(l[u])},c.slice().sort())};switch(Object.prototype.toString.call(t)){case"[object Arguments]":return"(function() { return arguments; }("+zn(r,t).join(", ")+"))";case"[object Array]":return"["+zn(r,t).concat(a(t,$f(function(l){return/^\d+$/.test(l)},Xt(t)))).join(", ")+"]";case"[object Boolean]":return typeof t=="object"?"new Boolean("+r(t.valueOf())+")":t.toString();case"[object Date]":return"new Date("+(isNaN(t.valueOf())?r(NaN):Ki(xf(t)))+")";case"[object Map]":return"new Map("+r(Array.from(t))+")";case"[object Null]":return"null";case"[object Number]":return typeof t=="object"?"new Number("+r(t.valueOf())+")":1/t===-1/0?"-0":t.toString(10);case"[object Set]":return"new Set("+r(Array.from(t).sort())+")";case"[object String]":return typeof t=="object"?"new String("+r(t.valueOf())+")":Ki(t);case"[object Undefined]":return"undefined";default:if(typeof t.toString=="function"){var o=t.toString();if(o!=="[object Object]")return o}return"{"+a(t,Xt(t)).join(", ")+"}"}}var jf=de(function(e){return Ys(e,[])}),Qt=jf,Pf=le(function(e,r){if(e===r)return r;function a(f,p){if(f>p!=p>f)return p>f?p:f}var o=a(e,r);if(o!==void 0)return o;var l=a(typeof e,typeof r);if(l!==void 0)return l===typeof e?e:r;var c=Qt(e),u=a(c,Qt(r));return u!==void 0&&u===c?e:r}),Nf=Pf,Mf=function(){function t(e,r){this.xf=r,this.f=e}return t.prototype["@@transducer/init"]=We.init,t.prototype["@@transducer/result"]=We.result,t.prototype["@@transducer/step"]=function(e,r){return this.xf["@@transducer/step"](e,this.f(r))},t}(),Zf=function(e){return function(r){return new Mf(e,r)}},Xs=Zf,Ff=le(Dn(["fantasy-land/map","map"],Xs,function(e,r){switch(Object.prototype.toString.call(r)){case"[object Function]":return Fn(r.length,function(){return e.call(this,r.apply(this,arguments))});case"[object Object]":return Hs(function(a,o){return a[o]=e(r[o]),a},{},Xt(r));default:return zn(e,r)}})),qi=Ff,Wn=Number.isInteger||function(e){return e<<0===e};function Vn(t){return Object.prototype.toString.call(t)==="[object String]"}function Qs(t,e){var r=t<0?e.length+t:t;return Vn(e)?e.charAt(r):e[r]}var Df=le(function(e,r){if(r!=null)return Wn(e)?Qs(e,r):r[e]}),Rt=Df,zf=de(function(e){return Ht(e)?!0:!e||typeof e!="object"||Vn(e)?!1:e.length===0?!0:e.length>0?e.hasOwnProperty(0)&&e.hasOwnProperty(e.length-1):!1}),Hi=zf,Js=typeof Symbol<"u"?Symbol.iterator:"@@iterator";function Wf(t,e,r){return function(o,l,c){if(Hi(c))return t(o,l,c);if(c==null)return l;if(typeof c["fantasy-land/reduce"]=="function")return e(o,l,c,"fantasy-land/reduce");if(c[Js]!=null)return r(o,l,c[Js]());if(typeof c.next=="function")return r(o,l,c);if(typeof c.reduce=="function")return e(o,l,c,"reduce");throw new TypeError("reduce: list must be array or iterable")}}function eo(t,e,r){for(var a=0,o=r.length;a<o;){if(e=t["@@transducer/step"](e,r[a]),e&&e["@@transducer/reduced"]){e=e["@@transducer/value"];break}a+=1}return t["@@transducer/result"](e)}var Vf=le(function(e,r){return Wr(e.length,function(){return e.apply(r,arguments)})}),Gf=Vf;function Kf(t,e,r){for(var a=r.next();!a.done;){if(e=t["@@transducer/step"](e,a.value),e&&e["@@transducer/reduced"]){e=e["@@transducer/value"];break}a=r.next()}return t["@@transducer/result"](e)}function qf(t,e,r,a){return t["@@transducer/result"](r[a](Gf(t["@@transducer/step"],t),e))}var Hf=Wf(eo,qf,Kf),to=Hf,Yf=function(){function t(e){this.f=e}return t.prototype["@@transducer/init"]=function(){throw new Error("init not implemented on XWrap")},t.prototype["@@transducer/result"]=function(e){return e},t.prototype["@@transducer/step"]=function(e,r){return this.f(e,r)},t}();function Xf(t){return new Yf(t)}var Qf=qt(function(t,e,r){return to(typeof t=="function"?Xf(t):t,e,r)}),Kr=Qf,Jf=de(function(e){return function(){return e}}),ro=Jf,ed=le(function(e,r){return ff(r,[e])}),td=ed,rd=de(function(e){return Fn(e.length,e)}),Jt=rd;function nd(t,e,r){if(Wn(t)&&Ht(r)){var a=[].concat(r);return a[t]=e,a}var o={};for(var l in r)o[l]=r[l];return o[t]=e,o}var id=de(function(e){return e==null}),Gn=id,ad=qt(function t(e,r,a){if(e.length===0)return r;var o=e[0];if(e.length>1){var l=!Gn(a)&&Yt(o,a)&&typeof a[o]=="object"?a[o]:Wn(e[1])?[]:{};r=t(Array.prototype.slice.call(e,1),r,l)}return nd(o,r,a)}),sd=ad,od=qt(function(e,r,a){return sd([e],r,a)}),be=od;function Yi(t){var e=Object.prototype.toString.call(t);return e==="[object Function]"||e==="[object AsyncFunction]"||e==="[object GeneratorFunction]"||e==="[object AsyncGeneratorFunction]"}function ud(t){return function e(r){for(var a,o,l,c=[],u=0,f=r.length;u<f;){if(Hi(r[u]))for(a=t?e(r[u]):r[u],l=0,o=a.length;l<o;)c[c.length]=a[l],l+=1;else c[c.length]=r[u];u+=1}return c}}function ld(t){return{"@@transducer/value":t,"@@transducer/reduced":!0}}var no="@@transducer/init",Xi="@@transducer/step",io="@@transducer/result",cd=function(){function t(e){this.xf=e}return t.prototype[no]=We.init,t.prototype[io]=We.result,t.prototype[Xi]=function(e,r){var a=this.xf[Xi](e,r);return a["@@transducer/reduced"]?ld(a):a},t}(),hd=function(){function t(e){this.xf=new cd(e)}return t.prototype[no]=We.init,t.prototype[io]=We.result,t.prototype[Xi]=function(e,r){return Hi(r)?to(this.xf,e,r):eo(this.xf,e,[r])},t}(),fd=function(e){return new hd(e)},dd=fd;function pd(t){return function(e){return Xs(t)(dd(e))}}var gd=le(Dn(["fantasy-land/chain","chain"],pd,function(e,r){return typeof r=="function"?function(a){return e(r(a))(a)}:ud(!1)(qi(e,r))})),yd=gd;function md(t,e){return function(){return e.call(this,t.apply(this,arguments))}}function ao(t,e){return function(){var r=arguments.length;if(r===0)return e();var a=arguments[r-1];return Ht(a)||typeof a[t]!="function"?e.apply(this,arguments):a[t].apply(a,Array.prototype.slice.call(arguments,0,r-1))}}var vd=qt(ao("slice",function(e,r,a){return Array.prototype.slice.call(a,e,r)})),wd=vd,_d=de(ao("tail",wd(1,1/0))),bd=_d;function bt(){if(arguments.length===0)throw new Error("pipe requires at least one argument");return Wr(arguments[0].length,Kr(md,arguments[0],bd(arguments)))}function Ed(t){return t}var Ad=de(Ed),Ut=Ad,Td=le(function(e,r){if(Ht(e)){if(Ht(r))return e.concat(r);throw new TypeError(Qt(r)+" is not an array")}if(Vn(e)){if(Vn(r))return e+r;throw new TypeError(Qt(r)+" is not a string")}if(e!=null&&Yi(e["fantasy-land/concat"]))return e["fantasy-land/concat"](r);if(e!=null&&Yi(e.concat))return e.concat(r);throw new TypeError(Qt(e)+' does not have a method named "concat" or "fantasy-land/concat"')}),Sd=Td,xd=de(function(e){var r=Kr(Nf,0,qi(function(a){return a[0].length},e));return Wr(r,function(){for(var a=0;a<e.length;){if(e[a][0].apply(this,arguments))return e[a][1].apply(this,arguments);a+=1}})}),so=xd,kd=le(function(e,r){return r==null||r!==r?e:r}),Kn=kd,Bd=le(function(e,r){if(e.length===0||Gn(r))return!1;for(var a=r,o=0;o<e.length;)if(!Gn(a)&&Yt(e[o],a))a=a[e[o]],o+=1;else return!1;return!0}),Id=Bd,Od=le(function(e,r){return Id([e],r)}),Cd=Od,Rd=qt(function(e,r,a){return Fn(Math.max(e.length,r.length,a.length),function(){return e.apply(this,arguments)?r.apply(this,arguments):a.apply(this,arguments)})}),oo=Rd,Ud=le(qs),Ld=Ud,$d=le(function(e,r){return Fn(e+1,function(){var a=arguments[e];if(a!=null&&Yi(a[r]))return a[r].apply(a,Array.prototype.slice.call(arguments,0,e));throw new TypeError(Qt(a)+' does not have a method named "'+r+'"')})}),jd=$d,Pd=le(function(e,r){return r instanceof e||r!=null&&(r.constructor===e||e.name==="Object"&&typeof r=="object")}),qr=Pd,Nd=de(function(e){return!Gn(e)}),Qi=Nd,Md=jd(1,"join"),Zd=Md;function Fd(t,e){for(var r=e,a=0;a<t.length;a+=1){if(r==null)return;var o=t[a];Wn(o)?r=Qs(o,r):r=r[o]}return r}var Dd=le(Fd),zd=Dd,Wd=qt(function(e,r,a){return Kn(e,Rt(r,a))}),Vd=Wd,Gd=function(){function t(e,r){this.xf=r,this.f=e}return t.prototype["@@transducer/init"]=We.init,t.prototype["@@transducer/result"]=We.result,t.prototype["@@transducer/step"]=function(e,r){return this.f(r),this.xf["@@transducer/step"](e,r)},t}();function Kd(t){return function(e){return new Gd(t,e)}}var qd=le(Dn([],Kd,function(e,r){return e(r),r})),Hd=qd,re;(function(t){t.assertEqual=o=>o;function e(o){}t.assertIs=e;function r(o){throw new Error}t.assertNever=r,t.arrayToEnum=o=>{const l={};for(const c of o)l[c]=c;return l},t.getValidEnumValues=o=>{const l=t.objectKeys(o).filter(u=>typeof o[o[u]]!="number"),c={};for(const u of l)c[u]=o[u];return t.objectValues(c)},t.objectValues=o=>t.objectKeys(o).map(function(l){return o[l]}),t.objectKeys=typeof Object.keys=="function"?o=>Object.keys(o):o=>{const l=[];for(const c in o)Object.prototype.hasOwnProperty.call(o,c)&&l.push(c);return l},t.find=(o,l)=>{for(const c of o)if(l(c))return c},t.isInteger=typeof Number.isInteger=="function"?o=>Number.isInteger(o):o=>typeof o=="number"&&isFinite(o)&&Math.floor(o)===o;function a(o,l=" | "){return o.map(c=>typeof c=="string"?`'${c}'`:c).join(l)}t.joinValues=a,t.jsonStringifyReplacer=(o,l)=>typeof l=="bigint"?l.toString():l})(re||(re={}));var Ji;(function(t){t.mergeShapes=(e,r)=>({...e,...r})})(Ji||(Ji={}));var M=re.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Et=t=>{switch(typeof t){case"undefined":return M.undefined;case"string":return M.string;case"number":return isNaN(t)?M.nan:M.number;case"boolean":return M.boolean;case"function":return M.function;case"bigint":return M.bigint;case"symbol":return M.symbol;case"object":return Array.isArray(t)?M.array:t===null?M.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?M.promise:typeof Map<"u"&&t instanceof Map?M.map:typeof Set<"u"&&t instanceof Set?M.set:typeof Date<"u"&&t instanceof Date?M.date:M.object;default:return M.unknown}},k=re.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),Yd=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:"),xe=class ru extends Error{constructor(e){super(),this.issues=[],this.addIssue=a=>{this.issues=[...this.issues,a]},this.addIssues=(a=[])=>{this.issues=[...this.issues,...a]};const r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const r=e||function(l){return l.message},a={_errors:[]},o=l=>{for(const c of l.issues)if(c.code==="invalid_union")c.unionErrors.map(o);else if(c.code==="invalid_return_type")o(c.returnTypeError);else if(c.code==="invalid_arguments")o(c.argumentsError);else if(c.path.length===0)a._errors.push(r(c));else{let u=a,f=0;for(;f<c.path.length;){const p=c.path[f];f===c.path.length-1?(u[p]=u[p]||{_errors:[]},u[p]._errors.push(r(c))):u[p]=u[p]||{_errors:[]},u=u[p],f++}}};return o(this),a}static assert(e){if(!(e instanceof ru))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,re.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=r=>r.message){const r={},a=[];for(const o of this.issues)o.path.length>0?(r[o.path[0]]=r[o.path[0]]||[],r[o.path[0]].push(e(o))):a.push(e(o));return{formErrors:a,fieldErrors:r}}get formErrors(){return this.flatten()}};xe.create=t=>new xe(t);var er=(t,e)=>{let r;switch(t.code){case k.invalid_type:t.received===M.undefined?r="Required":r=`Expected ${t.expected}, received ${t.received}`;break;case k.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(t.expected,re.jsonStringifyReplacer)}`;break;case k.unrecognized_keys:r=`Unrecognized key(s) in object: ${re.joinValues(t.keys,", ")}`;break;case k.invalid_union:r="Invalid input";break;case k.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${re.joinValues(t.options)}`;break;case k.invalid_enum_value:r=`Invalid enum value. Expected ${re.joinValues(t.options)}, received '${t.received}'`;break;case k.invalid_arguments:r="Invalid function arguments";break;case k.invalid_return_type:r="Invalid function return type";break;case k.invalid_date:r="Invalid date";break;case k.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(r=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?r=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?r=`Invalid input: must end with "${t.validation.endsWith}"`:re.assertNever(t.validation):t.validation!=="regex"?r=`Invalid ${t.validation}`:r="Invalid";break;case k.too_small:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:r="Invalid input";break;case k.too_big:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?r=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:r="Invalid input";break;case k.custom:r="Invalid input";break;case k.invalid_intersection_types:r="Intersection results could not be merged";break;case k.not_multiple_of:r=`Number must be a multiple of ${t.multipleOf}`;break;case k.not_finite:r="Number must be finite";break;default:r=e.defaultError,re.assertNever(t)}return{message:r}},uo=er;function Xd(t){uo=t}function qn(){return uo}var Hn=t=>{const{data:e,path:r,errorMaps:a,issueData:o}=t,l=[...r,...o.path||[]],c={...o,path:l};if(o.message!==void 0)return{...o,path:l,message:o.message};let u="";const f=a.filter(p=>!!p).slice().reverse();for(const p of f)u=p(c,{data:e,defaultError:u}).message;return{...o,path:l,message:u}},Qd=[];function j(t,e){const r=qn(),a=Hn({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,r,r===er?void 0:er].filter(o=>!!o)});t.common.issues.push(a)}var Ee=class nu{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,r){const a=[];for(const o of r){if(o.status==="aborted")return K;o.status==="dirty"&&e.dirty(),a.push(o.value)}return{status:e.value,value:a}}static async mergeObjectAsync(e,r){const a=[];for(const o of r){const l=await o.key,c=await o.value;a.push({key:l,value:c})}return nu.mergeObjectSync(e,a)}static mergeObjectSync(e,r){const a={};for(const o of r){const{key:l,value:c}=o;if(l.status==="aborted"||c.status==="aborted")return K;l.status==="dirty"&&e.dirty(),c.status==="dirty"&&e.dirty(),l.value!=="__proto__"&&(typeof c.value<"u"||o.alwaysSet)&&(a[l.value]=c.value)}return{status:e.value,value:a}}},K=Object.freeze({status:"aborted"}),tr=t=>({status:"dirty",value:t}),ve=t=>({status:"valid",value:t}),ea=t=>t.status==="aborted",ta=t=>t.status==="dirty",Hr=t=>t.status==="valid",Yr=t=>typeof Promise<"u"&&t instanceof Promise;function Yn(t,e,r,a){if(r==="a"&&!a)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!a:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?a:r==="a"?a.call(t):a?a.value:e.get(t)}function lo(t,e,r,a,o){if(a==="m")throw new TypeError("Private method is not writable");if(a==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return a==="a"?o.call(t,r):o?o.value=r:e.set(t,r),r}var z;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e?.message})(z||(z={}));var Xr,Qr,Ve=class{constructor(t,e,r,a){this._cachedPath=[],this.parent=t,this.data=e,this._path=r,this._key=a}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},co=(t,e)=>{if(Hr(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const r=new xe(t.common.issues);return this._error=r,this._error}}};function X(t){if(!t)return{};const{errorMap:e,invalid_type_error:r,required_error:a,description:o}=t;if(e&&(r||a))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:o}:{errorMap:(c,u)=>{var f,p;const{message:b}=t;return c.code==="invalid_enum_value"?{message:b??u.defaultError}:typeof u.data>"u"?{message:(f=b??a)!==null&&f!==void 0?f:u.defaultError}:c.code!=="invalid_type"?{message:u.defaultError}:{message:(p=b??r)!==null&&p!==void 0?p:u.defaultError}},description:o}}var J=class{constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(t){return Et(t.data)}_getOrReturnCtx(t,e){return e||{common:t.parent.common,data:t.data,parsedType:Et(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new Ee,ctx:{common:t.parent.common,data:t.data,parsedType:Et(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){const e=this._parse(t);if(Yr(e))throw new Error("Synchronous parse encountered promise.");return e}_parseAsync(t){const e=this._parse(t);return Promise.resolve(e)}parse(t,e){const r=this.safeParse(t,e);if(r.success)return r.data;throw r.error}safeParse(t,e){var r;const a={common:{issues:[],async:(r=e?.async)!==null&&r!==void 0?r:!1,contextualErrorMap:e?.errorMap},path:e?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Et(t)},o=this._parseSync({data:t,path:a.path,parent:a});return co(a,o)}async parseAsync(t,e){const r=await this.safeParseAsync(t,e);if(r.success)return r.data;throw r.error}async safeParseAsync(t,e){const r={common:{issues:[],contextualErrorMap:e?.errorMap,async:!0},path:e?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Et(t)},a=this._parse({data:t,path:r.path,parent:r}),o=await(Yr(a)?a:Promise.resolve(a));return co(r,o)}refine(t,e){const r=a=>typeof e=="string"||typeof e>"u"?{message:e}:typeof e=="function"?e(a):e;return this._refinement((a,o)=>{const l=t(a),c=()=>o.addIssue({code:k.custom,...r(a)});return typeof Promise<"u"&&l instanceof Promise?l.then(u=>u?!0:(c(),!1)):l?!0:(c(),!1)})}refinement(t,e){return this._refinement((r,a)=>t(r)?!0:(a.addIssue(typeof e=="function"?e(r,a):e),!1))}_refinement(t){return new Pe({schema:this,typeName:G.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}optional(){return Ge.create(this,this._def)}nullable(){return Tt.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return $t.create(this,this._def)}promise(){return ar.create(this,this._def)}or(t){return sn.create([this,t],this._def)}and(t){return on.create(this,t,this._def)}transform(t){return new Pe({...X(this._def),schema:this,typeName:G.ZodEffects,effect:{type:"transform",transform:t}})}default(t){const e=typeof t=="function"?t:()=>t;return new fn({...X(this._def),innerType:this,defaultValue:e,typeName:G.ZodDefault})}brand(){return new ia({typeName:G.ZodBranded,type:this,...X(this._def)})}catch(t){const e=typeof t=="function"?t:()=>t;return new dn({...X(this._def),innerType:this,catchValue:e,typeName:G.ZodCatch})}describe(t){const e=this.constructor;return new e({...this._def,description:t})}pipe(t){return aa.create(this,t)}readonly(){return pn.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},Jd=/^c[^\s-]{8,}$/i,ep=/^[0-9a-z]+$/,tp=/^[0-9A-HJKMNP-TV-Z]{26}$/,rp=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,np=/^[a-z0-9_-]{21}$/i,ip=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,ap=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,sp="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",ra,op=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,up=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,lp=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,ho="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",cp=new RegExp(`^${ho}$`);function fo(t){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`),e}function hp(t){return new RegExp(`^${fo(t)}$`)}function po(t){let e=`${ho}T${fo(t)}`;const r=[];return r.push(t.local?"Z?":"Z"),t.offset&&r.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${r.join("|")})`,new RegExp(`^${e}$`)}function fp(t,e){return!!((e==="v4"||!e)&&op.test(t)||(e==="v6"||!e)&&up.test(t))}var rr=class bn extends J{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==M.string){const l=this._getOrReturnCtx(e);return j(l,{code:k.invalid_type,expected:M.string,received:l.parsedType}),K}const a=new Ee;let o;for(const l of this._def.checks)if(l.kind==="min")e.data.length<l.value&&(o=this._getOrReturnCtx(e,o),j(o,{code:k.too_small,minimum:l.value,type:"string",inclusive:!0,exact:!1,message:l.message}),a.dirty());else if(l.kind==="max")e.data.length>l.value&&(o=this._getOrReturnCtx(e,o),j(o,{code:k.too_big,maximum:l.value,type:"string",inclusive:!0,exact:!1,message:l.message}),a.dirty());else if(l.kind==="length"){const c=e.data.length>l.value,u=e.data.length<l.value;(c||u)&&(o=this._getOrReturnCtx(e,o),c?j(o,{code:k.too_big,maximum:l.value,type:"string",inclusive:!0,exact:!0,message:l.message}):u&&j(o,{code:k.too_small,minimum:l.value,type:"string",inclusive:!0,exact:!0,message:l.message}),a.dirty())}else if(l.kind==="email")ap.test(e.data)||(o=this._getOrReturnCtx(e,o),j(o,{validation:"email",code:k.invalid_string,message:l.message}),a.dirty());else if(l.kind==="emoji")ra||(ra=new RegExp(sp,"u")),ra.test(e.data)||(o=this._getOrReturnCtx(e,o),j(o,{validation:"emoji",code:k.invalid_string,message:l.message}),a.dirty());else if(l.kind==="uuid")rp.test(e.data)||(o=this._getOrReturnCtx(e,o),j(o,{validation:"uuid",code:k.invalid_string,message:l.message}),a.dirty());else if(l.kind==="nanoid")np.test(e.data)||(o=this._getOrReturnCtx(e,o),j(o,{validation:"nanoid",code:k.invalid_string,message:l.message}),a.dirty());else if(l.kind==="cuid")Jd.test(e.data)||(o=this._getOrReturnCtx(e,o),j(o,{validation:"cuid",code:k.invalid_string,message:l.message}),a.dirty());else if(l.kind==="cuid2")ep.test(e.data)||(o=this._getOrReturnCtx(e,o),j(o,{validation:"cuid2",code:k.invalid_string,message:l.message}),a.dirty());else if(l.kind==="ulid")tp.test(e.data)||(o=this._getOrReturnCtx(e,o),j(o,{validation:"ulid",code:k.invalid_string,message:l.message}),a.dirty());else if(l.kind==="url")try{new URL(e.data)}catch{o=this._getOrReturnCtx(e,o),j(o,{validation:"url",code:k.invalid_string,message:l.message}),a.dirty()}else l.kind==="regex"?(l.regex.lastIndex=0,l.regex.test(e.data)||(o=this._getOrReturnCtx(e,o),j(o,{validation:"regex",code:k.invalid_string,message:l.message}),a.dirty())):l.kind==="trim"?e.data=e.data.trim():l.kind==="includes"?e.data.includes(l.value,l.position)||(o=this._getOrReturnCtx(e,o),j(o,{code:k.invalid_string,validation:{includes:l.value,position:l.position},message:l.message}),a.dirty()):l.kind==="toLowerCase"?e.data=e.data.toLowerCase():l.kind==="toUpperCase"?e.data=e.data.toUpperCase():l.kind==="startsWith"?e.data.startsWith(l.value)||(o=this._getOrReturnCtx(e,o),j(o,{code:k.invalid_string,validation:{startsWith:l.value},message:l.message}),a.dirty()):l.kind==="endsWith"?e.data.endsWith(l.value)||(o=this._getOrReturnCtx(e,o),j(o,{code:k.invalid_string,validation:{endsWith:l.value},message:l.message}),a.dirty()):l.kind==="datetime"?po(l).test(e.data)||(o=this._getOrReturnCtx(e,o),j(o,{code:k.invalid_string,validation:"datetime",message:l.message}),a.dirty()):l.kind==="date"?cp.test(e.data)||(o=this._getOrReturnCtx(e,o),j(o,{code:k.invalid_string,validation:"date",message:l.message}),a.dirty()):l.kind==="time"?hp(l).test(e.data)||(o=this._getOrReturnCtx(e,o),j(o,{code:k.invalid_string,validation:"time",message:l.message}),a.dirty()):l.kind==="duration"?ip.test(e.data)||(o=this._getOrReturnCtx(e,o),j(o,{validation:"duration",code:k.invalid_string,message:l.message}),a.dirty()):l.kind==="ip"?fp(e.data,l.version)||(o=this._getOrReturnCtx(e,o),j(o,{validation:"ip",code:k.invalid_string,message:l.message}),a.dirty()):l.kind==="base64"?lp.test(e.data)||(o=this._getOrReturnCtx(e,o),j(o,{validation:"base64",code:k.invalid_string,message:l.message}),a.dirty()):re.assertNever(l);return{status:a.value,value:e.data}}_regex(e,r,a){return this.refinement(o=>e.test(o),{validation:r,code:k.invalid_string,...z.errToObj(a)})}_addCheck(e){return new bn({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...z.errToObj(e)})}url(e){return this._addCheck({kind:"url",...z.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...z.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...z.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...z.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...z.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...z.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...z.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...z.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...z.errToObj(e)})}datetime(e){var r,a;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:(r=e?.offset)!==null&&r!==void 0?r:!1,local:(a=e?.local)!==null&&a!==void 0?a:!1,...z.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision,...z.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...z.errToObj(e)})}regex(e,r){return this._addCheck({kind:"regex",regex:e,...z.errToObj(r)})}includes(e,r){return this._addCheck({kind:"includes",value:e,position:r?.position,...z.errToObj(r?.message)})}startsWith(e,r){return this._addCheck({kind:"startsWith",value:e,...z.errToObj(r)})}endsWith(e,r){return this._addCheck({kind:"endsWith",value:e,...z.errToObj(r)})}min(e,r){return this._addCheck({kind:"min",value:e,...z.errToObj(r)})}max(e,r){return this._addCheck({kind:"max",value:e,...z.errToObj(r)})}length(e,r){return this._addCheck({kind:"length",value:e,...z.errToObj(r)})}nonempty(e){return this.min(1,z.errToObj(e))}trim(){return new bn({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new bn({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new bn({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get minLength(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxLength(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};rr.create=t=>{var e;return new rr({checks:[],typeName:G.ZodString,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...X(t)})};function dp(t,e){const r=(t.toString().split(".")[1]||"").length,a=(e.toString().split(".")[1]||"").length,o=r>a?r:a,l=parseInt(t.toFixed(o).replace(".","")),c=parseInt(e.toFixed(o).replace(".",""));return l%c/Math.pow(10,o)}var Jr=class ka extends J{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==M.number){const l=this._getOrReturnCtx(e);return j(l,{code:k.invalid_type,expected:M.number,received:l.parsedType}),K}let a;const o=new Ee;for(const l of this._def.checks)l.kind==="int"?re.isInteger(e.data)||(a=this._getOrReturnCtx(e,a),j(a,{code:k.invalid_type,expected:"integer",received:"float",message:l.message}),o.dirty()):l.kind==="min"?(l.inclusive?e.data<l.value:e.data<=l.value)&&(a=this._getOrReturnCtx(e,a),j(a,{code:k.too_small,minimum:l.value,type:"number",inclusive:l.inclusive,exact:!1,message:l.message}),o.dirty()):l.kind==="max"?(l.inclusive?e.data>l.value:e.data>=l.value)&&(a=this._getOrReturnCtx(e,a),j(a,{code:k.too_big,maximum:l.value,type:"number",inclusive:l.inclusive,exact:!1,message:l.message}),o.dirty()):l.kind==="multipleOf"?dp(e.data,l.value)!==0&&(a=this._getOrReturnCtx(e,a),j(a,{code:k.not_multiple_of,multipleOf:l.value,message:l.message}),o.dirty()):l.kind==="finite"?Number.isFinite(e.data)||(a=this._getOrReturnCtx(e,a),j(a,{code:k.not_finite,message:l.message}),o.dirty()):re.assertNever(l);return{status:o.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,z.toString(r))}gt(e,r){return this.setLimit("min",e,!1,z.toString(r))}lte(e,r){return this.setLimit("max",e,!0,z.toString(r))}lt(e,r){return this.setLimit("max",e,!1,z.toString(r))}setLimit(e,r,a,o){return new ka({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:a,message:z.toString(o)}]})}_addCheck(e){return new ka({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:z.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:z.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:z.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:z.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:z.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:z.toString(r)})}finite(e){return this._addCheck({kind:"finite",message:z.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:z.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:z.toString(e)})}get minValue(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&re.isInteger(e.value))}get isFinite(){let e=null,r=null;for(const a of this._def.checks){if(a.kind==="finite"||a.kind==="int"||a.kind==="multipleOf")return!0;a.kind==="min"?(r===null||a.value>r)&&(r=a.value):a.kind==="max"&&(e===null||a.value<e)&&(e=a.value)}return Number.isFinite(r)&&Number.isFinite(e)}};Jr.create=t=>new Jr({checks:[],typeName:G.ZodNumber,coerce:t?.coerce||!1,...X(t)});var en=class Ba extends J{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==M.bigint){const l=this._getOrReturnCtx(e);return j(l,{code:k.invalid_type,expected:M.bigint,received:l.parsedType}),K}let a;const o=new Ee;for(const l of this._def.checks)l.kind==="min"?(l.inclusive?e.data<l.value:e.data<=l.value)&&(a=this._getOrReturnCtx(e,a),j(a,{code:k.too_small,type:"bigint",minimum:l.value,inclusive:l.inclusive,message:l.message}),o.dirty()):l.kind==="max"?(l.inclusive?e.data>l.value:e.data>=l.value)&&(a=this._getOrReturnCtx(e,a),j(a,{code:k.too_big,type:"bigint",maximum:l.value,inclusive:l.inclusive,message:l.message}),o.dirty()):l.kind==="multipleOf"?e.data%l.value!==BigInt(0)&&(a=this._getOrReturnCtx(e,a),j(a,{code:k.not_multiple_of,multipleOf:l.value,message:l.message}),o.dirty()):re.assertNever(l);return{status:o.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,z.toString(r))}gt(e,r){return this.setLimit("min",e,!1,z.toString(r))}lte(e,r){return this.setLimit("max",e,!0,z.toString(r))}lt(e,r){return this.setLimit("max",e,!1,z.toString(r))}setLimit(e,r,a,o){return new Ba({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:a,message:z.toString(o)}]})}_addCheck(e){return new Ba({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:z.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:z.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:z.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:z.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:z.toString(r)})}get minValue(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};en.create=t=>{var e;return new en({checks:[],typeName:G.ZodBigInt,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...X(t)})};var tn=class extends J{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==M.boolean){const r=this._getOrReturnCtx(t);return j(r,{code:k.invalid_type,expected:M.boolean,received:r.parsedType}),K}return ve(t.data)}};tn.create=t=>new tn({typeName:G.ZodBoolean,coerce:t?.coerce||!1,...X(t)});var rn=class iu extends J{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==M.date){const l=this._getOrReturnCtx(e);return j(l,{code:k.invalid_type,expected:M.date,received:l.parsedType}),K}if(isNaN(e.data.getTime())){const l=this._getOrReturnCtx(e);return j(l,{code:k.invalid_date}),K}const a=new Ee;let o;for(const l of this._def.checks)l.kind==="min"?e.data.getTime()<l.value&&(o=this._getOrReturnCtx(e,o),j(o,{code:k.too_small,message:l.message,inclusive:!0,exact:!1,minimum:l.value,type:"date"}),a.dirty()):l.kind==="max"?e.data.getTime()>l.value&&(o=this._getOrReturnCtx(e,o),j(o,{code:k.too_big,message:l.message,inclusive:!0,exact:!1,maximum:l.value,type:"date"}),a.dirty()):re.assertNever(l);return{status:a.value,value:new Date(e.data.getTime())}}_addCheck(e){return new iu({...this._def,checks:[...this._def.checks,e]})}min(e,r){return this._addCheck({kind:"min",value:e.getTime(),message:z.toString(r)})}max(e,r){return this._addCheck({kind:"max",value:e.getTime(),message:z.toString(r)})}get minDate(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e!=null?new Date(e):null}};rn.create=t=>new rn({checks:[],coerce:t?.coerce||!1,typeName:G.ZodDate,...X(t)});var Xn=class extends J{_parse(t){if(this._getType(t)!==M.symbol){const r=this._getOrReturnCtx(t);return j(r,{code:k.invalid_type,expected:M.symbol,received:r.parsedType}),K}return ve(t.data)}};Xn.create=t=>new Xn({typeName:G.ZodSymbol,...X(t)});var nn=class extends J{_parse(t){if(this._getType(t)!==M.undefined){const r=this._getOrReturnCtx(t);return j(r,{code:k.invalid_type,expected:M.undefined,received:r.parsedType}),K}return ve(t.data)}};nn.create=t=>new nn({typeName:G.ZodUndefined,...X(t)});var an=class extends J{_parse(t){if(this._getType(t)!==M.null){const r=this._getOrReturnCtx(t);return j(r,{code:k.invalid_type,expected:M.null,received:r.parsedType}),K}return ve(t.data)}};an.create=t=>new an({typeName:G.ZodNull,...X(t)});var nr=class extends J{constructor(){super(...arguments),this._any=!0}_parse(t){return ve(t.data)}};nr.create=t=>new nr({typeName:G.ZodAny,...X(t)});var Lt=class extends J{constructor(){super(...arguments),this._unknown=!0}_parse(t){return ve(t.data)}};Lt.create=t=>new Lt({typeName:G.ZodUnknown,...X(t)});var Je=class extends J{_parse(t){const e=this._getOrReturnCtx(t);return j(e,{code:k.invalid_type,expected:M.never,received:e.parsedType}),K}};Je.create=t=>new Je({typeName:G.ZodNever,...X(t)});var Qn=class extends J{_parse(t){if(this._getType(t)!==M.undefined){const r=this._getOrReturnCtx(t);return j(r,{code:k.invalid_type,expected:M.void,received:r.parsedType}),K}return ve(t.data)}};Qn.create=t=>new Qn({typeName:G.ZodVoid,...X(t)});var $t=class ci extends J{_parse(e){const{ctx:r,status:a}=this._processInputParams(e),o=this._def;if(r.parsedType!==M.array)return j(r,{code:k.invalid_type,expected:M.array,received:r.parsedType}),K;if(o.exactLength!==null){const c=r.data.length>o.exactLength.value,u=r.data.length<o.exactLength.value;(c||u)&&(j(r,{code:c?k.too_big:k.too_small,minimum:u?o.exactLength.value:void 0,maximum:c?o.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:o.exactLength.message}),a.dirty())}if(o.minLength!==null&&r.data.length<o.minLength.value&&(j(r,{code:k.too_small,minimum:o.minLength.value,type:"array",inclusive:!0,exact:!1,message:o.minLength.message}),a.dirty()),o.maxLength!==null&&r.data.length>o.maxLength.value&&(j(r,{code:k.too_big,maximum:o.maxLength.value,type:"array",inclusive:!0,exact:!1,message:o.maxLength.message}),a.dirty()),r.common.async)return Promise.all([...r.data].map((c,u)=>o.type._parseAsync(new Ve(r,c,r.path,u)))).then(c=>Ee.mergeArray(a,c));const l=[...r.data].map((c,u)=>o.type._parseSync(new Ve(r,c,r.path,u)));return Ee.mergeArray(a,l)}get element(){return this._def.type}min(e,r){return new ci({...this._def,minLength:{value:e,message:z.toString(r)}})}max(e,r){return new ci({...this._def,maxLength:{value:e,message:z.toString(r)}})}length(e,r){return new ci({...this._def,exactLength:{value:e,message:z.toString(r)}})}nonempty(e){return this.min(1,e)}};$t.create=(t,e)=>new $t({type:t,minLength:null,maxLength:null,exactLength:null,typeName:G.ZodArray,...X(e)});function ir(t){if(t instanceof ke){const e={};for(const r in t.shape){const a=t.shape[r];e[r]=Ge.create(ir(a))}return new ke({...t._def,shape:()=>e})}else return t instanceof $t?new $t({...t._def,type:ir(t.element)}):t instanceof Ge?Ge.create(ir(t.unwrap())):t instanceof Tt?Tt.create(ir(t.unwrap())):t instanceof At?At.create(t.items.map(e=>ir(e))):t}var ke=class Ze extends J{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),r=re.objectKeys(e);return this._cached={shape:e,keys:r}}_parse(e){if(this._getType(e)!==M.object){const p=this._getOrReturnCtx(e);return j(p,{code:k.invalid_type,expected:M.object,received:p.parsedType}),K}const{status:a,ctx:o}=this._processInputParams(e),{shape:l,keys:c}=this._getCached(),u=[];if(!(this._def.catchall instanceof Je&&this._def.unknownKeys==="strip"))for(const p in o.data)c.includes(p)||u.push(p);const f=[];for(const p of c){const b=l[p],w=o.data[p];f.push({key:{status:"valid",value:p},value:b._parse(new Ve(o,w,o.path,p)),alwaysSet:p in o.data})}if(this._def.catchall instanceof Je){const p=this._def.unknownKeys;if(p==="passthrough")for(const b of u)f.push({key:{status:"valid",value:b},value:{status:"valid",value:o.data[b]}});else if(p==="strict")u.length>0&&(j(o,{code:k.unrecognized_keys,keys:u}),a.dirty());else if(p!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const p=this._def.catchall;for(const b of u){const w=o.data[b];f.push({key:{status:"valid",value:b},value:p._parse(new Ve(o,w,o.path,b)),alwaysSet:b in o.data})}}return o.common.async?Promise.resolve().then(async()=>{const p=[];for(const b of f){const w=await b.key,v=await b.value;p.push({key:w,value:v,alwaysSet:b.alwaysSet})}return p}).then(p=>Ee.mergeObjectSync(a,p)):Ee.mergeObjectSync(a,f)}get shape(){return this._def.shape()}strict(e){return z.errToObj,new Ze({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(r,a)=>{var o,l,c,u;const f=(c=(l=(o=this._def).errorMap)===null||l===void 0?void 0:l.call(o,r,a).message)!==null&&c!==void 0?c:a.defaultError;return r.code==="unrecognized_keys"?{message:(u=z.errToObj(e).message)!==null&&u!==void 0?u:f}:{message:f}}}:{}})}strip(){return new Ze({...this._def,unknownKeys:"strip"})}passthrough(){return new Ze({...this._def,unknownKeys:"passthrough"})}extend(e){return new Ze({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Ze({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:G.ZodObject})}setKey(e,r){return this.augment({[e]:r})}catchall(e){return new Ze({...this._def,catchall:e})}pick(e){const r={};return re.objectKeys(e).forEach(a=>{e[a]&&this.shape[a]&&(r[a]=this.shape[a])}),new Ze({...this._def,shape:()=>r})}omit(e){const r={};return re.objectKeys(this.shape).forEach(a=>{e[a]||(r[a]=this.shape[a])}),new Ze({...this._def,shape:()=>r})}deepPartial(){return ir(this)}partial(e){const r={};return re.objectKeys(this.shape).forEach(a=>{const o=this.shape[a];e&&!e[a]?r[a]=o:r[a]=o.optional()}),new Ze({...this._def,shape:()=>r})}required(e){const r={};return re.objectKeys(this.shape).forEach(a=>{if(e&&!e[a])r[a]=this.shape[a];else{let l=this.shape[a];for(;l instanceof Ge;)l=l._def.innerType;r[a]=l}}),new Ze({...this._def,shape:()=>r})}keyof(){return vo(re.objectKeys(this.shape))}};ke.create=(t,e)=>new ke({shape:()=>t,unknownKeys:"strip",catchall:Je.create(),typeName:G.ZodObject,...X(e)}),ke.strictCreate=(t,e)=>new ke({shape:()=>t,unknownKeys:"strict",catchall:Je.create(),typeName:G.ZodObject,...X(e)}),ke.lazycreate=(t,e)=>new ke({shape:t,unknownKeys:"strip",catchall:Je.create(),typeName:G.ZodObject,...X(e)});var sn=class extends J{_parse(t){const{ctx:e}=this._processInputParams(t),r=this._def.options;function a(o){for(const c of o)if(c.result.status==="valid")return c.result;for(const c of o)if(c.result.status==="dirty")return e.common.issues.push(...c.ctx.common.issues),c.result;const l=o.map(c=>new xe(c.ctx.common.issues));return j(e,{code:k.invalid_union,unionErrors:l}),K}if(e.common.async)return Promise.all(r.map(async o=>{const l={...e,common:{...e.common,issues:[]},parent:null};return{result:await o._parseAsync({data:e.data,path:e.path,parent:l}),ctx:l}})).then(a);{let o;const l=[];for(const u of r){const f={...e,common:{...e.common,issues:[]},parent:null},p=u._parseSync({data:e.data,path:e.path,parent:f});if(p.status==="valid")return p;p.status==="dirty"&&!o&&(o={result:p,ctx:f}),f.common.issues.length&&l.push(f.common.issues)}if(o)return e.common.issues.push(...o.ctx.common.issues),o.result;const c=l.map(u=>new xe(u));return j(e,{code:k.invalid_union,unionErrors:c}),K}}get options(){return this._def.options}};sn.create=(t,e)=>new sn({options:t,typeName:G.ZodUnion,...X(e)});var et=t=>t instanceof un?et(t.schema):t instanceof Pe?et(t.innerType()):t instanceof ln?[t.value]:t instanceof cn?t.options:t instanceof hn?re.objectValues(t.enum):t instanceof fn?et(t._def.innerType):t instanceof nn?[void 0]:t instanceof an?[null]:t instanceof Ge?[void 0,...et(t.unwrap())]:t instanceof Tt?[null,...et(t.unwrap())]:t instanceof ia||t instanceof pn?et(t.unwrap()):t instanceof dn?et(t._def.innerType):[],go=class au extends J{_parse(e){const{ctx:r}=this._processInputParams(e);if(r.parsedType!==M.object)return j(r,{code:k.invalid_type,expected:M.object,received:r.parsedType}),K;const a=this.discriminator,o=r.data[a],l=this.optionsMap.get(o);return l?r.common.async?l._parseAsync({data:r.data,path:r.path,parent:r}):l._parseSync({data:r.data,path:r.path,parent:r}):(j(r,{code:k.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[a]}),K)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,r,a){const o=new Map;for(const l of r){const c=et(l.shape[e]);if(!c.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const u of c){if(o.has(u))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(u)}`);o.set(u,l)}}return new au({typeName:G.ZodDiscriminatedUnion,discriminator:e,options:r,optionsMap:o,...X(a)})}};function na(t,e){const r=Et(t),a=Et(e);if(t===e)return{valid:!0,data:t};if(r===M.object&&a===M.object){const o=re.objectKeys(e),l=re.objectKeys(t).filter(u=>o.indexOf(u)!==-1),c={...t,...e};for(const u of l){const f=na(t[u],e[u]);if(!f.valid)return{valid:!1};c[u]=f.data}return{valid:!0,data:c}}else if(r===M.array&&a===M.array){if(t.length!==e.length)return{valid:!1};const o=[];for(let l=0;l<t.length;l++){const c=t[l],u=e[l],f=na(c,u);if(!f.valid)return{valid:!1};o.push(f.data)}return{valid:!0,data:o}}else return r===M.date&&a===M.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}var on=class extends J{_parse(t){const{status:e,ctx:r}=this._processInputParams(t),a=(o,l)=>{if(ea(o)||ea(l))return K;const c=na(o.value,l.value);return c.valid?((ta(o)||ta(l))&&e.dirty(),{status:e.value,value:c.data}):(j(r,{code:k.invalid_intersection_types}),K)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([o,l])=>a(o,l)):a(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}};on.create=(t,e,r)=>new on({left:t,right:e,typeName:G.ZodIntersection,...X(r)});var At=class su extends J{_parse(e){const{status:r,ctx:a}=this._processInputParams(e);if(a.parsedType!==M.array)return j(a,{code:k.invalid_type,expected:M.array,received:a.parsedType}),K;if(a.data.length<this._def.items.length)return j(a,{code:k.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),K;!this._def.rest&&a.data.length>this._def.items.length&&(j(a,{code:k.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());const l=[...a.data].map((c,u)=>{const f=this._def.items[u]||this._def.rest;return f?f._parse(new Ve(a,c,a.path,u)):null}).filter(c=>!!c);return a.common.async?Promise.all(l).then(c=>Ee.mergeArray(r,c)):Ee.mergeArray(r,l)}get items(){return this._def.items}rest(e){return new su({...this._def,rest:e})}};At.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new At({items:t,typeName:G.ZodTuple,rest:null,...X(e)})};var yo=class Ia extends J{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:r,ctx:a}=this._processInputParams(e);if(a.parsedType!==M.object)return j(a,{code:k.invalid_type,expected:M.object,received:a.parsedType}),K;const o=[],l=this._def.keyType,c=this._def.valueType;for(const u in a.data)o.push({key:l._parse(new Ve(a,u,a.path,u)),value:c._parse(new Ve(a,a.data[u],a.path,u)),alwaysSet:u in a.data});return a.common.async?Ee.mergeObjectAsync(r,o):Ee.mergeObjectSync(r,o)}get element(){return this._def.valueType}static create(e,r,a){return r instanceof J?new Ia({keyType:e,valueType:r,typeName:G.ZodRecord,...X(a)}):new Ia({keyType:rr.create(),valueType:e,typeName:G.ZodRecord,...X(r)})}},Jn=class extends J{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:e,ctx:r}=this._processInputParams(t);if(r.parsedType!==M.map)return j(r,{code:k.invalid_type,expected:M.map,received:r.parsedType}),K;const a=this._def.keyType,o=this._def.valueType,l=[...r.data.entries()].map(([c,u],f)=>({key:a._parse(new Ve(r,c,r.path,[f,"key"])),value:o._parse(new Ve(r,u,r.path,[f,"value"]))}));if(r.common.async){const c=new Map;return Promise.resolve().then(async()=>{for(const u of l){const f=await u.key,p=await u.value;if(f.status==="aborted"||p.status==="aborted")return K;(f.status==="dirty"||p.status==="dirty")&&e.dirty(),c.set(f.value,p.value)}return{status:e.value,value:c}})}else{const c=new Map;for(const u of l){const f=u.key,p=u.value;if(f.status==="aborted"||p.status==="aborted")return K;(f.status==="dirty"||p.status==="dirty")&&e.dirty(),c.set(f.value,p.value)}return{status:e.value,value:c}}}};Jn.create=(t,e,r)=>new Jn({valueType:e,keyType:t,typeName:G.ZodMap,...X(r)});var ei=class Oa extends J{_parse(e){const{status:r,ctx:a}=this._processInputParams(e);if(a.parsedType!==M.set)return j(a,{code:k.invalid_type,expected:M.set,received:a.parsedType}),K;const o=this._def;o.minSize!==null&&a.data.size<o.minSize.value&&(j(a,{code:k.too_small,minimum:o.minSize.value,type:"set",inclusive:!0,exact:!1,message:o.minSize.message}),r.dirty()),o.maxSize!==null&&a.data.size>o.maxSize.value&&(j(a,{code:k.too_big,maximum:o.maxSize.value,type:"set",inclusive:!0,exact:!1,message:o.maxSize.message}),r.dirty());const l=this._def.valueType;function c(f){const p=new Set;for(const b of f){if(b.status==="aborted")return K;b.status==="dirty"&&r.dirty(),p.add(b.value)}return{status:r.value,value:p}}const u=[...a.data.values()].map((f,p)=>l._parse(new Ve(a,f,a.path,p)));return a.common.async?Promise.all(u).then(f=>c(f)):c(u)}min(e,r){return new Oa({...this._def,minSize:{value:e,message:z.toString(r)}})}max(e,r){return new Oa({...this._def,maxSize:{value:e,message:z.toString(r)}})}size(e,r){return this.min(e,r).max(e,r)}nonempty(e){return this.min(1,e)}};ei.create=(t,e)=>new ei({valueType:t,minSize:null,maxSize:null,typeName:G.ZodSet,...X(e)});var mo=class hi extends J{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:r}=this._processInputParams(e);if(r.parsedType!==M.function)return j(r,{code:k.invalid_type,expected:M.function,received:r.parsedType}),K;function a(u,f){return Hn({data:u,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,qn(),er].filter(p=>!!p),issueData:{code:k.invalid_arguments,argumentsError:f}})}function o(u,f){return Hn({data:u,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,qn(),er].filter(p=>!!p),issueData:{code:k.invalid_return_type,returnTypeError:f}})}const l={errorMap:r.common.contextualErrorMap},c=r.data;if(this._def.returns instanceof ar){const u=this;return ve(async function(...f){const p=new xe([]),b=await u._def.args.parseAsync(f,l).catch(E=>{throw p.addIssue(a(f,E)),p}),w=await Reflect.apply(c,this,b);return await u._def.returns._def.type.parseAsync(w,l).catch(E=>{throw p.addIssue(o(w,E)),p})})}else{const u=this;return ve(function(...f){const p=u._def.args.safeParse(f,l);if(!p.success)throw new xe([a(f,p.error)]);const b=Reflect.apply(c,this,p.data),w=u._def.returns.safeParse(b,l);if(!w.success)throw new xe([o(b,w.error)]);return w.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new hi({...this._def,args:At.create(e).rest(Lt.create())})}returns(e){return new hi({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,r,a){return new hi({args:e||At.create([]).rest(Lt.create()),returns:r||Lt.create(),typeName:G.ZodFunction,...X(a)})}},un=class extends J{get schema(){return this._def.getter()}_parse(t){const{ctx:e}=this._processInputParams(t);return this._def.getter()._parse({data:e.data,path:e.path,parent:e})}};un.create=(t,e)=>new un({getter:t,typeName:G.ZodLazy,...X(e)});var ln=class extends J{_parse(t){if(t.data!==this._def.value){const e=this._getOrReturnCtx(t);return j(e,{received:e.data,code:k.invalid_literal,expected:this._def.value}),K}return{status:"valid",value:t.data}}get value(){return this._def.value}};ln.create=(t,e)=>new ln({value:t,typeName:G.ZodLiteral,...X(e)});function vo(t,e){return new cn({values:t,typeName:G.ZodEnum,...X(e)})}var cn=class Ca extends J{constructor(){super(...arguments),Xr.set(this,void 0)}_parse(e){if(typeof e.data!="string"){const r=this._getOrReturnCtx(e),a=this._def.values;return j(r,{expected:re.joinValues(a),received:r.parsedType,code:k.invalid_type}),K}if(Yn(this,Xr,"f")||lo(this,Xr,new Set(this._def.values),"f"),!Yn(this,Xr,"f").has(e.data)){const r=this._getOrReturnCtx(e),a=this._def.values;return j(r,{received:r.data,code:k.invalid_enum_value,options:a}),K}return ve(e.data)}get options(){return this._def.values}get enum(){const e={};for(const r of this._def.values)e[r]=r;return e}get Values(){const e={};for(const r of this._def.values)e[r]=r;return e}get Enum(){const e={};for(const r of this._def.values)e[r]=r;return e}extract(e,r=this._def){return Ca.create(e,{...this._def,...r})}exclude(e,r=this._def){return Ca.create(this.options.filter(a=>!e.includes(a)),{...this._def,...r})}};Xr=new WeakMap,cn.create=vo;var hn=class extends J{constructor(){super(...arguments),Qr.set(this,void 0)}_parse(t){const e=re.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(t);if(r.parsedType!==M.string&&r.parsedType!==M.number){const a=re.objectValues(e);return j(r,{expected:re.joinValues(a),received:r.parsedType,code:k.invalid_type}),K}if(Yn(this,Qr,"f")||lo(this,Qr,new Set(re.getValidEnumValues(this._def.values)),"f"),!Yn(this,Qr,"f").has(t.data)){const a=re.objectValues(e);return j(r,{received:r.data,code:k.invalid_enum_value,options:a}),K}return ve(t.data)}get enum(){return this._def.values}};Qr=new WeakMap,hn.create=(t,e)=>new hn({values:t,typeName:G.ZodNativeEnum,...X(e)});var ar=class extends J{unwrap(){return this._def.type}_parse(t){const{ctx:e}=this._processInputParams(t);if(e.parsedType!==M.promise&&e.common.async===!1)return j(e,{code:k.invalid_type,expected:M.promise,received:e.parsedType}),K;const r=e.parsedType===M.promise?e.data:Promise.resolve(e.data);return ve(r.then(a=>this._def.type.parseAsync(a,{path:e.path,errorMap:e.common.contextualErrorMap})))}};ar.create=(t,e)=>new ar({type:t,typeName:G.ZodPromise,...X(e)});var Pe=class extends J{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===G.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){const{status:e,ctx:r}=this._processInputParams(t),a=this._def.effect||null,o={addIssue:l=>{j(r,l),l.fatal?e.abort():e.dirty()},get path(){return r.path}};if(o.addIssue=o.addIssue.bind(o),a.type==="preprocess"){const l=a.transform(r.data,o);if(r.common.async)return Promise.resolve(l).then(async c=>{if(e.value==="aborted")return K;const u=await this._def.schema._parseAsync({data:c,path:r.path,parent:r});return u.status==="aborted"?K:u.status==="dirty"||e.value==="dirty"?tr(u.value):u});{if(e.value==="aborted")return K;const c=this._def.schema._parseSync({data:l,path:r.path,parent:r});return c.status==="aborted"?K:c.status==="dirty"||e.value==="dirty"?tr(c.value):c}}if(a.type==="refinement"){const l=c=>{const u=a.refinement(c,o);if(r.common.async)return Promise.resolve(u);if(u instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return c};if(r.common.async===!1){const c=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return c.status==="aborted"?K:(c.status==="dirty"&&e.dirty(),l(c.value),{status:e.value,value:c.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(c=>c.status==="aborted"?K:(c.status==="dirty"&&e.dirty(),l(c.value).then(()=>({status:e.value,value:c.value}))))}if(a.type==="transform")if(r.common.async===!1){const l=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!Hr(l))return l;const c=a.transform(l.value,o);if(c instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:e.value,value:c}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(l=>Hr(l)?Promise.resolve(a.transform(l.value,o)).then(c=>({status:e.value,value:c})):l);re.assertNever(a)}};Pe.create=(t,e,r)=>new Pe({schema:t,typeName:G.ZodEffects,effect:e,...X(r)}),Pe.createWithPreprocess=(t,e,r)=>new Pe({schema:e,effect:{type:"preprocess",transform:t},typeName:G.ZodEffects,...X(r)});var Ge=class extends J{_parse(t){return this._getType(t)===M.undefined?ve(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}};Ge.create=(t,e)=>new Ge({innerType:t,typeName:G.ZodOptional,...X(e)});var Tt=class extends J{_parse(t){return this._getType(t)===M.null?ve(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}};Tt.create=(t,e)=>new Tt({innerType:t,typeName:G.ZodNullable,...X(e)});var fn=class extends J{_parse(t){const{ctx:e}=this._processInputParams(t);let r=e.data;return e.parsedType===M.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:e.path,parent:e})}removeDefault(){return this._def.innerType}};fn.create=(t,e)=>new fn({innerType:t,typeName:G.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...X(e)});var dn=class extends J{_parse(t){const{ctx:e}=this._processInputParams(t),r={...e,common:{...e.common,issues:[]}},a=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return Yr(a)?a.then(o=>({status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new xe(r.common.issues)},input:r.data})})):{status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new xe(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}};dn.create=(t,e)=>new dn({innerType:t,typeName:G.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...X(e)});var ti=class extends J{_parse(t){if(this._getType(t)!==M.nan){const r=this._getOrReturnCtx(t);return j(r,{code:k.invalid_type,expected:M.nan,received:r.parsedType}),K}return{status:"valid",value:t.data}}};ti.create=t=>new ti({typeName:G.ZodNaN,...X(t)});var pp=Symbol("zod_brand"),ia=class extends J{_parse(t){const{ctx:e}=this._processInputParams(t),r=e.data;return this._def.type._parse({data:r,path:e.path,parent:e})}unwrap(){return this._def.type}},aa=class ou extends J{_parse(e){const{status:r,ctx:a}=this._processInputParams(e);if(a.common.async)return(async()=>{const l=await this._def.in._parseAsync({data:a.data,path:a.path,parent:a});return l.status==="aborted"?K:l.status==="dirty"?(r.dirty(),tr(l.value)):this._def.out._parseAsync({data:l.value,path:a.path,parent:a})})();{const o=this._def.in._parseSync({data:a.data,path:a.path,parent:a});return o.status==="aborted"?K:o.status==="dirty"?(r.dirty(),{status:"dirty",value:o.value}):this._def.out._parseSync({data:o.value,path:a.path,parent:a})}}static create(e,r){return new ou({in:e,out:r,typeName:G.ZodPipeline})}},pn=class extends J{_parse(t){const e=this._def.innerType._parse(t),r=a=>(Hr(a)&&(a.value=Object.freeze(a.value)),a);return Yr(e)?e.then(a=>r(a)):r(e)}unwrap(){return this._def.innerType}};pn.create=(t,e)=>new pn({innerType:t,typeName:G.ZodReadonly,...X(e)});function wo(t,e={},r){return t?nr.create().superRefine((a,o)=>{var l,c;if(!t(a)){const u=typeof e=="function"?e(a):typeof e=="string"?{message:e}:e,f=(c=(l=u.fatal)!==null&&l!==void 0?l:r)!==null&&c!==void 0?c:!0,p=typeof u=="string"?{message:u}:u;o.addIssue({code:"custom",...p,fatal:f})}}):nr.create()}var gp={object:ke.lazycreate},G;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(G||(G={}));var yp=(t,e={message:`Input not instance of ${t.name}`})=>wo(r=>r instanceof t,e),_o=rr.create,bo=Jr.create,mp=ti.create,vp=en.create,Eo=tn.create,wp=rn.create,_p=Xn.create,bp=nn.create,Ep=an.create,Ap=nr.create,Tp=Lt.create,Sp=Je.create,xp=Qn.create,kp=$t.create,Bp=ke.create,Ip=ke.strictCreate,Op=sn.create,Cp=go.create,Rp=on.create,Up=At.create,Lp=yo.create,$p=Jn.create,jp=ei.create,Pp=mo.create,Np=un.create,Mp=ln.create,Zp=cn.create,Fp=hn.create,Dp=ar.create,Ao=Pe.create,zp=Ge.create,Wp=Tt.create,Vp=Pe.createWithPreprocess,Gp=aa.create,Kp=()=>_o().optional(),qp=()=>bo().optional(),Hp=()=>Eo().optional(),Yp={string:t=>rr.create({...t,coerce:!0}),number:t=>Jr.create({...t,coerce:!0}),boolean:t=>tn.create({...t,coerce:!0}),bigint:t=>en.create({...t,coerce:!0}),date:t=>rn.create({...t,coerce:!0})},Xp=K,T=Object.freeze({__proto__:null,defaultErrorMap:er,setErrorMap:Xd,getErrorMap:qn,makeIssue:Hn,EMPTY_PATH:Qd,addIssueToContext:j,ParseStatus:Ee,INVALID:K,DIRTY:tr,OK:ve,isAborted:ea,isDirty:ta,isValid:Hr,isAsync:Yr,get util(){return re},get objectUtil(){return Ji},ZodParsedType:M,getParsedType:Et,ZodType:J,datetimeRegex:po,ZodString:rr,ZodNumber:Jr,ZodBigInt:en,ZodBoolean:tn,ZodDate:rn,ZodSymbol:Xn,ZodUndefined:nn,ZodNull:an,ZodAny:nr,ZodUnknown:Lt,ZodNever:Je,ZodVoid:Qn,ZodArray:$t,ZodObject:ke,ZodUnion:sn,ZodDiscriminatedUnion:go,ZodIntersection:on,ZodTuple:At,ZodRecord:yo,ZodMap:Jn,ZodSet:ei,ZodFunction:mo,ZodLazy:un,ZodLiteral:ln,ZodEnum:cn,ZodNativeEnum:hn,ZodPromise:ar,ZodEffects:Pe,ZodTransformer:Pe,ZodOptional:Ge,ZodNullable:Tt,ZodDefault:fn,ZodCatch:dn,ZodNaN:ti,BRAND:pp,ZodBranded:ia,ZodPipeline:aa,ZodReadonly:pn,custom:wo,Schema:J,ZodSchema:J,late:gp,get ZodFirstPartyTypeKind(){return G},coerce:Yp,any:Ap,array:kp,bigint:vp,boolean:Eo,date:wp,discriminatedUnion:Cp,effect:Ao,enum:Zp,function:Pp,instanceof:yp,intersection:Rp,lazy:Np,literal:Mp,map:$p,nan:mp,nativeEnum:Fp,never:Sp,null:Ep,nullable:Wp,number:bo,object:Bp,oboolean:Hp,onumber:qp,optional:zp,ostring:Kp,pipeline:Gp,preprocess:Vp,promise:Dp,record:Lp,set:jp,strictObject:Ip,string:_o,symbol:_p,transformer:Ao,tuple:Up,undefined:bp,union:Op,unknown:Tp,void:xp,NEVER:Xp,ZodIssueCode:k,quotelessJson:Yd,ZodError:xe});function Qp({fetch:t,GRAPHQL_URL:e,logger:r}){const a=`
    query GetTransactions ($transactionIds: [ID!]!) {
      transactions(ids: $transactionIds) {
        edges {
          node {
            owner {
              address
            }
            tags {
              name
              value
            }
            block {
              id
              height
              timestamp
            }
          }
        }
      }
    }`,o=T.object({data:T.object({transactions:T.object({edges:T.array(T.object({node:T.record(T.any())}))})})});return l=>ee(l).chain(ae(c=>t(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:a,variables:{transactionIds:[c]}})}).then(async u=>{if(u.ok)return u.json();throw r('Error Encountered when querying gateway for transaction "%s"',c),new Error(`${u.status}: ${await u.text()}`)}).then(o.parse).then(zd(["data","transactions","edges","0","node"])))).toPromise()}var Jp=Ei(Qu(),1),To=(t="@permaweb/aoconnect")=>{const e=(0,Jp.default)(t);return e.child=r=>To(`${e.namespace}:${r}`),e.tap=(r,...a)=>Hd((...o)=>e(r,...a,...o)),e},So=({url:t,path:e})=>e?e.startsWith("/")?So({url:t,path:e.slice(1)}):(t=new URL(t),t.pathname+=e,t.toString()):t;function eg(t){return bt(Kn([]),Kr((e,r)=>bt(Vd([],r.name),td(r.value),be(r.name,Qe,e))(e),{}),qi(e=>e.length>1?e:e[0]))(t)}function xo(t){return so([[qr(String),Vr(t)],[qr(Array),Ld(t)],[Ms,cf]])}function jt(t){let e;return qr(xe,t)?(e=new Error(tg(t)),e.stack+=t.stack):qr(Error,t)?e=t:Cd("message",t)?e=new Error(t.message):qr(String,t)?e=new Error(t):e=new Error("An error occurred"),e}function tg(t){return bt(e=>function r(a,o,l){return Kr((c,u)=>bt(so([[Vr(k.invalid_arguments),()=>r(u.argumentsError,422,"Invalid Arguments")],[Vr(k.invalid_return_type),()=>r(u.returnTypeError,500,"Invalid Return")],[Vr(k.invalid_union),()=>yd(f=>r(f,400,"Invalid Union"),u.unionErrors)],[Ms,()=>[{...u,status:o,contextCode:l}]]]),Sd(c))(u.code),[],a.issues)}(e,400,""),e=>Kr((r,a)=>{const{message:o,path:l,contextCode:c}=a,u=l[1]||l[0],f=c?`${c} `:"";return r.push(`${f}'${u}': ${o}.`),r},[],e),Zd(" | "))(t)}var rg=T.object({id:T.string().min(1,{message:"message is required to be a message id"}),processId:T.string().min(1,{message:"process is required to be a process id"})});function ng(){return t=>ee(t).map(rg.parse).map(()=>t)}var gn=T.object({name:T.string(),value:T.string()}),ig=T.function().args(T.object({Id:T.string(),Target:T.string(),Owner:T.string(),Anchor:T.string().optional(),Data:T.any().default("1234"),Tags:T.array(T.object({name:T.string(),value:T.string()}))})).returns(T.promise(T.any())),ag=T.function().args(T.object({id:T.string().min(1,{message:"message id is required"}),processId:T.string().min(1,{message:"process id is required"})})).returns(T.promise(T.any())),sg=T.function().args(T.object({process:T.string().min(1,{message:"process id is required"}),from:T.string().optional(),to:T.string().optional(),sort:T.enum(["ASC","DESC"]).default("ASC"),limit:T.number().optional()})).returns(T.promise(T.object({edges:T.array(T.object({cursor:T.string(),node:T.object({Output:T.any().optional(),Messages:T.array(T.any()).optional(),Spawns:T.array(T.any()).optional(),Error:T.any().optional()})}))}))),ko=T.function().args(T.object({processId:T.string(),data:T.any(),tags:T.array(gn),anchor:T.string().optional(),signer:T.any()})).returns(T.promise(T.object({messageId:T.string()}).passthrough())),og=T.function().args(T.object({data:T.any(),tags:T.array(gn),signer:T.any()})).returns(T.promise(T.object({processId:T.string()}).passthrough())),ug=T.function().args(T.object({process:T.string(),message:T.string(),baseLayer:T.boolean().optional(),exclude:T.array(T.string()).optional()})).returns(T.promise(T.object({assignmentId:T.string()}).passthrough())),Bo=ko,Gy=T.function().args(T.object({suUrl:T.string().url(),processId:T.string()})).returns(T.promise(T.object({tags:T.array(gn)}).passthrough())),Ky=T.function().args(T.string()).returns(T.promise(T.object({url:T.string()}))),lg=T.function().args(T.string()).returns(T.promise(T.boolean())),cg=T.function().args(T.string()).returns(T.promise(T.object({tags:T.array(gn)}).passthrough())),ri=T.function().args(T.object({data:T.any(),tags:T.array(gn),target:T.string().optional(),anchor:T.string().optional()})).returns(T.promise(T.object({id:T.string(),raw:T.any()})));function hg({loadResult:t}){return t=ae(ag.implement(t)),e=>ee({id:e.id,processId:e.processId}).chain(t)}function fg(t){const e=ng(t),r=hg(t);return({message:a,process:o})=>ee({id:a,processId:o}).chain(e).chain(r).map(t.logger.tap('readResult result for message "%s": %O',a)).map(l=>l).bimap(jt,Ut).toPromise()}var Pt=(...t)=>e=>t.reduce((r,a)=>a(r),e),sa=t=>e=>e??t,dg=t=>e=>Pt(r=>r&&r[e],sa(t)),pg=t=>e=>{const r={};for(const a in e)e.hasOwnProperty(a)&&(r[a]=t(e[a],a,e));return r},gg=t=>(...e)=>!t(...e),ni=t=>e=>{const r=e.findIndex(o=>o.name==="Data-Protocol"&&o.value===t);if(r===-1)return[0,0];let a=e.findIndex((o,l)=>l>r&&o.name==="Data-Protocol"&&o.value!==t);return a===-1&&(a=e.length),[r,a]},oa=t=>{let e=t.findIndex(r=>r.name==="Data-Protocol");return e===-1&&(e=t.length),e},Io=t=>e=>e.name===t,ua=(t,e)=>Pt(ni(t),([r,a])=>e.slice(r,a))(e),Oo=(t,e,r)=>Pt(a=>ua(t,a),a=>a.filter(Io(e)))(r),yg=(t,e,r)=>Pt(a=>Oo(t,e,a),a=>a[0])(r),ii=(t,e)=>(e=e.filter(r=>r.name!=="Data-Protocol"||r.value!==t),e.length?[{name:"Data-Protocol",value:t},...e]:[]),mg=(t,e,r)=>{const[a,o]=ni(t)(r);let[l,c,u]=[r.slice(0,a),r.slice(a,o),r.slice(o)];return c.length||(e=ii(t,e),l=u,u=[]),[l,c,e,u].flat(1)},vg=(t,e)=>{const r=oa(e),[a,o]=[e.slice(0,r),e.slice(r)];return[a,t,o].flat(1)},Co=(t,e,r)=>{const[a,o]=ni(t)(r);let[l,c]=[r.slice(0,a),r.slice(o)];return c.length===r.length&&(l=c,c=[]),[l,ii(t,e),c].flat(1)},wg=(t,e)=>Co(t,[],e),_g=(t,e,r)=>{const[a,o]=ni(t)(r),[l,c,u]=[r.slice(0,a),r.slice(a,o),r.slice(o)];return[l,ii(t,c.filter(gg(Io(e)))),u].flat(1)},la=(t,e=!1)=>Pt(sa([]),r=>r.reduce((a,o)=>Pt(dg([])(o.name),l=>(l.push(o.value),l),l=>(a[o.name]=l,a))(a),{}),pg(r=>e?r:r[0]))(t),Ro=(t,e,r)=>Pt(sa([]),a=>ua(t,a),a=>la(a,r))(e),bg=(t,e)=>Ro(t,e,!0),Eg=(t,e)=>Ro(t,e,!1),Ag=t=>{const e=oa(t);return la(t.slice(0,e),!1)},Tg=t=>{const e=oa(t);return la(t.slice(0,e),!0)},Uo=t=>({findAll:e=>ua(t,e),findAllByName:(e,r)=>Oo(t,e,r),findByName:(e,r)=>yg(t,e,r),create:e=>ii(t,e),update:(e,r)=>Co(t,e,r),concat:(e,r)=>mg(t,e,r),removeAll:e=>wg(t,e),removeAllByName:(e,r)=>_g(t,e,r),parse:e=>Eg(t,e),parseAll:e=>bg(t,e),concatUnassoc:vg,parseUnassoc:Ag,parseAllUnassoc:Tg}),ca=Uo("ao"),Lo=Jt(ca.removeAllByName),Sg=Jt(ca.concat),$o=Jt(ca.concatUnassoc),xg=T.array(T.object({name:T.string(),value:T.string()}));function kg(){return t=>ee(t.tags).map(Kn([])).map(Lo("Variant")).map(Lo("Type")).map(Sg([{name:"Variant",value:"ao.TN.1"},{name:"Type",value:"Message"}])).map(xg.parse).map(be("tags",Qe,t))}function Bg({logger:t}){return e=>ee(e).chain(oo(ro(e.data),()=>Ct(e),()=>Ct(" ").map(be("data",Qe,e)).map(r=>bt(Rt("tags"),$o([{name:"Content-Type",value:"text/plain"}]),be("tags",Qe,r))(r)).map(t.tap('added pseudo-random string as message "data"')))).map(r=>bt(Rt("tags"),$o([{name:"SDK",value:"aoconnect"}]),be("tags",Qe,r))(r))}function Ig(t){const e=kg(t),r=Bg(t),a=ko.implement(t.deployMessage);return o=>ee(o).chain(e).chain(r).chain(ae(({id:l,data:c,tags:u,anchor:f,signer:p})=>a({processId:l,data:c,tags:u,anchor:f,signer:ri.implement(p)}))).map(l=>be("messageId",l.messageId,o))}function Og(t){const e=Ig(t);return({process:r,data:a,tags:o,anchor:l,signer:c})=>ee({id:r,data:a,tags:o,anchor:l,signer:c}).chain(e).map(u=>u.messageId).bimap(jt,Ut).toPromise()}var yn=(t,e,r)=>a=>e(a[t])?Ct(a):_t(`Tag '${t}': ${r}`);function Cg({loadTransactionMeta:t,logger:e}){return t=ae(cg.implement(t)),r=>ee(r).chain(t).map(Rt("tags")).map(eg).chain(yn("Data-Protocol",xo("ao"),"value 'ao' was not found on module")).chain(yn("Type",xo("Module"),"value 'Module' was not found on module")).chain(yn("Module-Format",Qi,"was not found on module")).chain(yn("Input-Encoding",Qi,"was not found on module")).chain(yn("Output-Encoding",Qi,"was not found on module")).bimap(e.tap("Verifying module source failed: %s"),e.tap("Verified module source"))}function Rg({logger:t,validateScheduler:e}){return e=ae(lg.implement(e)),r=>ee(r).chain(a=>e(a).chain(o=>o?Ct(a):_t(`Valid Scheduler-Location owned by ${a} not found`))).bimap(t.tap("Verifying scheduler failed: %s"),t.tap("Verified scheduler"))}function Ug({logger:t}){return e=>ee(e).map(t.tap("Checking for signer")).chain(r=>r?Ct(r):_t("signer not found"))}function Lg(t){const e=t.logger.child("verifyInput");t={...t,logger:e};const r=Cg(t),a=Rg(t),o=Ug(t);return l=>ee(l).chain(c=>r(c.module).map(()=>c)).chain(c=>a(c.scheduler)).map(()=>l).chain(c=>o(c.signer).map(()=>c)).bimap(e.tap("Error when verify input: %s"),e.tap("Successfully verified inputs"))}var ha=Uo("ao"),ai=Jt(ha.removeAllByName),$g=Jt(ha.concat),jo=Jt(ha.concatUnassoc),jg=T.array(T.object({name:T.string(),value:T.string()}));function Pg(){return t=>ee(t).map(Rt("tags")).map(Kn([])).map(ai("Variant")).map(ai("Type")).map(ai("Module")).map(ai("Scheduler")).map($g([{name:"Variant",value:"ao.TN.1"},{name:"Type",value:"Process"},{name:"Module",value:t.module},{name:"Scheduler",value:t.scheduler}])).map(jg.parse).map(be("tags",Qe,t))}function Ng({logger:t}){return e=>ee(e).chain(oo(ro(e.data),()=>Ct(e),()=>Ct(" ").map(be("data",Qe,e)).map(r=>bt(Rt("tags"),jo([{name:"Content-Type",value:"text/plain"}]),be("tags",Qe,r))(r)).map(t.tap('added pseudo-random string as process "data"')))).map(r=>bt(Rt("tags"),jo([{name:"SDK",value:"aoconnect"}]),be("tags",Qe,r))(r))}function Mg(t){const e=t.logger.child("uploadProcess");t={...t,logger:e};const r=Pg(t),a=Ng(t),o=og.implement(t.deployProcess);return l=>ee(l).chain(r).chain(a).chain(ae(({data:c,tags:u,signer:f})=>o({data:c,tags:u,signer:ri.implement(f)}))).map(c=>be("processId",c.processId,l))}function Zg(t){const e=Lg(t),r=Mg(t);return({module:a,scheduler:o,signer:l,tags:c,data:u})=>ee({module:a,scheduler:o,signer:l,tags:c,data:u}).chain(e).chain(r).map(f=>f.processId).bimap(jt,Ut).toPromise()}function Fg(t){const e=Bo.implement(t.deployMonitor);return r=>ee(r).chain(ae(({id:a,signer:o})=>e({processId:a,signer:ri.implement(o),data:" ",tags:[]}))).map(a=>be("monitorId",a.messageId,r))}function Dg(t){const e=Fg(t);return({process:r,signer:a})=>ee({id:r,signer:a}).chain(e).map(o=>o.monitorId).bimap(jt,Ut).toPromise()}function zg(t){const e=Bo.implement(t.deployUnmonitor);return r=>ee(r).chain(ae(({id:a,signer:o})=>e({processId:a,signer:ri.implement(o),data:" ",tags:[]}))).map(a=>be("monitorId",a.messageId,r))}function Wg(t){const e=zg(t);return({process:r,signer:a})=>ee({id:r,signer:a}).chain(e).map(o=>o.monitorId).bimap(jt,Ut).toPromise()}var Vg=T.object({process:T.string().min(1,{message:"process identifier is required"}),from:T.string().optional(),to:T.string().optional(),sort:T.enum(["ASC","DESC"]).default("ASC"),limit:T.number().optional()});function Gg(){return t=>ee(t).map(Vg.parse).map(()=>t)}function Kg({queryResults:t}){return t=ae(sg.implement(t)),e=>ee({process:e.process,from:e.from,to:e.to,sort:e.sort,limit:e.limit}).chain(t)}function qg(t){const e=Gg(t),r=Kg(t);return({process:a,from:o,to:l,sort:c,limit:u})=>ee({process:a,from:o,to:l,sort:c,limit:u}).chain(e).chain(r).map(t.logger.tap('readResults result for message "%s": %O',a)).map(f=>f).bimap(jt,Ut).toPromise()}var Hg=T.object({Id:T.string(),Target:T.string(),Owner:T.string(),Anchor:T.string().optional(),Data:T.any().default("1234"),Tags:T.array(T.object({name:T.string(),value:T.string()}))});function Yg(){return t=>ee(t).map(Hg.parse).map(e=>(e.Tags=e.Tags.concat([{name:"Data-Protocol",value:"ao"},{name:"Type",value:"Message"},{name:"Variant",value:"ao.TN.1"}]),e))}function Xg({dryrunFetch:t}){return ae(ig.implement(t))}function Qg(t){const e=Yg(t),r=Xg(t);return a=>ee(a).map(Jg).chain(e).chain(r).toPromise()}function Jg({process:t,data:e,tags:r,anchor:a,...o}){return{Id:"1234",Owner:"1234",...o,Target:t,Data:e||"1234",Tags:r||[],Anchor:a||"0"}}function ey(t){const e=ug.implement(t.deployAssign);return r=>ee(r).chain(ae(({process:a,message:o,baseLayer:l,exclude:c})=>e({process:a,message:o,baseLayer:l,exclude:c}))).map(a=>be("assignmentId",a.assignmentId,r))}function ty(t){const e=ey(t);return({process:r,message:a,baseLayer:o,exclude:l})=>ee({process:r,message:a,baseLayer:o,exclude:l}).chain(e).map(c=>c.assignmentId).bimap(jt,Ut).toPromise()}var ry="https://arweave.net",ny="https://mu.ao-testnet.xyz",iy="https://cu.ao-testnet.xyz";function ay({GRAPHQL_URL:t,GRAPHQL_MAX_RETRIES:e,GRAPHQL_RETRY_BACKOFF:r,GATEWAY_URL:a=ry,MU_URL:o=ny,CU_URL:l=iy}={}){const c=To();t||(t=So({url:a,path:"/graphql"}));const{validate:u}=Ns({cacheSize:100,GRAPHQL_URL:t,GRAPHQL_MAX_RETRIES:e,GRAPHQL_RETRY_BACKOFF:r}),f=uf({MAX_SIZE:25}),p=c.child("result"),b=fg({loadResult:af({fetch,CU_URL:l,logger:p}),logger:p}),w=c.child("message"),v=Og({loadProcessMeta:Wi({fetch,cache:f,logger:w}),deployMessage:Qh({fetch,MU_URL:o,logger:w}),logger:w}),E=c.child("spawn"),m=Zg({loadTransactionMeta:Qp({fetch,GRAPHQL_URL:t,logger:E}),validateScheduler:u,deployProcess:Jh({fetch,MU_URL:o,logger:E}),logger:E}),_=c.child("monitor"),A=Dg({loadProcessMeta:Wi({fetch,cache:f,logger:_}),deployMonitor:ef({fetch,MU_URL:o,logger:_}),logger:_}),S=c.child("unmonitor"),O=Wg({loadProcessMeta:Wi({fetch,cache:f,logger:S}),deployUnmonitor:tf({fetch,MU_URL:o,logger:S}),logger:_}),x=c.child("results"),C=qg({queryResults:sf({fetch,CU_URL:l,logger:x}),logger:x}),Z=c.child("dryrun"),L=Qg({dryrunFetch:nf({fetch,CU_URL:l,logger:Z}),logger:Z}),ce=c.child("assign"),Ie=ty({deployAssign:rf({fetch,MU_URL:o,logger:ce}),logger:w});return{result:b,results:C,message:v,spawn:m,monitor:A,unmonitor:O,dryrun:L,assign:Ie}}var Po={};Va(Po,{createDataItemSigner:()=>Oy});var No=Ei(tl(),1),Mo={};Va(Mo,{AVSCTap:()=>mn,ArweaveSigner:()=>ya,DataItem:()=>vn,MAX_TAG_BYTES:()=>oi,MIN_BINARY_SIZE:()=>_a,SIG_CONFIG:()=>sr,SignatureConfig:()=>Be,Signer:()=>zo,createData:()=>qo,default:()=>ky,deserializeTags:()=>si,indexToType:()=>ma,serializeTags:()=>wa,tagsExceedLimit:()=>Go,warparbundles:()=>By});var sy=Object.create,fa=Object.defineProperty,oy=Object.getOwnPropertyDescriptor,uy=Object.getOwnPropertyNames,ly=Object.getPrototypeOf,cy=Object.prototype.hasOwnProperty,tt=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),hy=(t,e)=>{for(var r in e)fa(t,r,{get:e[r],enumerable:!0})},fy=(t,e,r,a)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of uy(e))!cy.call(t,o)&&o!==r&&fa(t,o,{get:()=>e[o],enumerable:!(a=oy(e,o))||a.enumerable});return t},Nt=(t,e,r)=>(r=t!=null?sy(ly(t)):{},fy(e||!t||!t.__esModule?fa(r,"default",{value:t,enumerable:!0}):r,t)),dy=tt(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});function e(r){var a=4,o=r.length,l=o%a;if(!l)return r;var c=o,u=a-l,f=o+u,p=Buffer.alloc(f);for(p.write(r);u--;)p.write("=",c++);return p.toString()}t.default=e}),py=tt(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var e=dy();function r(f,p){return p===void 0&&(p="utf8"),Buffer.isBuffer(f)?l(f.toString("base64")):l(Buffer.from(f,p).toString("base64"))}function a(f,p){return p===void 0&&(p="utf8"),Buffer.from(o(f),"base64").toString(p)}function o(f){return f=f.toString(),e.default(f).replace(/\-/g,"+").replace(/_/g,"/")}function l(f){return f.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function c(f){return Buffer.from(o(f),"base64")}var u=r;u.encode=r,u.decode=a,u.toBase64=o,u.fromBase64=l,u.toBuffer=c,t.default=u}),da=tt((t,e)=>{e.exports=py().default,e.exports.default=e.exports}),Zo=tt(t=>{"use strict";t.byteLength=f,t.toByteArray=b,t.fromByteArray=E;var e=[],r=[],a=typeof Uint8Array<"u"?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(l=0,c=o.length;l<c;++l)e[l]=o[l],r[o.charCodeAt(l)]=l;var l,c;r[45]=62,r[95]=63;function u(m){var _=m.length;if(_%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var A=m.indexOf("=");A===-1&&(A=_);var S=A===_?0:4-A%4;return[A,S]}function f(m){var _=u(m),A=_[0],S=_[1];return(A+S)*3/4-S}function p(m,_,A){return(_+A)*3/4-A}function b(m){var _,A=u(m),S=A[0],O=A[1],x=new a(p(m,S,O)),C=0,Z=O>0?S-4:S,L;for(L=0;L<Z;L+=4)_=r[m.charCodeAt(L)]<<18|r[m.charCodeAt(L+1)]<<12|r[m.charCodeAt(L+2)]<<6|r[m.charCodeAt(L+3)],x[C++]=_>>16&255,x[C++]=_>>8&255,x[C++]=_&255;return O===2&&(_=r[m.charCodeAt(L)]<<2|r[m.charCodeAt(L+1)]>>4,x[C++]=_&255),O===1&&(_=r[m.charCodeAt(L)]<<10|r[m.charCodeAt(L+1)]<<4|r[m.charCodeAt(L+2)]>>2,x[C++]=_>>8&255,x[C++]=_&255),x}function w(m){return e[m>>18&63]+e[m>>12&63]+e[m>>6&63]+e[m&63]}function v(m,_,A){for(var S,O=[],x=_;x<A;x+=3)S=(m[x]<<16&16711680)+(m[x+1]<<8&65280)+(m[x+2]&255),O.push(w(S));return O.join("")}function E(m){for(var _,A=m.length,S=A%3,O=[],x=16383,C=0,Z=A-S;C<Z;C+=x)O.push(v(m,C,C+x>Z?Z:C+x));return S===1?(_=m[A-1],O.push(e[_>>2]+e[_<<4&63]+"==")):S===2&&(_=(m[A-2]<<8)+m[A-1],O.push(e[_>>10]+e[_>>4&63]+e[_<<2&63]+"=")),O.join("")}}),Fo=tt(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.b64UrlDecode=t.b64UrlEncode=t.bufferTob64Url=t.bufferTob64=t.b64UrlToBuffer=t.stringToB64Url=t.stringToBuffer=t.bufferToString=t.b64UrlToString=t.concatBuffers=void 0;var e=Zo();function r(v){let E=0;for(let A=0;A<v.length;A++)E+=v[A].byteLength;let m=new Uint8Array(E),_=0;m.set(new Uint8Array(v[0]),_),_+=v[0].byteLength;for(let A=1;A<v.length;A++)m.set(new Uint8Array(v[A]),_),_+=v[A].byteLength;return m}t.concatBuffers=r;function a(v){let E=u(v);return o(E)}t.b64UrlToString=a;function o(v){return new TextDecoder("utf-8",{fatal:!0}).decode(v)}t.bufferToString=o;function l(v){return new TextEncoder().encode(v)}t.stringToBuffer=l;function c(v){return p(l(v))}t.stringToB64Url=c;function u(v){return new Uint8Array(e.toByteArray(w(v)))}t.b64UrlToBuffer=u;function f(v){return e.fromByteArray(new Uint8Array(v))}t.bufferTob64=f;function p(v){return b(f(v))}t.bufferTob64Url=p;function b(v){return v.replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"")}t.b64UrlEncode=b;function w(v){v=v.replace(/\-/g,"+").replace(/\_/g,"/");let E;return v.length%4==0?E=0:E=4-v.length%4,v.concat("=".repeat(E))}t.b64UrlDecode=w}),gy=tt(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var e=Fo(),r=class{keyLength=4096;publicExponent=65537;hashAlgorithm="sha256";driver;constructor(){if(!this.detectWebCrypto())throw new Error("SubtleCrypto not available!");this.driver=crypto.subtle}async generateJWK(){let a=await this.driver.generateKey({name:"RSA-PSS",modulusLength:4096,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},!0,["sign"]),o=await this.driver.exportKey("jwk",a.privateKey);return{kty:o.kty,e:o.e,n:o.n,d:o.d,p:o.p,q:o.q,dp:o.dp,dq:o.dq,qi:o.qi}}async sign(a,o,{saltLength:l}={}){let c=await this.driver.sign({name:"RSA-PSS",saltLength:32},await this.jwkToCryptoKey(a),o);return new Uint8Array(c)}async hash(a,o="SHA-256"){let l=await this.driver.digest(o,a);return new Uint8Array(l)}async verify(a,o,l){let c={kty:"RSA",e:"AQAB",n:a},u=await this.jwkToPublicCryptoKey(c),f=await this.driver.digest("SHA-256",o),p=await this.driver.verify({name:"RSA-PSS",saltLength:0},u,l,o),b=await this.driver.verify({name:"RSA-PSS",saltLength:32},u,l,o),w=await this.driver.verify({name:"RSA-PSS",saltLength:Math.ceil((u.algorithm.modulusLength-1)/8)-f.byteLength-2},u,l,o);return p||b||w}async jwkToCryptoKey(a){return this.driver.importKey("jwk",a,{name:"RSA-PSS",hash:{name:"SHA-256"}},!1,["sign"])}async jwkToPublicCryptoKey(a){return this.driver.importKey("jwk",a,{name:"RSA-PSS",hash:{name:"SHA-256"}},!1,["verify"])}detectWebCrypto(){if(typeof crypto>"u")return!1;let a=crypto?.subtle;return a===void 0?!1:["generateKey","importKey","exportKey","digest","sign"].every(o=>typeof a[o]=="function")}async encrypt(a,o,l){let c=await this.driver.importKey("raw",typeof o=="string"?e.stringToBuffer(o):o,{name:"PBKDF2",length:32},!1,["deriveKey"]),u=await this.driver.deriveKey({name:"PBKDF2",salt:l?e.stringToBuffer(l):e.stringToBuffer("salt"),iterations:1e5,hash:"SHA-256"},c,{name:"AES-CBC",length:256},!1,["encrypt","decrypt"]),f=new Uint8Array(16);crypto.getRandomValues(f);let p=await this.driver.encrypt({name:"AES-CBC",iv:f},u,a);return e.concatBuffers([f,p])}async decrypt(a,o,l){let c=await this.driver.importKey("raw",typeof o=="string"?e.stringToBuffer(o):o,{name:"PBKDF2",length:32},!1,["deriveKey"]),u=await this.driver.deriveKey({name:"PBKDF2",salt:l?e.stringToBuffer(l):e.stringToBuffer("salt"),iterations:1e5,hash:"SHA-256"},c,{name:"AES-CBC",length:256},!1,["encrypt","decrypt"]),f=a.slice(0,16),p=await this.driver.decrypt({name:"AES-CBC",iv:f},u,a.slice(16));return e.concatBuffers([p])}};t.default=r}),yy=tt(t=>{t.read=function(e,r,a,o,l){var c,u,f=l*8-o-1,p=(1<<f)-1,b=p>>1,w=-7,v=a?l-1:0,E=a?-1:1,m=e[r+v];for(v+=E,c=m&(1<<-w)-1,m>>=-w,w+=f;w>0;c=c*256+e[r+v],v+=E,w-=8);for(u=c&(1<<-w)-1,c>>=-w,w+=o;w>0;u=u*256+e[r+v],v+=E,w-=8);if(c===0)c=1-b;else{if(c===p)return u?NaN:(m?-1:1)*(1/0);u=u+Math.pow(2,o),c=c-b}return(m?-1:1)*u*Math.pow(2,c-o)},t.write=function(e,r,a,o,l,c){var u,f,p,b=c*8-l-1,w=(1<<b)-1,v=w>>1,E=l===23?Math.pow(2,-24)-Math.pow(2,-77):0,m=o?0:c-1,_=o?1:-1,A=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(f=isNaN(r)?1:0,u=w):(u=Math.floor(Math.log(r)/Math.LN2),r*(p=Math.pow(2,-u))<1&&(u--,p*=2),u+v>=1?r+=E/p:r+=E*Math.pow(2,1-v),r*p>=2&&(u++,p/=2),u+v>=w?(f=0,u=w):u+v>=1?(f=(r*p-1)*Math.pow(2,l),u=u+v):(f=r*Math.pow(2,v-1)*Math.pow(2,l),u=0));l>=8;e[a+m]=f&255,m+=_,f/=256,l-=8);for(u=u<<l|f,b+=l;b>0;e[a+m]=u&255,m+=_,u/=256,b-=8);e[a+m-_]|=A*128}}),pa=tt(t=>{"use strict";var e=Zo(),r=yy(),a=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=u,t.SlowBuffer=O,t.INSPECT_MAX_BYTES=50;var o=2147483647;t.kMaxLength=o,u.TYPED_ARRAY_SUPPORT=l(),!u.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function l(){try{let n=new Uint8Array(1),i={foo:function(){return 42}};return Object.setPrototypeOf(i,Uint8Array.prototype),Object.setPrototypeOf(n,i),n.foo()===42}catch{return!1}}Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}});function c(n){if(n>o)throw new RangeError('The value "'+n+'" is invalid for option "size"');let i=new Uint8Array(n);return Object.setPrototypeOf(i,u.prototype),i}function u(n,i,s){if(typeof n=="number"){if(typeof i=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return w(n)}return f(n,i,s)}u.poolSize=8192;function f(n,i,s){if(typeof n=="string")return v(n,i);if(ArrayBuffer.isView(n))return m(n);if(n==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof n);if(ne(n,ArrayBuffer)||n&&ne(n.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(ne(n,SharedArrayBuffer)||n&&ne(n.buffer,SharedArrayBuffer)))return _(n,i,s);if(typeof n=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let h=n.valueOf&&n.valueOf();if(h!=null&&h!==n)return u.from(h,i,s);let d=A(n);if(d)return d;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof n[Symbol.toPrimitive]=="function")return u.from(n[Symbol.toPrimitive]("string"),i,s);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof n)}u.from=function(n,i,s){return f(n,i,s)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array);function p(n){if(typeof n!="number")throw new TypeError('"size" argument must be of type number');if(n<0)throw new RangeError('The value "'+n+'" is invalid for option "size"')}function b(n,i,s){return p(n),n<=0?c(n):i!==void 0?typeof s=="string"?c(n).fill(i,s):c(n).fill(i):c(n)}u.alloc=function(n,i,s){return b(n,i,s)};function w(n){return p(n),c(n<0?0:S(n)|0)}u.allocUnsafe=function(n){return w(n)},u.allocUnsafeSlow=function(n){return w(n)};function v(n,i){if((typeof i!="string"||i==="")&&(i="utf8"),!u.isEncoding(i))throw new TypeError("Unknown encoding: "+i);let s=x(n,i)|0,h=c(s),d=h.write(n,i);return d!==s&&(h=h.slice(0,d)),h}function E(n){let i=n.length<0?0:S(n.length)|0,s=c(i);for(let h=0;h<i;h+=1)s[h]=n[h]&255;return s}function m(n){if(ne(n,Uint8Array)){let i=new Uint8Array(n);return _(i.buffer,i.byteOffset,i.byteLength)}return E(n)}function _(n,i,s){if(i<0||n.byteLength<i)throw new RangeError('"offset" is outside of buffer bounds');if(n.byteLength<i+(s||0))throw new RangeError('"length" is outside of buffer bounds');let h;return i===void 0&&s===void 0?h=new Uint8Array(n):s===void 0?h=new Uint8Array(n,i):h=new Uint8Array(n,i,s),Object.setPrototypeOf(h,u.prototype),h}function A(n){if(u.isBuffer(n)){let i=S(n.length)|0,s=c(i);return s.length===0||n.copy(s,0,0,i),s}if(n.length!==void 0)return typeof n.length!="number"||Re(n.length)?c(0):E(n);if(n.type==="Buffer"&&Array.isArray(n.data))return E(n.data)}function S(n){if(n>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return n|0}function O(n){return+n!=n&&(n=0),u.alloc(+n)}u.isBuffer=function(n){return n!=null&&n._isBuffer===!0&&n!==u.prototype},u.compare=function(n,i){if(ne(n,Uint8Array)&&(n=u.from(n,n.offset,n.byteLength)),ne(i,Uint8Array)&&(i=u.from(i,i.offset,i.byteLength)),!u.isBuffer(n)||!u.isBuffer(i))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(n===i)return 0;let s=n.length,h=i.length;for(let d=0,g=Math.min(s,h);d<g;++d)if(n[d]!==i[d]){s=n[d],h=i[d];break}return s<h?-1:h<s?1:0},u.isEncoding=function(n){switch(String(n).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(n,i){if(!Array.isArray(n))throw new TypeError('"list" argument must be an Array of Buffers');if(n.length===0)return u.alloc(0);let s;if(i===void 0)for(i=0,s=0;s<n.length;++s)i+=n[s].length;let h=u.allocUnsafe(i),d=0;for(s=0;s<n.length;++s){let g=n[s];if(ne(g,Uint8Array))d+g.length>h.length?(u.isBuffer(g)||(g=u.from(g)),g.copy(h,d)):Uint8Array.prototype.set.call(h,g,d);else if(u.isBuffer(g))g.copy(h,d);else throw new TypeError('"list" argument must be an Array of Buffers');d+=g.length}return h};function x(n,i){if(u.isBuffer(n))return n.length;if(ArrayBuffer.isView(n)||ne(n,ArrayBuffer))return n.byteLength;if(typeof n!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof n);let s=n.length,h=arguments.length>2&&arguments[2]===!0;if(!h&&s===0)return 0;let d=!1;for(;;)switch(i){case"ascii":case"latin1":case"binary":return s;case"utf8":case"utf-8":return Ce(n).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return s*2;case"hex":return s>>>1;case"base64":return dt(n).length;default:if(d)return h?-1:Ce(n).length;i=(""+i).toLowerCase(),d=!0}}u.byteLength=x;function C(n,i,s){let h=!1;if((i===void 0||i<0)&&(i=0),i>this.length||((s===void 0||s>this.length)&&(s=this.length),s<=0)||(s>>>=0,i>>>=0,s<=i))return"";for(n||(n="utf8");;)switch(n){case"hex":return fr(this,i,s);case"utf8":case"utf-8":return it(this,i,s);case"ascii":return cr(this,i,s);case"latin1":case"binary":return hr(this,i,s);case"base64":return ur(this,i,s);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return dr(this,i,s);default:if(h)throw new TypeError("Unknown encoding: "+n);n=(n+"").toLowerCase(),h=!0}}u.prototype._isBuffer=!0;function Z(n,i,s){let h=n[i];n[i]=n[s],n[s]=h}u.prototype.swap16=function(){let n=this.length;if(n%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let i=0;i<n;i+=2)Z(this,i,i+1);return this},u.prototype.swap32=function(){let n=this.length;if(n%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let i=0;i<n;i+=4)Z(this,i,i+3),Z(this,i+1,i+2);return this},u.prototype.swap64=function(){let n=this.length;if(n%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let i=0;i<n;i+=8)Z(this,i,i+7),Z(this,i+1,i+6),Z(this,i+2,i+5),Z(this,i+3,i+4);return this},u.prototype.toString=function(){let n=this.length;return n===0?"":arguments.length===0?it(this,0,n):C.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(n){if(!u.isBuffer(n))throw new TypeError("Argument must be a Buffer");return this===n?!0:u.compare(this,n)===0},u.prototype.inspect=function(){let n="",i=t.INSPECT_MAX_BYTES;return n=this.toString("hex",0,i).replace(/(.{2})/g,"$1 ").trim(),this.length>i&&(n+=" ... "),"<Buffer "+n+">"},a&&(u.prototype[a]=u.prototype.inspect),u.prototype.compare=function(n,i,s,h,d){if(ne(n,Uint8Array)&&(n=u.from(n,n.offset,n.byteLength)),!u.isBuffer(n))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof n);if(i===void 0&&(i=0),s===void 0&&(s=n?n.length:0),h===void 0&&(h=0),d===void 0&&(d=this.length),i<0||s>n.length||h<0||d>this.length)throw new RangeError("out of range index");if(h>=d&&i>=s)return 0;if(h>=d)return-1;if(i>=s)return 1;if(i>>>=0,s>>>=0,h>>>=0,d>>>=0,this===n)return 0;let g=d-h,y=s-i,B=Math.min(g,y),F=this.slice(h,d),U=n.slice(i,s);for(let R=0;R<B;++R)if(F[R]!==U[R]){g=F[R],y=U[R];break}return g<y?-1:y<g?1:0};function L(n,i,s,h,d){if(n.length===0)return-1;if(typeof s=="string"?(h=s,s=0):s>2147483647?s=2147483647:s<-2147483648&&(s=-2147483648),s=+s,Re(s)&&(s=d?0:n.length-1),s<0&&(s=n.length+s),s>=n.length){if(d)return-1;s=n.length-1}else if(s<0)if(d)s=0;else return-1;if(typeof i=="string"&&(i=u.from(i,h)),u.isBuffer(i))return i.length===0?-1:ce(n,i,s,h,d);if(typeof i=="number")return i=i&255,typeof Uint8Array.prototype.indexOf=="function"?d?Uint8Array.prototype.indexOf.call(n,i,s):Uint8Array.prototype.lastIndexOf.call(n,i,s):ce(n,[i],s,h,d);throw new TypeError("val must be string, number or Buffer")}function ce(n,i,s,h,d){let g=1,y=n.length,B=i.length;if(h!==void 0&&(h=String(h).toLowerCase(),h==="ucs2"||h==="ucs-2"||h==="utf16le"||h==="utf-16le")){if(n.length<2||i.length<2)return-1;g=2,y/=2,B/=2,s/=2}function F(R,P){return g===1?R[P]:R.readUInt16BE(P*g)}let U;if(d){let R=-1;for(U=s;U<y;U++)if(F(n,U)===F(i,R===-1?0:U-R)){if(R===-1&&(R=U),U-R+1===B)return R*g}else R!==-1&&(U-=U-R),R=-1}else for(s+B>y&&(s=y-B),U=s;U>=0;U--){let R=!0;for(let P=0;P<B;P++)if(F(n,U+P)!==F(i,P)){R=!1;break}if(R)return U}return-1}u.prototype.includes=function(n,i,s){return this.indexOf(n,i,s)!==-1},u.prototype.indexOf=function(n,i,s){return L(this,n,i,s,!0)},u.prototype.lastIndexOf=function(n,i,s){return L(this,n,i,s,!1)};function Ie(n,i,s,h){s=Number(s)||0;let d=n.length-s;h?(h=Number(h),h>d&&(h=d)):h=d;let g=i.length;h>g/2&&(h=g/2);let y;for(y=0;y<h;++y){let B=parseInt(i.substr(y*2,2),16);if(Re(B))return y;n[s+y]=B}return y}function Te(n,i,s,h){return we(Ce(i,n.length-s),n,s,h)}function xt(n,i,s,h){return we(mr(i),n,s,h)}function nt(n,i,s,h){return we(dt(i),n,s,h)}function kt(n,i,s,h){return we(vr(i,n.length-s),n,s,h)}u.prototype.write=function(n,i,s,h){if(i===void 0)h="utf8",s=this.length,i=0;else if(s===void 0&&typeof i=="string")h=i,s=this.length,i=0;else if(isFinite(i))i=i>>>0,isFinite(s)?(s=s>>>0,h===void 0&&(h="utf8")):(h=s,s=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let d=this.length-i;if((s===void 0||s>d)&&(s=d),n.length>0&&(s<0||i<0)||i>this.length)throw new RangeError("Attempt to write outside buffer bounds");h||(h="utf8");let g=!1;for(;;)switch(h){case"hex":return Ie(this,n,i,s);case"utf8":case"utf-8":return Te(this,n,i,s);case"ascii":case"latin1":case"binary":return xt(this,n,i,s);case"base64":return nt(this,n,i,s);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return kt(this,n,i,s);default:if(g)throw new TypeError("Unknown encoding: "+h);h=(""+h).toLowerCase(),g=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function ur(n,i,s){return i===0&&s===n.length?e.fromByteArray(n):e.fromByteArray(n.slice(i,s))}function it(n,i,s){s=Math.min(n.length,s);let h=[],d=i;for(;d<s;){let g=n[d],y=null,B=g>239?4:g>223?3:g>191?2:1;if(d+B<=s){let F,U,R,P;switch(B){case 1:g<128&&(y=g);break;case 2:F=n[d+1],(F&192)===128&&(P=(g&31)<<6|F&63,P>127&&(y=P));break;case 3:F=n[d+1],U=n[d+2],(F&192)===128&&(U&192)===128&&(P=(g&15)<<12|(F&63)<<6|U&63,P>2047&&(P<55296||P>57343)&&(y=P));break;case 4:F=n[d+1],U=n[d+2],R=n[d+3],(F&192)===128&&(U&192)===128&&(R&192)===128&&(P=(g&15)<<18|(F&63)<<12|(U&63)<<6|R&63,P>65535&&P<1114112&&(y=P))}}y===null?(y=65533,B=1):y>65535&&(y-=65536,h.push(y>>>10&1023|55296),y=56320|y&1023),h.push(y),d+=B}return lr(h)}var at=4096;function lr(n){let i=n.length;if(i<=at)return String.fromCharCode.apply(String,n);let s="",h=0;for(;h<i;)s+=String.fromCharCode.apply(String,n.slice(h,h+=at));return s}function cr(n,i,s){let h="";s=Math.min(n.length,s);for(let d=i;d<s;++d)h+=String.fromCharCode(n[d]&127);return h}function hr(n,i,s){let h="";s=Math.min(n.length,s);for(let d=i;d<s;++d)h+=String.fromCharCode(n[d]);return h}function fr(n,i,s){let h=n.length;(!i||i<0)&&(i=0),(!s||s<0||s>h)&&(s=h);let d="";for(let g=i;g<s;++g)d+=wr[n[g]];return d}function dr(n,i,s){let h=n.slice(i,s),d="";for(let g=0;g<h.length-1;g+=2)d+=String.fromCharCode(h[g]+h[g+1]*256);return d}u.prototype.slice=function(n,i){let s=this.length;n=~~n,i=i===void 0?s:~~i,n<0?(n+=s,n<0&&(n=0)):n>s&&(n=s),i<0?(i+=s,i<0&&(i=0)):i>s&&(i=s),i<n&&(i=n);let h=this.subarray(n,i);return Object.setPrototypeOf(h,u.prototype),h};function W(n,i,s){if(n%1!==0||n<0)throw new RangeError("offset is not uint");if(n+i>s)throw new RangeError("Trying to access beyond buffer length")}u.prototype.readUintLE=u.prototype.readUIntLE=function(n,i,s){n=n>>>0,i=i>>>0,s||W(n,i,this.length);let h=this[n],d=1,g=0;for(;++g<i&&(d*=256);)h+=this[n+g]*d;return h},u.prototype.readUintBE=u.prototype.readUIntBE=function(n,i,s){n=n>>>0,i=i>>>0,s||W(n,i,this.length);let h=this[n+--i],d=1;for(;i>0&&(d*=256);)h+=this[n+--i]*d;return h},u.prototype.readUint8=u.prototype.readUInt8=function(n,i){return n=n>>>0,i||W(n,1,this.length),this[n]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(n,i){return n=n>>>0,i||W(n,2,this.length),this[n]|this[n+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(n,i){return n=n>>>0,i||W(n,2,this.length),this[n]<<8|this[n+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(n,i){return n=n>>>0,i||W(n,4,this.length),(this[n]|this[n+1]<<8|this[n+2]<<16)+this[n+3]*16777216},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(n,i){return n=n>>>0,i||W(n,4,this.length),this[n]*16777216+(this[n+1]<<16|this[n+2]<<8|this[n+3])},u.prototype.readBigUInt64LE=se(function(n){n=n>>>0,fe(n,"offset");let i=this[n],s=this[n+7];(i===void 0||s===void 0)&&ge(n,this.length-8);let h=i+this[++n]*256+this[++n]*65536+this[++n]*16777216,d=this[++n]+this[++n]*256+this[++n]*65536+s*16777216;return BigInt(h)+(BigInt(d)<<BigInt(32))}),u.prototype.readBigUInt64BE=se(function(n){n=n>>>0,fe(n,"offset");let i=this[n],s=this[n+7];(i===void 0||s===void 0)&&ge(n,this.length-8);let h=i*16777216+this[++n]*65536+this[++n]*256+this[++n],d=this[++n]*16777216+this[++n]*65536+this[++n]*256+s;return(BigInt(h)<<BigInt(32))+BigInt(d)}),u.prototype.readIntLE=function(n,i,s){n=n>>>0,i=i>>>0,s||W(n,i,this.length);let h=this[n],d=1,g=0;for(;++g<i&&(d*=256);)h+=this[n+g]*d;return d*=128,h>=d&&(h-=Math.pow(2,8*i)),h},u.prototype.readIntBE=function(n,i,s){n=n>>>0,i=i>>>0,s||W(n,i,this.length);let h=i,d=1,g=this[n+--h];for(;h>0&&(d*=256);)g+=this[n+--h]*d;return d*=128,g>=d&&(g-=Math.pow(2,8*i)),g},u.prototype.readInt8=function(n,i){return n=n>>>0,i||W(n,1,this.length),this[n]&128?(255-this[n]+1)*-1:this[n]},u.prototype.readInt16LE=function(n,i){n=n>>>0,i||W(n,2,this.length);let s=this[n]|this[n+1]<<8;return s&32768?s|4294901760:s},u.prototype.readInt16BE=function(n,i){n=n>>>0,i||W(n,2,this.length);let s=this[n+1]|this[n]<<8;return s&32768?s|4294901760:s},u.prototype.readInt32LE=function(n,i){return n=n>>>0,i||W(n,4,this.length),this[n]|this[n+1]<<8|this[n+2]<<16|this[n+3]<<24},u.prototype.readInt32BE=function(n,i){return n=n>>>0,i||W(n,4,this.length),this[n]<<24|this[n+1]<<16|this[n+2]<<8|this[n+3]},u.prototype.readBigInt64LE=se(function(n){n=n>>>0,fe(n,"offset");let i=this[n],s=this[n+7];(i===void 0||s===void 0)&&ge(n,this.length-8);let h=this[n+4]+this[n+5]*256+this[n+6]*65536+(s<<24);return(BigInt(h)<<BigInt(32))+BigInt(i+this[++n]*256+this[++n]*65536+this[++n]*16777216)}),u.prototype.readBigInt64BE=se(function(n){n=n>>>0,fe(n,"offset");let i=this[n],s=this[n+7];(i===void 0||s===void 0)&&ge(n,this.length-8);let h=(i<<24)+this[++n]*65536+this[++n]*256+this[++n];return(BigInt(h)<<BigInt(32))+BigInt(this[++n]*16777216+this[++n]*65536+this[++n]*256+s)}),u.prototype.readFloatLE=function(n,i){return n=n>>>0,i||W(n,4,this.length),r.read(this,n,!0,23,4)},u.prototype.readFloatBE=function(n,i){return n=n>>>0,i||W(n,4,this.length),r.read(this,n,!1,23,4)},u.prototype.readDoubleLE=function(n,i){return n=n>>>0,i||W(n,8,this.length),r.read(this,n,!0,52,8)},u.prototype.readDoubleBE=function(n,i){return n=n>>>0,i||W(n,8,this.length),r.read(this,n,!1,52,8)};function H(n,i,s,h,d,g){if(!u.isBuffer(n))throw new TypeError('"buffer" argument must be a Buffer instance');if(i>d||i<g)throw new RangeError('"value" argument is out of bounds');if(s+h>n.length)throw new RangeError("Index out of range")}u.prototype.writeUintLE=u.prototype.writeUIntLE=function(n,i,s,h){if(n=+n,i=i>>>0,s=s>>>0,!h){let y=Math.pow(2,8*s)-1;H(this,n,i,s,y,0)}let d=1,g=0;for(this[i]=n&255;++g<s&&(d*=256);)this[i+g]=n/d&255;return i+s},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(n,i,s,h){if(n=+n,i=i>>>0,s=s>>>0,!h){let y=Math.pow(2,8*s)-1;H(this,n,i,s,y,0)}let d=s-1,g=1;for(this[i+d]=n&255;--d>=0&&(g*=256);)this[i+d]=n/g&255;return i+s},u.prototype.writeUint8=u.prototype.writeUInt8=function(n,i,s){return n=+n,i=i>>>0,s||H(this,n,i,1,255,0),this[i]=n&255,i+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(n,i,s){return n=+n,i=i>>>0,s||H(this,n,i,2,65535,0),this[i]=n&255,this[i+1]=n>>>8,i+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(n,i,s){return n=+n,i=i>>>0,s||H(this,n,i,2,65535,0),this[i]=n>>>8,this[i+1]=n&255,i+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(n,i,s){return n=+n,i=i>>>0,s||H(this,n,i,4,4294967295,0),this[i+3]=n>>>24,this[i+2]=n>>>16,this[i+1]=n>>>8,this[i]=n&255,i+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(n,i,s){return n=+n,i=i>>>0,s||H(this,n,i,4,4294967295,0),this[i]=n>>>24,this[i+1]=n>>>16,this[i+2]=n>>>8,this[i+3]=n&255,i+4};function st(n,i,s,h,d){ft(i,h,d,n,s,7);let g=Number(i&BigInt(4294967295));n[s++]=g,g=g>>8,n[s++]=g,g=g>>8,n[s++]=g,g=g>>8,n[s++]=g;let y=Number(i>>BigInt(32)&BigInt(4294967295));return n[s++]=y,y=y>>8,n[s++]=y,y=y>>8,n[s++]=y,y=y>>8,n[s++]=y,s}function ot(n,i,s,h,d){ft(i,h,d,n,s,7);let g=Number(i&BigInt(4294967295));n[s+7]=g,g=g>>8,n[s+6]=g,g=g>>8,n[s+5]=g,g=g>>8,n[s+4]=g;let y=Number(i>>BigInt(32)&BigInt(4294967295));return n[s+3]=y,y=y>>8,n[s+2]=y,y=y>>8,n[s+1]=y,y=y>>8,n[s]=y,s+8}u.prototype.writeBigUInt64LE=se(function(n,i=0){return st(this,n,i,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeBigUInt64BE=se(function(n,i=0){return ot(this,n,i,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeIntLE=function(n,i,s,h){if(n=+n,i=i>>>0,!h){let B=Math.pow(2,8*s-1);H(this,n,i,s,B-1,-B)}let d=0,g=1,y=0;for(this[i]=n&255;++d<s&&(g*=256);)n<0&&y===0&&this[i+d-1]!==0&&(y=1),this[i+d]=(n/g>>0)-y&255;return i+s},u.prototype.writeIntBE=function(n,i,s,h){if(n=+n,i=i>>>0,!h){let B=Math.pow(2,8*s-1);H(this,n,i,s,B-1,-B)}let d=s-1,g=1,y=0;for(this[i+d]=n&255;--d>=0&&(g*=256);)n<0&&y===0&&this[i+d+1]!==0&&(y=1),this[i+d]=(n/g>>0)-y&255;return i+s},u.prototype.writeInt8=function(n,i,s){return n=+n,i=i>>>0,s||H(this,n,i,1,127,-128),n<0&&(n=255+n+1),this[i]=n&255,i+1},u.prototype.writeInt16LE=function(n,i,s){return n=+n,i=i>>>0,s||H(this,n,i,2,32767,-32768),this[i]=n&255,this[i+1]=n>>>8,i+2},u.prototype.writeInt16BE=function(n,i,s){return n=+n,i=i>>>0,s||H(this,n,i,2,32767,-32768),this[i]=n>>>8,this[i+1]=n&255,i+2},u.prototype.writeInt32LE=function(n,i,s){return n=+n,i=i>>>0,s||H(this,n,i,4,2147483647,-2147483648),this[i]=n&255,this[i+1]=n>>>8,this[i+2]=n>>>16,this[i+3]=n>>>24,i+4},u.prototype.writeInt32BE=function(n,i,s){return n=+n,i=i>>>0,s||H(this,n,i,4,2147483647,-2147483648),n<0&&(n=4294967295+n+1),this[i]=n>>>24,this[i+1]=n>>>16,this[i+2]=n>>>8,this[i+3]=n&255,i+4},u.prototype.writeBigInt64LE=se(function(n,i=0){return st(this,n,i,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),u.prototype.writeBigInt64BE=se(function(n,i=0){return ot(this,n,i,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function ut(n,i,s,h,d,g){if(s+h>n.length)throw new RangeError("Index out of range");if(s<0)throw new RangeError("Index out of range")}function lt(n,i,s,h,d){return i=+i,s=s>>>0,d||ut(n,i,s,4,34028234663852886e22,-34028234663852886e22),r.write(n,i,s,h,23,4),s+4}u.prototype.writeFloatLE=function(n,i,s){return lt(this,n,i,!0,s)},u.prototype.writeFloatBE=function(n,i,s){return lt(this,n,i,!1,s)};function ct(n,i,s,h,d){return i=+i,s=s>>>0,d||ut(n,i,s,8,17976931348623157e292,-17976931348623157e292),r.write(n,i,s,h,52,8),s+8}u.prototype.writeDoubleLE=function(n,i,s){return ct(this,n,i,!0,s)},u.prototype.writeDoubleBE=function(n,i,s){return ct(this,n,i,!1,s)},u.prototype.copy=function(n,i,s,h){if(!u.isBuffer(n))throw new TypeError("argument should be a Buffer");if(s||(s=0),!h&&h!==0&&(h=this.length),i>=n.length&&(i=n.length),i||(i=0),h>0&&h<s&&(h=s),h===s||n.length===0||this.length===0)return 0;if(i<0)throw new RangeError("targetStart out of bounds");if(s<0||s>=this.length)throw new RangeError("Index out of range");if(h<0)throw new RangeError("sourceEnd out of bounds");h>this.length&&(h=this.length),n.length-i<h-s&&(h=n.length-i+s);let d=h-s;return this===n&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(i,s,h):Uint8Array.prototype.set.call(n,this.subarray(s,h),i),d},u.prototype.fill=function(n,i,s,h){if(typeof n=="string"){if(typeof i=="string"?(h=i,i=0,s=this.length):typeof s=="string"&&(h=s,s=this.length),h!==void 0&&typeof h!="string")throw new TypeError("encoding must be a string");if(typeof h=="string"&&!u.isEncoding(h))throw new TypeError("Unknown encoding: "+h);if(n.length===1){let g=n.charCodeAt(0);(h==="utf8"&&g<128||h==="latin1")&&(n=g)}}else typeof n=="number"?n=n&255:typeof n=="boolean"&&(n=Number(n));if(i<0||this.length<i||this.length<s)throw new RangeError("Out of range index");if(s<=i)return this;i=i>>>0,s=s===void 0?this.length:s>>>0,n||(n=0);let d;if(typeof n=="number")for(d=i;d<s;++d)this[d]=n;else{let g=u.isBuffer(n)?n:u.from(n,h),y=g.length;if(y===0)throw new TypeError('The value "'+n+'" is invalid for argument "value"');for(d=0;d<s-i;++d)this[d+i]=g[d%y]}return this};var he={};function Oe(n,i,s){he[n]=class extends s{constructor(){super(),Object.defineProperty(this,"message",{value:i.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${n}]`,this.stack,delete this.name}get code(){return n}set code(h){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:h,writable:!0})}toString(){return`${this.name} [${n}]: ${this.message}`}}}Oe("ERR_BUFFER_OUT_OF_BOUNDS",function(n){return n?`${n} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Oe("ERR_INVALID_ARG_TYPE",function(n,i){return`The "${n}" argument must be of type number. Received type ${typeof i}`},TypeError),Oe("ERR_OUT_OF_RANGE",function(n,i,s){let h=`The value of "${n}" is out of range.`,d=s;return Number.isInteger(s)&&Math.abs(s)>4294967296?d=ht(String(s)):typeof s=="bigint"&&(d=String(s),(s>BigInt(2)**BigInt(32)||s<-(BigInt(2)**BigInt(32)))&&(d=ht(d)),d+="n"),h+=` It must be ${i}. Received ${d}`,h},RangeError);function ht(n){let i="",s=n.length,h=n[0]==="-"?1:0;for(;s>=h+4;s-=3)i=`_${n.slice(s-3,s)}${i}`;return`${n.slice(0,s)}${i}`}function pr(n,i,s){fe(i,"offset"),(n[i]===void 0||n[i+s]===void 0)&&ge(i,n.length-(s+1))}function ft(n,i,s,h,d,g){if(n>s||n<i){let y=typeof i=="bigint"?"n":"",B;throw g>3?i===0||i===BigInt(0)?B=`>= 0${y} and < 2${y} ** ${(g+1)*8}${y}`:B=`>= -(2${y} ** ${(g+1)*8-1}${y}) and < 2 ** ${(g+1)*8-1}${y}`:B=`>= ${i}${y} and <= ${s}${y}`,new he.ERR_OUT_OF_RANGE("value",B,n)}pr(h,d,g)}function fe(n,i){if(typeof n!="number")throw new he.ERR_INVALID_ARG_TYPE(i,"number",n)}function ge(n,i,s){throw Math.floor(n)!==n?(fe(n,s),new he.ERR_OUT_OF_RANGE(s||"offset","an integer",n)):i<0?new he.ERR_BUFFER_OUT_OF_BOUNDS:new he.ERR_OUT_OF_RANGE(s||"offset",`>= ${s?1:0} and <= ${i}`,n)}var gr=/[^+/0-9A-Za-z-_]/g;function yr(n){if(n=n.split("=")[0],n=n.trim().replace(gr,""),n.length<2)return"";for(;n.length%4!==0;)n=n+"=";return n}function Ce(n,i){i=i||1/0;let s,h=n.length,d=null,g=[];for(let y=0;y<h;++y){if(s=n.charCodeAt(y),s>55295&&s<57344){if(!d){if(s>56319){(i-=3)>-1&&g.push(239,191,189);continue}else if(y+1===h){(i-=3)>-1&&g.push(239,191,189);continue}d=s;continue}if(s<56320){(i-=3)>-1&&g.push(239,191,189),d=s;continue}s=(d-55296<<10|s-56320)+65536}else d&&(i-=3)>-1&&g.push(239,191,189);if(d=null,s<128){if((i-=1)<0)break;g.push(s)}else if(s<2048){if((i-=2)<0)break;g.push(s>>6|192,s&63|128)}else if(s<65536){if((i-=3)<0)break;g.push(s>>12|224,s>>6&63|128,s&63|128)}else if(s<1114112){if((i-=4)<0)break;g.push(s>>18|240,s>>12&63|128,s>>6&63|128,s&63|128)}else throw new Error("Invalid code point")}return g}function mr(n){let i=[];for(let s=0;s<n.length;++s)i.push(n.charCodeAt(s)&255);return i}function vr(n,i){let s,h,d,g=[];for(let y=0;y<n.length&&!((i-=2)<0);++y)s=n.charCodeAt(y),h=s>>8,d=s%256,g.push(d),g.push(h);return g}function dt(n){return e.toByteArray(yr(n))}function we(n,i,s,h){let d;for(d=0;d<h&&!(d+s>=i.length||d>=n.length);++d)i[d+s]=n[d];return d}function ne(n,i){return n instanceof i||n!=null&&n.constructor!=null&&n.constructor.name!=null&&n.constructor.name===i.name}function Re(n){return n!==n}var wr=function(){let n="0123456789abcdef",i=new Array(256);for(let s=0;s<16;++s){let h=s*16;for(let d=0;d<16;++d)i[h+d]=n[s]+n[d]}return i}();function se(n){return typeof BigInt>"u"?_r:n}function _r(){throw new Error("BigInt not supported")}}),my=tt((t,e)=>{typeof window<"u"?(window.global=window,global.fetch=window.fetch,e.exports={Buffer:pa().Buffer,Crypto:window.crypto}):e.exports={Buffer:pa().Buffer,Crypto:crypto}}),Do={};hy(Do,{AVSCTap:()=>mn,ArweaveSigner:()=>ya,DataItem:()=>vn,MAX_TAG_BYTES:()=>oi,MIN_BINARY_SIZE:()=>_a,SIG_CONFIG:()=>sr,SignatureConfig:()=>Be,Signer:()=>zo,createData:()=>qo,deserializeTags:()=>si,indexToType:()=>ma,serializeTags:()=>wa,tagsExceedLimit:()=>Go});var zo=class{signer;publicKey;signatureType;signatureLength;ownerLength;pem;static verify(t,e,r,a){throw new Error("You must implement verify method on child")}},vy=Nt(da(),1),Ne=Nt(Fo(),1);async function Wo(t){if(Array.isArray(t)){let o=(0,Ne.concatBuffers)([(0,Ne.stringToBuffer)("list"),(0,Ne.stringToBuffer)(t.length.toString())]);return await Vo(t,await rt().hash(o,"SHA-384"))}let e=t,r=(0,Ne.concatBuffers)([(0,Ne.stringToBuffer)("blob"),(0,Ne.stringToBuffer)(e.byteLength.toString())]),a=(0,Ne.concatBuffers)([await rt().hash(r,"SHA-384"),await rt().hash(e,"SHA-384")]);return await rt().hash(a,"SHA-384")}async function Vo(t,e){if(t.length<1)return e;let r=(0,Ne.concatBuffers)([e,await Wo(t[0])]),a=await rt().hash(r,"SHA-384");return await Vo(t.slice(1),a)}var ga=Nt(gy(),1),wy=ga.default.default?ga.default.default:ga.default,_y=class extends wy{getPublicKey(t){throw new Error("Unimplemented")}},by;function rt(){return by??=new _y}var Be;(function(t){t[t.ARWEAVE=1]="ARWEAVE",t[t.ED25519=2]="ED25519",t[t.ETHEREUM=3]="ETHEREUM",t[t.SOLANA=4]="SOLANA",t[t.INJECTEDAPTOS=5]="INJECTEDAPTOS",t[t.MULTIAPTOS=6]="MULTIAPTOS",t[t.TYPEDETHEREUM=7]="TYPEDETHEREUM"})(Be||(Be={}));var sr={[Be.ARWEAVE]:{sigLength:512,pubLength:512,sigName:"arweave"},[Be.ED25519]:{sigLength:64,pubLength:32,sigName:"ed25519"},[Be.ETHEREUM]:{sigLength:65,pubLength:65,sigName:"ethereum"},[Be.SOLANA]:{sigLength:64,pubLength:32,sigName:"solana"},[Be.INJECTEDAPTOS]:{sigLength:64,pubLength:32,sigName:"injectedAptos"},[Be.MULTIAPTOS]:{sigLength:2052,pubLength:1025,sigName:"multiAptos"},[Be.TYPEDETHEREUM]:{sigLength:65,pubLength:42,sigName:"typedEthereum"}},ya=class{signatureType=1;ownerLength=sr[1].pubLength;signatureLength=sr[1].sigLength;jwk;pk;constructor(t){this.pk=t.n,this.jwk=t}get publicKey(){return vy.default.toBuffer(this.pk)}sign(t){return rt().sign(this.jwk,t)}static async verify(t,e,r){return await rt().verify(t,e,r)}},ma={1:ya},Ke=Nt(da(),1);async function va(t){return Wo([(0,Ne.stringToBuffer)("dataitem"),(0,Ne.stringToBuffer)("1"),(0,Ne.stringToBuffer)(t.signatureType.toString()),t.rawOwner,t.rawTarget,t.rawAnchor,t.rawTags,t.rawData])}async function Ey(t,e){let r=await va(t),a=await e.sign(r),o=await rt().hash(a);return{signature:Buffer.from(a),id:Buffer.from(o)}}async function Ay(t,e){let{signature:r,id:a}=await Ey(t,e);return t.getRaw().set(r,2),a}var mn=class{buf;pos;constructor(t=Buffer.alloc(oi),e=0){this.buf=t,this.pos=e}writeTags(t){if(!Array.isArray(t))throw new Error("input must be array");let e=t.length,r;if(e)for(this.writeLong(e),r=0;r<e;r++){let a=t[r];if(a?.name===void 0||a?.value===void 0)throw new Error(`Invalid tag format for ${a}, expected {name:string, value: string}`);this.writeString(a.name),this.writeString(a.value)}this.writeLong(0)}toBuffer(){let t=Buffer.alloc(this.pos);if(this.pos>this.buf.length)throw new Error(`Too many tag bytes (${this.pos} > ${this.buf.length})`);return this.buf.copy(t,0,0,this.pos),t}tagsExceedLimit(){return this.pos>this.buf.length}writeLong(t){let e=this.buf,r,a;if(t>=-1073741824&&t<1073741824){a=t>=0?t<<1:~t<<1|1;do e[this.pos]=a&127,a>>=7;while(a&&(e[this.pos++]|=128))}else{r=t>=0?t*2:-t*2-1;do e[this.pos]=r&127,r/=128;while(r>=1&&(e[this.pos++]|=128))}this.pos++,this.buf=e}writeString(t){let e=Buffer.byteLength(t),r=this.buf;this.writeLong(e);let a=this.pos;if(this.pos+=e,!(this.pos>r.length)){if(e>64)this.buf.write(t,this.pos-e,e,"utf8");else{let o,l,c,u;for(o=0,l=e;o<l;o++)c=t.charCodeAt(o),c<128?r[a++]=c:c<2048?(r[a++]=c>>6|192,r[a++]=c&63|128):(c&64512)===55296&&((u=t.charCodeAt(o+1))&64512)===56320?(c=65536+((c&1023)<<10)+(u&1023),o++,r[a++]=c>>18|240,r[a++]=c>>12&63|128,r[a++]=c>>6&63|128,r[a++]=c&63|128):(r[a++]=c>>12|224,r[a++]=c>>6&63|128,r[a++]=c&63|128)}this.buf=r}}readLong(){let t=0,e=0,r=this.buf,a,o,l,c;do a=r[this.pos++],o=a&128,t|=(a&127)<<e,e+=7;while(o&&e<28);if(o){l=t,c=268435456;do a=r[this.pos++],l+=(a&127)*c,c*=128;while(a&128);return(l%2?-(l+1):l)/2}return t>>1^-(t&1)}skipLong(){let t=this.buf;for(;t[this.pos++]&128;);}readTags(){let t=[],e;for(;e=this.readLong();)for(e<0&&(e=-e,this.skipLong());e--;){let r=this.readString(),a=this.readString();t.push({name:r,value:a})}return t}readString(){let t=this.readLong(),e=this.pos,r=this.buf;if(this.pos+=t,!(this.pos>r.length))return this.buf.slice(e,e+t).toString()}};function wa(t){let e=new mn;return e.writeTags(t),e.toBuffer()}function Go(t){let e=new mn;return e.writeTags(t),e.tagsExceedLimit()}function si(t){return new mn(t).readTags()}function St(t){let e=0;for(let r=t.length-1;r>=0;r--)e=e*256+t[r];return e}function Ty(t){if(t>29)throw new Error("Short too long");let e=[0,0];for(let r=0;r<e.length;r++){let a=t&255;e[r]=a,t=(t-a)/256}return Uint8Array.from(e)}function Ko(t){let e=[0,0,0,0,0,0,0,0];for(let r=0;r<e.length;r++){let a=t&255;e[r]=a,t=(t-a)/256}return Uint8Array.from(e)}var Sy=Nt(my(),1),or=Nt(pa(),1),oi=4096,_a=80,vn=class{binary;_id;constructor(t){this.binary=t}static isDataItem(t){return t.binary!==void 0}get signatureType(){let t=St(this.binary.subarray(0,2));if(Be?.[t]!==void 0)return t;throw new Error("Unknown signature type: "+t)}async isValid(){return vn.verify(this.binary)}get id(){return(async()=>Ke.default.encode(await this.rawId))()}set id(t){this._id=Ke.default.toBuffer(t)}get rawId(){return(async()=>or.Buffer.from(await Sy.Crypto.subtle.digest("SHA-256",this.rawSignature)))()}set rawId(t){this._id=t}get rawSignature(){return this.binary.subarray(2,2+this.signatureLength)}get signature(){return Ke.default.encode(this.rawSignature)}set rawOwner(t){if(t.byteLength!=this.ownerLength)throw new Error(`Expected raw owner (pubkey) to be ${this.ownerLength} bytes, got ${t.byteLength} bytes.`);this.binary.set(t,2+this.signatureLength)}get rawOwner(){return this.binary.subarray(2+this.signatureLength,2+this.signatureLength+this.ownerLength)}get signatureLength(){return sr[this.signatureType].sigLength}get owner(){return Ke.default.encode(this.rawOwner)}get ownerLength(){return sr[this.signatureType].pubLength}get rawTarget(){let t=this.getTargetStart();return this.binary[t]==1?this.binary.subarray(t+1,t+33):or.Buffer.alloc(0)}get target(){return Ke.default.encode(this.rawTarget)}get rawAnchor(){let t=this.getAnchorStart();return this.binary[t]==1?this.binary.subarray(t+1,t+33):or.Buffer.alloc(0)}get anchor(){return this.rawAnchor.toString()}get rawTags(){let t=this.getTagsStart(),e=St(this.binary.subarray(t+8,t+16));return this.binary.subarray(t+16,t+16+e)}get tags(){let t=this.getTagsStart();if(St(this.binary.subarray(t,t+8))==0)return[];let e=St(this.binary.subarray(t+8,t+16));return si(or.Buffer.from(this.binary.subarray(t+16,t+16+e)))}get tagsB64Url(){return this.tags.map(t=>({name:Ke.default.encode(t.name),value:Ke.default.encode(t.value)}))}getStartOfData(){let t=this.getTagsStart(),e=this.binary.subarray(t+8,t+16),r=St(e);return t+16+r}get rawData(){let t=this.getTagsStart(),e=this.binary.subarray(t+8,t+16),r=St(e),a=t+16+r;return this.binary.subarray(a,this.binary.length)}get data(){return Ke.default.encode(this.rawData)}getRaw(){return this.binary}async sign(t){return this._id=await Ay(this,t),this.rawId}async setSignature(t){this.binary.set(t,2),this._id=or.Buffer.from(await rt().hash(t))}isSigned(){return(this._id?.length??0)>0}toJSON(){return{signature:this.signature,owner:this.owner,target:this.target,tags:this.tags.map(t=>({name:Ke.default.encode(t.name),value:Ke.default.encode(t.value)})),data:this.data}}static async verify(t){if(t.byteLength<_a)return!1;let e=new vn(t),r=e.signatureType,a=e.getTagsStart(),o=St(t.subarray(a,a+8)),l=t.subarray(a+8,a+16),c=St(l);if(c>oi)return!1;if(o>0)try{if(si(or.Buffer.from(t.subarray(a+16,a+16+c))).length!==o)return!1}catch{return!1}let u=ma[r],f=await va(e);return await u.verify(e.rawOwner,f,e.rawSignature)}async getSignatureData(){return va(this)}getTagsStart(){let t=this.getTargetStart(),e=this.binary[t]==1,r=t+(e?33:1),a=this.binary[r]==1;return r+=a?33:1,r}getTargetStart(){return 2+this.signatureLength+this.ownerLength}getAnchorStart(){let t=this.getTargetStart()+1,e=this.binary[this.getTargetStart()]==1;return t+=e?32:0,t}},xy=Nt(da(),1);function qo(t,e,r){let a=e.publicKey,o=r?.target?xy.default.toBuffer(r.target):null,l=1+(o?.byteLength??0),c=r?.anchor?Buffer.from(r.anchor):null,u=1+(c?.byteLength??0),f=(r?.tags?.length??0)>0?wa(r.tags):null,p=16+(f?f.byteLength:0),b=Buffer.from(t),w=b.byteLength,v=2+e.signatureLength+e.ownerLength+l+u+p+w,E=Buffer.alloc(v);if(E.set(Ty(e.signatureType),0),E.set(new Uint8Array(e.signatureLength).fill(0),2),a.byteLength!==e.ownerLength)throw new Error(`Owner must be ${e.ownerLength} bytes, but was incorrectly ${a.byteLength}`);E.set(a,2+e.signatureLength);let m=2+e.signatureLength+e.ownerLength;if(E[m]=o?1:0,o){if(o.byteLength!==32)throw new Error(`Target must be 32 bytes but was incorrectly ${o.byteLength}`);E.set(o,m+1)}let _=m+l,A=_+1;if(E[_]=c?1:0,c){if(A+=c.byteLength,c.byteLength!==32)throw new Error("Anchor must be 32 bytes");E.set(c,_+1)}E.set(Ko(r?.tags?.length??0),A);let S=Ko(f?.byteLength??0);E.set(S,A+8),f&&E.set(f,A+16);let O=A+p;return E.set(b,O),new vn(E)}var ba={...Do};globalThis.arbundles??=ba;var ky=ba,By=ba;globalThis.Buffer||(globalThis.Buffer=No.Buffer);var{DataItem:Iy}=Mo;function Oy(t){return async({data:r,tags:a,target:o,anchor:l,createDataItem:c=u=>new Iy(u)})=>{const u=await t.signDataItem({data:r,tags:a,target:o,anchor:l}),f=c(No.Buffer.from(u));return{id:await f.id,raw:await f.getRaw()}}}var Cy=globalThis.GATEWAY_URL||void 0,Ry=globalThis.MU_URL||void 0,Uy=globalThis.CU_URL||void 0,Ly=globalThis.GRAPHQL_URL||void 0,$y=globalThis.GRAPHQL_MAX_RETRIES||void 0,jy=globalThis.GRAPHQL_RETRY_BACKOFF||void 0,{result:qy,results:Hy,message:Py,spawn:Yy,monitor:Xy,unmonitor:Qy,dryrun:Jy,assign:em}=ay({GATEWAY_URL:Cy,MU_URL:Ry,CU_URL:Uy,GRAPHQL_URL:Ly,GRAPHQL_MAX_RETRIES:$y,GRAPHQL_RETRY_BACKOFF:jy}),tm=Po.createDataItemSigner;/*! Bundled license information:

ieee754/index.js:
(*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)

buffer/index.js:
(*!
* The buffer module from node.js, for the browser.
*
* @author   Feross Aboukhadijeh <https://feross.org>
* @license  MIT
*)

warp-arbundles/build/web/esm/bundle.js:
(*! Bundled license information:

ieee754/index.js:
(*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)

buffer/index.js:
(*!
* The buffer module from node.js, for the browser.
*
* @author   Feross Aboukhadijeh <https://feross.org>
* @license  MIT
*)
*)
*/var Ny=du(yu()),My=class Mt{#a;#u;#f;constructor(e,r,a=!1){this.#a=e,this.#u=r,this.#f=a}static log=(...e)=>console.log("[Junction]",...e);static async initialize(e){e.debug||(Mt.log=()=>{});let{signer:r}=e;if(Mt.log("Initializing:",e),!r){let a;const o=localStorage.getItem("junctionWallet");o?(Mt.log("Found stored wallet."),a=JSON.parse(o)):(a=await new Ny.default().generateJWK(),localStorage.setItem("junctionWallet",JSON.stringify(a)),Mt.log("Generated new wallet."));const l=new mi(a);r=async({data:c,tags:u,target:f,anchor:p})=>{const b=za(c,l,{tags:u,target:f,anchor:p});return await b.sign(l),{id:await b.id,raw:await b.getRaw()}}}return new Mt(r,e.dispatcherId,e.trackUrlHashes??!1)}#d=async()=>{const e=[],r=document.querySelector('link[rel="canonical"]');let a=r&&r.getAttribute("href");a||(a=this.#f?window.location.href:window.location.href.replace(/#.*$/,"")),e.push({name:"url",value:a}),e.push({name:"ua",value:navigator.userAgent}),e.push({name:"la",value:navigator.language}),navigator.cookieEnabled&&e.push({name:"co",value:"1"});const o=new Date().getTimezoneOffset();if(o&&e.push({name:"tz",value:o>0?`UTC${o*-1/60}`:`UTC+${o*-1/60}`}),window.arweaveWallet){e.push({name:"ar",value:window.arweaveWallet.walletName}),e.push({name:"ar-ver",value:window.arweaveWallet.walletVersion});try{await window.arweaveWallet.getActiveAddress(),e.push({name:"ar-con",value:"1"})}catch{}}return window.ethereum&&(e.push({name:"eth",value:window.ethereum.isBraveWallet?"BraveWallet":window.ethereum.isMetaMask?"MetaMask":"unknown"}),window.ethereum.selectedAddress&&(e.push({name:"eth-con",value:"true"}),e.push({name:"eth-chain",value:""+window.ethereum.chainId}))),window.solana&&(e.push({name:"sol",value:window.solana.isBraveWallet?"BraveWallet":window.solana.isPhantom?"Phantom":"unknown"}),window.solana.publicKey&&e.push({name:"sol-con",value:"1"})),e};track=async(e,r={})=>{const a=await this.#d(),o=[{name:"Application",value:"Junction"},{name:"Action",value:"Track"},{name:"ts",value:""+Date.now()},{name:"ev",value:e},...a,...Object.entries(r).map(([l,c])=>({name:"j-"+l,value:""+c}))];Mt.log(o),await Py({process:this.#u,signer:this.#a,tags:o})};page=e=>this.track("pv",e)};async function Zy(){const t=document.querySelector("script[data-dispatcher-id]");if(!t)throw new Error("[Junction] Script tag missing data-dispatcher-id attribute");const e=t.getAttribute("data-dispatcher-id");if(!e)throw new Error("[Junction] Script tag missing data-dispatcher-id attribute");const r=t.getAttribute("data-track-url-hashes")==="true",a=t.getAttribute("data-debug")==="true",o=await My.initialize({dispatcherId:e,trackUrlHashes:r,debug:a});if(window.addEventListener("load",()=>{let l;try{l=window.performance.getEntriesByType("navigation").pop()?.domContentLoadedEventEnd}catch{try{l=window.performance.timing.loadEventEnd-window.performance.timing.navigationStart}catch{l=0}}o.page({lt:Math.ceil(l)})}),r)window.navigation.addEventListener("navigate",()=>o.page());else{let l=window.location.pathname;window.navigation.addEventListener("navigate",()=>{window.location.pathname!==l&&(l=window.location.pathname,o.page())})}}Zy();
